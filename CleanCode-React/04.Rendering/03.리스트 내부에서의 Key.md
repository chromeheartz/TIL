## Rendering

### 03. ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ì—ì„œì˜ Key

---

```jsx
// ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ì—ì„œì˜ KEY
// Warning: Each child in a list should have a unique "key" prop
// âŒ
<ul>
  {list.map((item) => (
    <li>{item}</li>
  ))}
</ul>

<ul>
  {list.map((item, index) => (
    <li key={index}>{item}</li>
  ))}
</ul>

<ul>
  {list.map((item, index) => (
    <li key={new Date().toString()}>{item}</li>
  ))}
</ul>

<ul>
  {list.map((item, index) => (
    <li key={uuidv4()}>{item}</li>
  ))}
</ul>

// âœ… â¬‡ï¸
<ul>
  {list.map((item, index) => (
    <li key={`card-item-${index}`}>{item}</li>
  ))}
</ul>

// âœ…ğŸ‘ â¬‡ï¸
const handleAddItem = (value) => {
	setLists((prev) => [
      ...prev,
      {
        id: crypto.randomUUID(),
        value: value,
      }
    ])
}

useEffect(() => {
  // listë¥¼ ë§Œë“¤ ë•Œ idë¥¼ ë¶€ì—¬
  handleAddItem(list)
}, [list])

return (
  <ul>
    {list.map((item) => (
      <li key={item.id}>{item}</li>
    ))}
  </ul>
)
```

ë¦¬ì•¡íŠ¸ì—ì„œ `listí˜•íƒœì˜ ëª©ë¡ì„ ë Œë”ë§` í•  ë•Œ í”íˆ ë³¼ ìˆ˜ ìˆëŠ” ì—ëŸ¬ê°€ ìˆë‹¤. ëª©ë¡ì— í•˜ìœ„ ì•„ì´í…œë“¤ì„ ë Œë”ë§ í•  ë•Œì— `ê³ ìœ ì˜ í‚¤` ê°€ í•„ìš”í•˜ë‹¤.

#### ì´ í‚¤ë¥¼ ì™œ ë„£ì–´ì•¼ í• ê¹Œ?

ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ ë¦¬ì•¡íŠ¸ ì…ì¥ì—ì„œëŠ” `Virtual DOM(ê°€ìƒë”)` ì„ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ë¬´ìˆ˜íˆ ë§ì€ ì•„ì´í…œë“¤ì´ ë Œë”ë§ë˜ë„ ì•Œê¸°ê°€ í˜ë“¤ë‹¤.

ì¦‰, ì•„ì´í…œë“¤ì´ ë§ì´ ë Œë”ë§ì´ ëœë‹¤ë©´ ì§€ì›Œì§€ê³  ì¶”ê°€ë˜ê³  í• ë•Œ `ê³ ìœ ì˜ êµ¬ë¶„ì` ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒ.

#### index

ê°„ë‹¨í•œ `í† ì´í”„ë¡œì íŠ¸` ê°™ì€ ê²½ìš°ëŠ” `key` ì— `index` ë¥¼ ë„£ì–´ì¤˜ë„ ë¬¸ì œê°€ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ”ë°, ë¦¬ì•¡íŠ¸ ì…ì¥ì—ì„œ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë§ì´ ìˆì„ ë•Œ keyë¥¼ indexë¡œ ë„£ìœ¼ë©´ ì´ìƒí•œ ë™ì‘ì„ ì´ˆë˜í•  ìˆ˜ ìˆë‹¤.

â—ï¸ ì¦‰, `unique` í•œ ê°’ì„ ë„£ë„ë¡ í•´ì•¼í•œë‹¤.

#### ë‹¤ë¥¸ ë°©ë²•ë“¤

**{`card-item-${index}`}** ì²˜ëŸ¼ prefixë¡œ ë„£ëŠ” ê²½ìš°ë„ ìˆê² ì§€ë§Œ ì‚¬ì‹¤ ì´ê²ƒë„ ë² ìŠ¤íŠ¸ëŠ” ì•„ë‹ˆë‹¤.

#### `new Date().toString()` ì€ ê´œì°®ì„ê¹Œ?

ê´œì°®ì€ ì•„ì´ë””ì–´ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤.
react componentëŠ” `props / state` ë“± ëª‡ë²ˆì´ë‚˜ ë¦¬ë Œë”ë§ ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ ë Œë”ë§ ìµœì í™”ë¥¼ ìœ„í•´ `memo / callback` ë“±ì„ ì‚¬ìš©í•˜ëŠ”ë° ì´ë ‡ê²Œ ì‘ì—…ì„ í•˜ê²Œë˜ë©´ ë Œë”ë§ í• ë•Œë§ˆë‹¤ `ì •ë§ ê³ ìœ í•œ ê°’ì„ ê³„ì† ì°ì–´ë‚¸ë‹¤`. ë˜í•œ ì´ ê°’ì´ `ìœ íš¨í•œ ê°’` ì€ ì•„ë‹ê²ƒì´ë‹¤. ê·¸ëƒ¥ ìœ ë‹ˆí¬í•¨ì„ ìœ„í•´ ì‘ì—…í•œê²ƒ

#### ê·¸ëŸ¼ `uuid` ëŠ”?

ì´ê²ƒë˜í•œ ë”ë¯¸ë°ì´í„°ë¥¼ ë§ˆêµ¬ì°ì–´ë‚¼ë•Œ í•˜ëŠ” í–‰ìœ„ì´ê¸° ë•Œë¬¸ì— ì¢‹ì§€ ì•Šë‹¤. ì´ë ‡ê²Œ `ì¸ë¼ì¸` ìœ¼ë¡œ uuidë¥¼ ë¶€ì—¬í•˜ëŠ”ê±´ êµ‰ì¥íˆ ìœ„í—˜í•˜ë‹¤.

#### bestëŠ”?

best í•´ê²°ì±…ì€ `id` ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ë‹¤. ë§Œì•½ ì„œë²„ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” ë°ì´í„°ì— idê°€ ë“¤ì–´ê°€ìˆì§€ ì•Šë‹¤ë©´ idë¥¼ ë¶€ì—¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ listê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ë ê²ƒì´ë‹¤.

```jsx
const handleAddItem = (value) => {
  setLists((prev) => [
    ...prev,
    {
      id: crypto.randomUUID(),
      value: value,
    },
  ]);
};

useEffect(() => {
  // listë¥¼ ë§Œë“¤ ë•Œ idë¥¼ ë¶€ì—¬
  handleAddItem(list);
}, [list]);

return (
  <ul>
    {list.map((item) => (
      <li key={item.id}>{item}</li>
    ))}
  </ul>
);
```

### ğŸ“Œ ì •ë¦¬

> âœ… ìœ ë‹ˆí¬í•œ ê°’ì„ `ë Œë”ë§` í•˜ëŠ” ì‹œì ìœ¼ë¡œ ë§ì¶”ë©´ ì ˆëŒ€ ì•ˆëœë‹¤. ë Œë”ë§ì€ ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ `2-n` íšŒ ë§Œí¼ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ ìœ ë‹ˆí¬í•œ ê°’ì´ ìœ ë‹ˆí¬í•˜ì§€ ì•Šê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤. ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§ í•˜ê¸° ì „ì— ë¯¸ë¦¬ `id` ë¥¼ ë§Œë“¤ì–´ë†“ëŠ” ë°©í–¥ì„ ì§€í–¥í•˜ì.
