## State

### 11. ì´ì „ ìƒíƒœ í™œìš©í•˜ê¸°

---

```jsx
// ì´ì „ ìƒíƒœ í™œìš©í•˜ê¸°
// âŒ
setAge(age + 1);

// âœ… â¬‡ï¸
setAge((prevAge) => prevAge + 1);
```

### ğŸ“Œ ì˜ˆì œ 1

```jsx
const PrevState = () => {
  const [age, setAge] = useState(0);

  function updateState() {
    setAge(age + 1); // setAge(0 + 1)
    setAge(age + 1); // setAge(0 + 1)
    setAge(age + 1); // setAge(0 + 1)
  }

  function updaterFunction() {
    setAge((prevAge) => prevAge + 1); // setAge(0 => 1)
    setAge((prevAge) => prevAge + 1); // setAge(1 => 2)
    setAge((prevAge) => prevAge + 1); // setAge(2 => 3)
  }
};
```

ë¦¬ì•¡íŠ¸ ì‹œ ì›¬ë§Œí•˜ë©´ `prevState` ë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤.

#### âœ… `updater function` ì„ `callback` ì— ë„£ëŠ” ë°©ë²•

ê·¸ì € `state` ë¥¼ ì°¸ì¡°í•´ì„œ ì—…ë°ì´íŠ¸í•˜ë©´ ê²‰ë³´ê¸°ì— ì œëŒ€ë¡œ ë™ì‘í•  ê²ƒ ê°™ë‹¤ê³  ì˜ˆìƒí•  ìˆ˜ ìˆì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ì´ˆë˜í•˜ê²Œ ëœë‹¤.

#### â­ï¸ `setState` ìì²´ëŠ” `ë¹„ë™ê¸°ì  ì²˜ë¦¬ ê³¼ì •` ì„ ê±°ì¹  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `ì´ì „ ìƒíƒœ` ê°€ ì•„ë‹Œ `ê°±ì‹ ë˜ê¸° ì „ ìƒíƒœ` ë¥¼ ë°”ë¼ ë³¼ ìˆ˜ ìˆë‹¤.

### ğŸ“Œ ì˜ˆì œ 2

```jsx
const PrevState = () => {
  const { cardState, setCardState } = useCard({
    cardCompany: "",
    cardNumber: "",
    cardHolder: "",
    expiredDate: "",
  });

  const handleCardNumber = (cardNumber) => {
    setCardState({
      ...cardState,
      cardNumber,
    });

    if (cardNumber.length === 8) {
      setOpenCardPopup(true);
    }
  };

  const handleCardCompany = (cardCompany) => {
    setCardState({
      ...cardState,
      ...cardCompany,
    });
    setOpenCardPopup(false);
  };

  return (
    <div>
      <input
        type="number"
        value={cardState.cardNumber}
        onChange={(e) => handleCardNumber(e.target.value)}
      />
      <input
        type="text"
        value={cardState.cardCompany}
        onChange={(e) => handleCardCompany(e.target.value)}
      />
    </div>
  );
};

export default PrevState;
```

ì´ë²ˆ ì˜ˆì‹œëŠ” ë” ë¬´ì„œìš´ ê²°ê³¼ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
ğŸ“ `ë‘ ë²ˆì˜ ì¸í„°ë ‰ì…˜ (handleCardNumber, handleCardCompany)` ê°€ ìˆëŠ”ë° `ë°”ë¼ë³´ëŠ” ìƒíƒœ` ê°€ ê°™ì€ê²½ìš°.

ìì¹« `handler` í•¨ìˆ˜ê°€ ê°ê° ìˆì–´ì„œ ë¬¸ì œì—†ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ ì´ëŸ° ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ `ì—°ê´€ëœ ìƒíƒœ` ë¥¼ ë¬¶ì–´ë†“ì•˜ê¸° ë•Œë¬¸ì— `ì‚¬ì´ë“œ ì´í™íŠ¸` ë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤. íŠ¹íˆ í˜„ì¬ ì˜ˆì‹œì—ì„œëŠ” `modal` ê¹Œì§€ ì‚¬ìš©í•˜ê³  ìˆê¸°ë•Œë¬¸ì— ì¤‘ë³µì´ ë  ìˆ˜ ìˆë‹¤. ë˜í•œ ëª¨ë‹¬ê°™ì€ ê²½ìš°ì—ëŠ” ì˜¤íˆë ¤ `true / false` ë¥¼ ì™”ë‹¤ ê°”ë‹¤ í•˜ëŠ” ê²½ìš°ì— `ì´ì „ ìƒíƒœ` ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì—ëŸ¬ê°€ ë‚  ìˆ˜ ìˆë‹¤.

```jsx
const handleCardNumber = (cardNumber) => {
  setCardState((prevState) => ({
    ...prevState,
    cardNumber,
  }));

  if (cardNumber.length === 8) {
    setOpenCardPopup(true);
  }
};

const handleCardCompany = (cardCompany) => {
  setCardState((prevState) => ({
    ...prevState,
    ...cardCompany,
  }));
  setOpenCardPopup(false);
};
```

`ì´ì „ ìƒíƒœ` ë¥¼ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ì–´ì£¼ì–´ì•¼ `ë Œë”ë§ í˜¹ì€ input` ì„ ì‚¬ìš©í•  ë•Œ ë¶ˆí•„ìš”í•œ ì—ëŸ¬ë¥¼ ë‚´ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

### ğŸ“Œ ì •ë¦¬

> âœ… ëŒ€ë¶€ë¶„ `updater function` ìœ¼ë¡œ `prevState` ë¥¼ ì‚¬ìš©í•´ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤. ì¶”ê°€ë¡œ ì´ì „ ìƒíƒœë¥¼ ì™„ì „íˆ ë®ì–´ì”Œìš°ë ¤ê³  í•  ë•Œì—ëŠ” `ì¼ë°©ì ìœ¼ë¡œ í• ë‹¹` í•  ìˆ˜ ìˆë‹¤.
