## State

### 07. ì—°ê´€ëœ ìƒíƒœ ë‹¨ìˆœí™”í•˜ê¸°

---

```jsx
// ì—°ê´€ëœ ìƒíƒœ ë‹¨ìˆœí™”í•˜ê¸°
// âŒ
const [isLoading, setIsLoading] = useState(false);
const [isFinish, setIsFinish] = useState(false);
...

// âœ… â¬‡ï¸
const PROMISE_STATE = {
  INIT: "init",
  LOADING: "loading",
  FINISH: "finish",
  ERROR: 'error',
}
const [promiseState, setPromiseState] = useState(PROMISE_STATE.INIT);
```

> `ë³µì¡í• ìˆ˜ë¡ ë‹¨ìˆœí•˜ê²Œ` ë¼ëŠ” íŒ¨í„´ì„ `KISS íŒ¨í„´` ì´ë¼ê³  í•œë‹¤. `Kepp It Simple Stupid` ë„ˆë¬´ë‚˜ë„ ë³µì¡í•˜ê²Œ ë§Œë“œëŠ” ê²ƒë“¤ì€ ë‹¨ìˆœí•˜ê²Œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ëª»í•˜ë‹¤.

```jsx
const FlatState = () => {
  const [isLoading, setIsLoading] = useState(false);
  const [isFinish, setIsFinish] = useState(false);
  const [isError, setIsError] = useState(false);

  const fetchData = () => {
    // fetch data ì‹œë„
    setIsLoading(true);

    fetch(url)
      .then(() => {
        // fetch Data ì„±ê³µ
        setIsLoading(false);
        setIsFinish(true);
      })
      .catch(() => {
        // fetch Data ì‹¤íŒ¨
        setIsError(true);
      });
  };
  if (isLoading) return <LoadingComponent />;
  if (isError) return <ErrorComponent />;
  if (isFinish) return <SuccessComponent />;
};

export default FlatState;
```

í•´ë‹¹ ì½”ë“œì˜ ê²½ìš°ì—ëŠ” `ë¹„ë™ê¸° ë°ì´í„° í†µì‹ ` ì„ í•œë‹¤. ì´ ë¹„ë™ê¸° ë°ì´í„° í†µì‹ ì´ ëë‚˜ëŠ” ë‹¤ìŒì— ë§ëŠ” ë Œë”ë§ì„ í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œì´ë‹¤.

ì¤‘ê°„ì— ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ìœ¼ë¡œ `ì„¸ ê°€ì§€ ìƒíƒœ` ê°€ ìˆë‹¤. `ì‹œë„, ì„±ê³µ, ì‹¤íŒ¨`

#### ì´ ì½”ë“œë¥¼ ê´€ë¦¬í•˜ëŠ”ë° `í˜„ì¬` ê¸°ì ì—ì„œëŠ” ë¬¸ì œê°€ ì—†ì§€ë§Œ â­ï¸ `ì ì¬ì ì¸ ë¬¸ì œ` ê°€ ìˆë‹¤.

ì´ ìƒíƒœì˜ ë¬¸ì œëŠ” `loading, finish, error` ëª¨ë‘ ë‹¤ `ì—°ê´€` ì´ ë˜ì–´ìˆë‹¤.

- `isLoading` ì´ `true` ì¼ ê²½ìš°ì—ëŠ” ë‚˜ë¨¸ì§€ ìƒíƒœëŠ” `false` ì´ê¸¸ ê¸°ëŒ€í•œë‹¤
  ê°™ì€ ë§¥ë½ìœ¼ë¡œ `isFinish, isError` ê°€ ê°ê° true ì¼ê²½ìš°ì— ë‹¤ë¥¸ ìƒíƒœëŠ” `false` ì´ê¸¸ ê¸°ëŒ€í• ê²ƒì´ë‹¤.

#### ì´ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?

ì¼ë‹¨ `í•˜ë‚˜` ë¡œ í•©ì³ë³¼ ìˆ˜ ìˆë‹¤. ê°ì²´ë¡œ í•©ì³ì„œ `useReducer` ë¡œ ë¬¶ì–´ë‚¼ ìˆ˜ ìˆëŠ”ë° ê°ì²´ ì´ì „ì— `ì—´ê±°í˜• ë°ì´í„°` ë¥¼ ê°„ë‹¨í•œ ë¬¸ìì—´ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

`Promise` ê°™ì´ ìƒê°í•´ë³´ë©´ ëœë‹¤.

```jsx
const PROMISE_STATE = {
  INIT: "init",
  LOADING: "loading",
  FINISH: "finish",
  ERROR: "error",
};

const FlatState = () => {
  const [promiseState, setPromiseState] = useState(PROMISE_STATE.INIT);

  const fetchData = () => {
    // fetch data ì‹œë„
    setPromiseState(PROMISE_STATE.LOADING);

    fetch(url)
      .then(() => {
        // fetch Data ì„±ê³µ
        setPromiseState(PROMISE_STATE.FINISH);
      })
      .catch(() => {
        // fetch Data ì‹¤íŒ¨
        setPromiseState(PROMISE_STATE.ERROR);
      });
  };
  if (promiseState === PROMISE_STATE.LOADING) return <LoadingComponent />;
  if (promiseState === PROMISE_STATE.FINISH) return <ErrorComponent />;
  if (promiseState === PROMISE_STATE.ERROR) return <SuccessComponent />;
};
```

ë¬¸ìì—´ë§Œ ì‚¬ìš©í•´ì„œ `ë¶ˆë³€` ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê³ , ìƒíƒœì— ëŒ€í•œ ë™ê¸°í™”ë„ ë‚˜ë¦„ ì„±ê³µí•œ ì˜ˆì œë¡œ ë³¼ ìˆ˜ ìˆë‹¤.
ê°ê° ìƒíƒœì¼ë•Œ `ë‹¤ë¥¸ ìƒíƒœë¥¼ ë™ê¸°í™”` í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì‹±ê²½ì„ ì“¸ í•„ìš”ê°€ ì—†ë‹¤.
ë˜í•œ `íœ´ë¨¼ ì—ëŸ¬` ê°€ ìƒê¸¸ê²ƒê°™ì€ ë¶€ë¶„ì€ `ì—´ê±°í˜• ë°ì´í„°` ë¡œ ê´€ë¦¬í–ˆë‹¤.

â—ï¸ `ë„¤ì´ë°` ì— ëŒ€í•´ ì¡°ê¸ˆ ë” ìƒê°í• ê²ƒ. í•´ë‹¹ ë„¤ì´ë°ì€ ë‹¨ì§€ ì˜ˆì œë¡œ ì‚¬ìš©í•œê²ƒì¼ë¿

### ğŸ“Œ ì •ë¦¬

> âœ… ìƒíƒœë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•˜ë‹¤ë³´ë©´ ìì—°ìŠ¤ëŸ½ê²Œ `useEffect` ê°€ ëŠ˜ì–´ë‚˜ê²Œ ë˜ê³  `side Effect` ê°€ ìƒê¸´ë‹¤. ì—°ê´€ëœ ìƒíƒœ ì¦‰, ë„ë¯¸ë…¸ ìƒíƒœê°™ì€ ê²½ìš°ëŠ” ë¬¶ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê³  `ê°ì²´` ê°€ ì•„ë‹Œ `ë¬¸ìì—´` ë¡œë„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
