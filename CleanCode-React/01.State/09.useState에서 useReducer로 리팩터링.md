## State

### 09. useStateì—ì„œ useReducerë¡œ ë¦¬íŒ©í„°ë§

---

```jsx
// useStateëŒ€ì‹  useReducerë¡œ ë¦¬íŒ©í„°ë§
// âŒ
const [isLoading, setIsLoading] = useState(false);
const [isFinish, setIsFinish] = useState(false);

// âœ… â¬‡ï¸
const [state, dispatch] = useReducer(reducer, INIT_STATE);
```

`useReducer` ë¥¼ ì•ˆì“°ëŠ” ì‚¬ëŒë„ ìˆê³  `ìƒíƒœ ê´€ë¦¬` ë¡œ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë„ ìˆë‹¤. ì´ `useReducer` ì˜ ì¢‹ì€ ì ì¤‘ í•˜ë‚˜ëŠ” `ìƒíƒœë¥¼ êµ¬ì¡°í™”` í•œë‹¤ëŠ” ê´€ì ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
const StateToReducer = () => {
  const [isLoading, setIsLoading] = useState(false);
  const [isSuccess, setIsSuccess] = useState(false);
  const [isFail, setIsFail] = useState(false);

  const fetchData = () => {
    // fetch Data ì‹œë„
    setIsLoading(true);

    fetch(url)
      .then(() => {
        // fetch Data ì„±ê³µ
        setIsLoading(false);
        setIsSuccess(true);
      })
      .catch(() => {
        // fetch Data ì‹¤íŒ¨
        setIsFail(true);
      });
  };

  if (isLoading) return <LoadingComponent />;
  if (isFail) return <ErrorComponent />;
  if (isSuccess) return <SuccessComponent />;
};

export default StateToReducer;
```

ê¸°ì¡´ê³¼ ê°™ì€ ì½”ë“œì—ì„œ ì‹œì‘.

```jsx
const INIT_STATE = {
  isLoading: false,
  isSuccess: false,
  isFail: false,
};

const reducer = (state, action) => {
  switch (
    action.type // ë³´í†µ typeì„ ë§ì´ ì“°ì§€ë§Œ ììœ í˜•íƒœë¡œ ë§Œë“¤ì–´ë„ ëœë‹¤.
  ) {
    case "FETCH_LOADING":
      return { ...state, isLoading: true };
    case "FETCH_SUCCESS":
      return { ...state, isSuccess: true };
    case "FETCH_FAIL":
      return { ...state, isFail: true };
    default:
      return INIT_STATE;
  }
};

const StateToReducer = () => {
  const [state, dispatch] = useReducer(reducer, INIT_STATE);
};
```

ì¼ë‹¨ ì´ˆê¸° ìƒíƒœë¥¼ ë§Œë“¤ì–´ì„œ `false` ë¡œ ëª¨ë‘ ì§€ì •í•œë‹¤. ì´í›„ `useReducer` ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ `ë°°ì—´ êµ¬ì¡° ë¶„í•´ í• ë‹¹` í•´ì„œ ê°€ì ¸ì˜¤ë©´ ëœë‹¤. (useStateì™€ ë¹„ìŠ·)

`useReducerë„ ìƒíƒœë¥¼ get / set` í•  ìˆ˜ ìˆë‹¤. ì¶”ê°€ë¡œ `ì²« ë²ˆì§¸ ì¸ìë¡œëŠ” reducer / ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ì´ˆê¸° ìƒíƒœ` ë¥¼ ì£¼ì–´ì•¼ í•œë‹¤.

`reducer` ì¦‰ ì¡°ì‘í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ listenerë¡œì„œ ë“±ë¡ì„ í•´ì¤€ë‹¤. ì´ `reducer` ëŠ” `ìƒíƒœ / ìƒíƒœë¥¼ ë³€í™”í•  ìˆ˜ ìˆëŠ” ì•¡ì…˜ íƒ€ì…` ì„ ê°€ì§„ë‹¤.

switchë¬¸ì„ ì‚¬ìš©í•´ì„œ `ë°”ë€” ìƒíƒœ` ë“¤ì„ ëª…ì‹œí•´ì£¼ë©´ ëœë‹¤.`default state`ë„ ê¹Œë¨¹ì§€ë§ê³  ëª…ì‹œí•˜ê¸°
âœ… ì‚¬ì‹¤ `useReducer` ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— `ì´ì „ ìƒíƒœ` ë¥¼ ì¨ë„ ë˜ì§€ë§Œ `{ isLoading: true, isSuccess: false, isFail: false }` ì²˜ëŸ¼ í•˜ë‚˜í•˜ë‚˜ ëª…ì‹œë¥¼ í•´ë„ ì¢‹ë‹¤ê³  í•œë‹¤.

ì´í›„ì— ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì•¡ì…˜ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ” `dispatch` ë¥¼ í˜¸ì¶œì‹œí‚¤ê³  `type` ì— ì•Œë§ê²Œ ë„£ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ëì´ë‹¤.

```jsx
const fecthData = () => {
  // fetch Data ì‹œë„
  dispatch({ type: "FETCH_LOADING" });

  fetch(url)
    .then(() => {
      // fetch Data ì„±ê³µ
      dispatch({ type: "FETCH_SUCCESS" });
    })
    .catch(() => {
      // fetch Data ì‹¤íŒ¨
      dispatch({ type: "FETCH_FAIL" });
    });
};
```

ì´ë ‡ê²Œí•˜ë©´ ìƒíƒœë¥¼ ë” ì„¸ë°€í•˜ê²Œ ì¡°ì‘í•  ìˆ˜ ìˆê³ , `reducer` ë¬¸ë²•ì€ â­ï¸ `ìˆœìˆ˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ` ì´ê¸° ë•Œë¬¸ì— `react / hook` ì— ì˜ì¡´ì ì´ì§€ ì•Šë‹¤.

ìƒíƒœë¥¼ í•˜ë‚˜í•˜ë‚˜ ì¡°ì‘í•˜ê³  ìˆë˜ ë¶€ë¶„ë“¤ì„ `ì¶”ìƒí™”` í•´ì¤€ë‹¤. ì•¡ì…˜ íƒ€ì…í•˜ë‚˜ë§Œ í˜¸ì¶œì„ í•´ì£¼ë©´ ê·¸ ì•ˆì— ë‚´ë¶€ ë¡œì§ì´ ëª¨ë‘ ì¶”ìƒí™” ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ë¬¸ì—ì„œëŠ” ì´ ë¶€ë¶„ ë‚´ë¶€ì— ë¬´ì—‡ì´ ìˆëŠ”ì§€ ëª°ë¼ë„ `action.type` ë§Œë³´ê³ ë„ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤.

### ğŸ“Œ ì •ë¦¬

> âœ… ìƒíƒœë¥¼ ì •ë§ ìˆ¨ê²¨ë²„ë¦´ ìˆ˜ ìˆëŠ” `ì¶”ìƒì  / ì„ ì–¸ì ` ì¸ ë¬¸ë²•ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆê³ , ë” ë³µì¡í•œ ìƒíƒœë“¤ì´ ì˜¤ê°ˆ ë•Œ ìƒíƒœë¥¼ `reducer` ì— ì²´ê³„í™”í•´ì„œ êµ¬ì¡°ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
