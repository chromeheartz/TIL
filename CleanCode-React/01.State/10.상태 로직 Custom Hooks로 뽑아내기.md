## State

### 10. ìƒíƒœ ë¡œì§ Custom Hooksë¡œ ë½‘ì•„ë‚´ê¸°

---

```jsx
// ìƒíƒœ ë¡œì§ Custom Hooksë¡œ ë½‘ì•„ë‚´ê¸°
// âŒ
const [state, setState] = useState();

useEffect(() => {
  const fetchData = () => {
    setState(data);
  };
  fetchData();
}, []);

if (state.isLoading) return <LoadingComponent />;
if (state.isFail) return <FailComponent />;

// âœ… â¬‡ï¸
const { isLoading, isFail } = useFetchData();
if (isLoading) return <LoadingComponent />;
if (isFail) return <FailComponent />;
```

`ìƒíƒœ` ë¥¼ ê·¸ë™ì•ˆ ì—¬ëŸ¬ë²ˆ ë°”ê¾¸ì–´ ë³´ì•˜ëŠ”ë°, `loading, error, success` ì»´í¬ë„ŒíŠ¸ëŠ” ì•Œê² ëŠ”ë° `fetchData, state ë¡œì§` ì„ í™•ì¥ì„± ìˆê²Œ ì¬í™œìš©í•´ë³¼ ê²ƒì´ë‹¤.

```jsx
const [state, dispatch] = useReducer(reducer, INIT_STATE);

const fecthData = () => {
  // fetch Data ì‹œë„
  dispatch({ type: "FETCH_LOADING" });

  fetch(url)
    .then(() => {
      // fetch Data ì„±ê³µ
      dispatch({ type: "FETCH_SUCCESS" });
    })
    .catch(() => {
      // fetch Data ì‹¤íŒ¨
      dispatch({ type: "FETCH_FAIL" });
    });
};
```

ì´ ë¶€ë¶„ì„ ë“œëŸ¬ë‚´ì„œ ì¬í™œìš©ì„ í•œë‹¤ëŠ” ê´€ì ìœ¼ë¡œ ë³´ë©´ ëœë‹¤. `ë¡œì§ì— ê´€ë ¨ëœ ë¶€ë¶„` ë§Œ ë¹¼ëŠ” í›ˆë ¨ì´ ì§€ì†ì ìœ¼ë¡œ í•„ìš”í•˜ë‹¤

`Custom Hooks` ë¡œ ë¹¼ì„œ ì‚¬ìš©í• ê²ƒì¸ë° `use Prefix` ë¥¼ ì§€í‚¤ë©´ ëœë‹¤.

```jsx
const useFetchData = (url) => {
  const [state, dispatch] = useReducer(reducer, INIT_STATE);

  useEffect(() => {
    const fecthData = async () => {
      // fetch Data ì‹œë„
      dispatch({ type: "FETCH_LOADING" });

      await fetch(url)
        .then(() => {
          // fetch Data ì„±ê³µ
          dispatch({ type: "FETCH_SUCCESS" });
        })
        .catch(() => {
          // fetch Data ì‹¤íŒ¨
          dispatch({ type: "FETCH_FAIL" });
        });
    };
  }, [url]);

  return state;
};

const CustomHooks = () => {
  const { isLoading, isFail, isSuccess } = useFetchData("url");

  if (isLoading) return <LoadingComponent />;
  if (isFail) return <ErrorComponent />;
  if (isSuccess) return <SuccessComponent />;
};
```

ì‚¬ìš©í•˜ë ¤ê³  í–ˆë˜ `ë¡œì§` ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ ì¶”ìƒí™”ë¥¼ í• ê²ƒì´ë‹¤. ì¼ë‹¨ `state` ë¥¼ ë°˜í™˜ì‹œì¼œì£¼ê³  (ê°ì²´ë¡œ ì‚¬ìš©ë  ìƒíƒœ) í•¨ìˆ˜ë¥¼ `trigger` í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ë§Œë“¤ì–´ì£¼ê¸° ìœ„í•´ `useEffect` ë¥¼ ì‚¬ìš©í•œë‹¤.

ì´ ë‚´ë¶€ì—ì„œëŠ” ë¹„ë™ê¸°ë¥¼ íŠ¹ë³„í•˜ê²Œ ì‚¬ìš©í•´ì•¼í•œë‹¤ `async / await`. ê·¸ë¦¬ê³  URLì˜ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆëŠ” ë¡œì§ì´ê¸° ë•Œë¬¸ì— `dependencies` ì— `url` ì¶”ê°€.

ì •ë¦¬í•˜ë©´ `ë Œë”ë§ ë¶€ë¶„ì´ ì•„ë‹Œ ë¶€ë¶„` ì„ `ì¶”ìƒí™”` í•˜ì˜€ê³ , ë‚´ê°€ ì‘ì„±í•˜ëŠ” ì½”ë“œë“¤ì— ëŒ€í•´ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë˜ì—ˆë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ `useState` ë¡œë¶€í„° ì‹œì‘í•œ ë¡œì§ì´ `Custom Hooks` ë¡œ ë˜ë©° í™•ì¥í•  ìˆ˜ ìˆê³  ë‹¤ë³€í™” í•  ìˆ˜ ìˆë‹¤.

### ğŸ“Œ ì •ë¦¬

> âœ… `Custom Hooks` ë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ í™•ì¥ì„± ìˆê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. `use Prefix` ëŠ” ìŠì§€ ë§ê¸°
