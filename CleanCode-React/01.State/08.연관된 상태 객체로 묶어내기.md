## State

### 08. ì—°ê´€ëœ ìƒíƒœ ê°ì²´ë¡œ ë¬¶ì–´ë‚´ê¸°

---

```jsx
// ì—°ê´€ëœ ìƒíƒœ ê°ì²´ë¡œ ë¬¶ì–´ë‚´ê¸°
// âŒ
const [isLoading, setIsLoading] = useState(false);
const [isFinish, setIsFinish] = useState(false);

// âœ… â¬‡ï¸
const [promiseState, setPromiseState] = useState({
  isLoading: false,
  isFinish: false,
});
```

ì´ì „ì—ëŠ” ì—°ê´€ëœ ìƒíƒœë¥¼ ì´ì–´ì£¼ê¸° ìœ„í•´ì„œ `ì—´ê±°í˜• ìŠ¤íƒ€ì¼ì˜ ë¬¸ìì—´` ì„ ì‚¬ìš©í•˜ì˜€ì§€ë§Œ ì´ë²ˆì—ëŠ” `ê°ì²´` ë¡œ ë¬¶ì–´ë‚´ë³¼ê²ƒ.

```jsx
const ObjectState = () => {
  const [isLoading, setIsLoading] = useState(false);
  const [isFinish, setIsFinish] = useState(false);
  const [isError, setIsError] = useState(false);

  const fetchData = () => {
    // fetch Data ì‹œë„
    setIsLoading(true);

    fetch(url)
      .then(() => {
        // fetch Data ì„±ê³µ
        setIsLoading(false);
        setIsFinish(true);
      })
      .catch(() => {
        // fetch Data ì‹¤íŒ¨
        setIsError(true);
      });
  };

  if (isLoading) return <LoadingComponent />;
  if (isError) return <ErrorComponent />;
  if (isFinish) return <SuccessComponent />;
};

export default ObjectState;
```

ì´ì „ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `ì„¸ ê°œì˜ ìƒíƒœ` ëŠ” ëª¨ë‘ ì—°ê´€ì´ ìˆë‹¤. `isLoading` ì´ `true` ì¸ê²½ìš° ë‚˜ë¨¸ì§€ 2ê°€ì§€ ìƒíƒœëŠ” `false` ì—¬ì•¼í•œë‹¤. ë‚˜ë¨¸ì§€ë„ ë§ˆì°¬ê°€ì§€.

ì¦‰, í•œê°€ì§€ ìƒíƒœê°€ ë°”ë€Œê²Œ ë˜ë©´ ë‚˜ë¨¸ì§€ ìƒíƒœë„ ê³„ì† ë™ê¸°í™”ë¥¼ í•´ì£¼ì–´ì•¼ í•˜ëŠ” ìƒíƒœì´ë‹¤.

```jsx
const ObjectState = () => {
  const [fetchState, setFetchState] = useState({
    isLoading: false,
    isFinish: false,
    isError: false,
  });

  const fetchData = () => {
    // fetch Data ì‹œë„
    setFetchState({
      isLoading: true,
      isFinish: false,
      isError: false,
    });

    fetch(url)
      .then(() => {
        // fetch Data ì„±ê³µ
        setFetchState({
          isLoading: false,
          isFinish: true,
          isError: false,
        });
      })
      .catch(() => {
        // fetch Data ì‹¤íŒ¨
        setFetchState({
          isLoading: false,
          isFinish: false,
          isError: true,
        });
      });
  };

  if (fetchState.isLoading) return <LoadingComponent />;
  if (fetchState.isError) return <ErrorComponent />;
  if (fetchState.isFinish) return <SuccessComponent />;
};
```

ì¼ë‹¨ `ê°ì²´` í•˜ë‚˜ë¡œ ë¬¶ì–´ë‚´ì£¼ì–´ í•˜ë‚˜ì˜ `state` ë¡œë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì´í›„ ê°ê° ìƒíƒœë¥¼ ë™ê¸°í™”í•˜ëŠ” ë¶€ë¶„ë„ í•„ìš”í•œ ê²ƒë§Œ `true` ë¡œ ë°”ê¾¸ì–´ì£¼ê²Œ ì‘ì—…ì„ í–ˆë‹¤.
í•˜ì§€ë§Œ ì—¬ê¸°ì„œ `ì¤‘ë³µ` ë˜ëŠ” ë¶€ë¶„ì´ ë³´ì¸ë‹¤.

`callback` ìœ¼ë¡œ `prev` ì„ ì‚¬ìš©í•´ì„œ ì´ì „ê°’ì„ ê°€ì ¸ì™€ì„œ ì¤‘ë³µì„ ì¡°ê¸ˆ ì¤„ì´ì.

```jsx
const fetchData = () => {
  // fetch Data ì‹œë„
  setFetchState((prevState) => ({
    ...prevState,
    isLoading: true,
  }));

  fetch(url)
    .then(() => {
      setFetchState((prevState) => ({
        ...prevState,
        isLoading: false,
        isFinish: true,
      }));
    })
    .catch(() => {
      // fetch Data ì‹¤íŒ¨
      setFetchState((prevState) => ({
        ...prevState,
        isFinish: false,
        isError: true,
      }));
    });
};
```

ì´ë ‡ê²Œí•˜ë©´ `í•œ ê°€ì§€ ìƒíƒœ` ë¡œë§Œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ëª…ì‹œì ì´ê³  ì–´ë–»ê²Œ ë³´ë©´ ì„ ì–¸í˜• ìŠ¤íƒ€ì¼ì´ ë¬»ì–´ë‚œë‹¤. íŠ¹íˆ ì´ ê°ì²´ë§Œ ì¡°ì‘í•˜ë©´ ë‚˜ë¨¸ì§€ ì—°ê´€ëœ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œë„ í¸í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

#### â­ï¸ ë¬´ì–¸ê°€ ìƒíƒœë¥¼ ë§Œë“¤ ë•Œ ê¼­ 1ëŒ€1 ê´€ê³„ë¡œ ë§Œë“¤ í•„ìš”ëŠ” ì—†ë‹¤. `N:1`ë¡œ í‘œí˜„í•´ë„ ëœë‹¤.

### ğŸ“Œ ì •ë¦¬

> âœ… `ë¬´ì˜ë¯¸í•œ state` ë¥¼ ì¤„ì´ì. ë˜í•œ ìƒíƒœë¥¼ ë§Œë“¤ë•Œ ê¼­ `1:1` ì¼ í•„ìš”ëŠ” ì—†ìœ¼ë©° í•˜ë‚˜ì˜ ìƒíƒœê°€ ë°”ë€” ë•Œ ë‹¤ë¥¸ ìƒíƒœì— ì˜í–¥ì„ ì£¼ëŠ” ì½”ë“œë¼ë©´ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
