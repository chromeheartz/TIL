## Node Basic

### 03. Node의 라이프사이클 및 이벤트 루프

---

### 📌 Node의 라이프사이클 및 이벤트 루프

![](https://velog.velcdn.com/images/chromeheartz/post/44e9e7be-40ac-4fed-9e52-074b13f6a4d4/image.png)

`node app.js` 파일을 실행하면 스크립트가 시작되어 `Node.js` 가 파일 전체를 살펴보고 코드를 분석한 후 변수 / 함수를 등록한다. 다시 말해 전체 코드를 읽고 실행을 시작한것이다.
중요한 것은 그 후에 프로그램을 `끄지 않았다는 것` 이다.

`Node.js` 에서 중요한 개념인 `이벤트 루프` 때문인데, `Node.js` 가 관리하는 이벤트 루프는 작업이 남아있는 한 계속해서 작동하는 `루프 프로세스` 로 입네트 리스너가 있는 한 계속 작동한다.
등록 후 제거하지 않았던 이벤트 리스너로 `createServer` 로 만든 들어오는 요청 리스너가 있었다. `createServer` 에 계속되는 이벤트 리스너라는 함수를 넣어서 만든 이벤트 리스너를 제거하지 않았으며 서버가 계속 운영되기 위해 제거하지 않아야 한다.

코어 노드 애플리케이션은 이벤트 루프에 의해 관리되고 사실상 모든 코드를 관리한다.
예를 들어 데이터베이스에 접근할 때도 데이터 요청을 넣으라는 메시지를 보내고 실행해야 하는 함수를 등록하게 된다. `Node.js` 가 이 패턴을 사용하는 이유는 `단일 스레드 Javscript` 를 실행하기 때문이다.

> ✅ 즉, 실행 중인 컴퓨터에서 전체 노드 프로세스가 하나의 스레드를 사용한다는 뜻이다.

Node.js를 통해 서버를 생성하고 수 천, 수 만개의 들어오는 요청을 다룰 수 있을거라 예상하는데, 만약 한 요청이 들어올 때마다 멈추고 실행하기를 반복하면 별로 좋지 않을 것이다.
따라서 이벤트 루프라는 개념을 통해 계속해서 작동되면서 이벤트가 일어나면 코드를 실행하도록 해놓게 되면 언제든 사용 가능하다.

두 개의 이벤트를 처리해야 할 때 우려가 생길 수 있지만, 사실 요청을 처리하는 것은 아주 빠르고 배후에서는 운영 체제의 영향력에 따라 약간의 `다중 스레드` 를 사용한다.

이렇듯 루프는 꼭 기억해야할 개념이며 `listener` 가 있거나 `createServer` 가 계속해서 리스너를 생성하는 한 Node.js의 루프가 계속 된다.
언젠가 제거해야 한다면 `process.exit()` 를 사용한다.
