## Workflow & Debugging

### 05. 다양한 오류 유형 이해 및 찾기 / 수정

---

### 📌 다양한 오류 유형

![](https://velog.velcdn.com/images/chromeheartz/post/35ec6544-9f61-42b3-9e73-dfca08b381db/image.png)

오류 수정을 살펴보자.
코드에서 오류를 찾아 고치는 방법을 숙지해야 하는데 왜냐하면 오류는 항상 존재하기 때문이다. 완벽하게 작동하는 프로그램을 만들어낸다는것은 불가능하다.

이를 위해 다양한 종류의 오류를 이해함으로써 각각을 어떻게 처리하는지를 알아보아야 한다.

첫 번째 오류 유형은 `구문 오류(Syntax Errors)` 이다.
코드에 오타가 났다거나 중괄호를 빼먹는 등의 오류가 여기에 해당하며 프로젝트를 실행하려고 할 때 자동으로 오류가 등장하게 된다.

두 번째 오류 유형은 `런타임 오류(Runtime Errors)` 이다.
이 오류는 오타는 아니지만 코드를 실행하려고 할 때 멈춰버리는 상황이다.

세 번째는 `논리적 오류(Logical Errors)` 이다.
이 유형의 오류는 가장 해결하기 어려운데, 오류 메세지가 뜨지 않고 앱이 원하는대로 작동하지 않는데다 찾아내기도 힘들다.
하지만 모듈을 통해 오류를 해결하는데 도움을 제공할 툴도 있다.

#### 📍구문 오류

우선 `const server` 에서 `cons` 로 바꾸고 시작해보면

![](https://velog.velcdn.com/images/chromeheartz/post/d56e60f5-a9a7-4a9e-8f68-79767f7aad8d/image.png)

`t` 가 빠졌다고 오류에서 바로 알려주게 된다.
만약 중괄호를 빼게 되면 이번에도 오류를 감지해 `IDE` 에서 빨간줄로 보여주게 된다.
이런 구문오류의 경우에는 IDE의 도움을 이용해 에러 메시지에 나온 대로 파일을 점검하고 어떤 글자를 누락했거나 중괄호를 하나 더 붙였거나 하는 오류를 파악해서 고칠 수 있다.

구문 오류에는 반드시 오류 메시지가 나타난다.

#### 📍런타임 오류

런타임 오류는 `res.write` 메소드를 통해 잘 보여진다.
`routes.js` 를 확인해보자. 기존에 `res.end()` 가 `if` 문에 있을때 `return` 을 붙여서 다음 코드가 실행되지 않도록 했다.

이 `return` 을 지우면 구문 오류는 나지 않지만 `웹 페이지 / 터미널` 에서 오류가 나고 있다.

![](https://velog.velcdn.com/images/chromeheartz/post/0a675082-6472-4f7b-b196-71830eb776e3/image.png)

오류 메세지가 나오면 읽어보아야 한다. 보통 읽는법만 알면 해결할 수 있다.
예를 들어 현재 에러코드는 `발송된 헤더` 에 문제가 있다고 나오고, 좀 더 세부적인 내용으로 `헤더가 클라이언트에 발송된 이후에는 설정할 수 없다` 라고 나온다.
또 `setHeader` 를 호출해서 오류가 발생했으며 `requestHandler` 에 위치하는 40번째 줄에 있다고도 말해준다.

#### 📍논리 오류

논리 오류는 오류 메시지를 보여주지 않기 때문에 가장 고치기 까다로운 오류이며 원하는 대로 앱이 작동되지 않을것이다.
`routes.js` 파일을 보게 되면 메시지를 받고 있다.

```js
return req.on("end", () => {
  const parsedBody = Buffer.concat(body).toString();
  console.log(parsedBody); // message=4444
  const message = parsedBody.split("=")[1];
  fs.writeFile("message.txt", message, (err) => {
    res.writeHead(302, {
      Location: "/",
    });
    //   res.statusCode = 302;
    //   res.setHeader('Location', '/');
    return res.end();
  });
});
```

여기서 첫 번째 요소가 메세지에 저장되어 있고, 이전에 있던 두 번째 요소가 사용자가 입력한 메시지라고 가정을 해보자. 키-값 쌍을 split하기 때문에 `[0]` 으로 바꾸면 `message` 가 들어올 것이다 (message=4444) 이런 형태이기 때문.

이런 논리 오류는 발견하기 쉽지 않다. 여기서 `Vs Code` 와 잘 융화되는 `Node.js` 의 `Debugger` 가 있다.

#### 디버거의 원리

디버거의 원리를 알아보자.
![](https://velog.velcdn.com/images/chromeheartz/post/d99c301f-45ad-41e0-808b-71b41e50f685/image.png)
Run Debugger로 실행할 수 있다. 중단점에 하이라이트를 선택할 수도 있고, 변수 위에 마우스를 가져다 대서 무엇이 들어있는지도 알 수 있다.

더 알고싶은 경우 창을 확장해서 세부사항도 볼 수 있는데 `View - Debug` 를 누르면 특별한 디버그 모드가 실행되서 코드 중에 중요한 변수를 보여주기도 한다.

논리적 오류는 발견하기 어려우니 코드를 차근차근 뜯어보면서 어느 부분에서 오류가 나는지 알아보아야 한다.
