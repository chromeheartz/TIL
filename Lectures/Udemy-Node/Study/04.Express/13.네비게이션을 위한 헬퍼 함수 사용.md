## Express.js

### 13. 네비게이션을 위한 헬퍼 함수 사용

---

### 📌 힌트

```js
module.exports = path.dirname(process.mainModule.filename);
```

여기서 `deprecation warning` 이 나타나는 것을 유의해야한다. 해당 오류가 나타나면, `require` 를 사용하는 코드로 바꾸어주어야 함.

```js
module.exports = path.dirname(require.main.filename);
```

### 📌 헬퍼 함수 사용

`shop.js / admin.js` 에서 루트폴더로 이동하는 방법에 대해 짚고 넘어가자
sendFile을 사용할때 `../` 대신에 `..` 를 사용할 수도 있다.
경로를 설정할 때 구분자가 무엇인지를 가정하지 않기 때문에 선호되는 방식이긴 하다.
그러나 이를 구현할 수 있는 더 좋은 방법이 있다. `helper 함수` 를 구현해서 상위 디렉토리를 얻을 수 있다. `uils/path.js` 파일을 만들어보자.

이것이 전역 모듈과 충돌한다 해도 상관없다. 어차피 다른 방식으로 임포트 할것이기 때문.
`module.exports = path.dirname(process.mainModule.filename);`
상위 디렉토리로 가는 경로를 구축하는데 도움을 주는 함수를 하나 내보내고자 한다.
`dirname` 으로 경로의 디렉토리 이름을 회신하고, `전역 프로세스 변수` 를 사용하면 되는데 이 또한 모든 파일에 사용 가능한 변수로 임포트 할 필요가 없다.

#### mainModule

`mainModule` 속성이 들어가는데, 이는 애플리케이션을 시작한 주요 모듈을 나타낸다. `app.js` 에서 만든 모듈을 나타내는것. filename을 호출해서 이 모듈이 어떤 파일에서 시작되는지 알아낼 수 있다.
다른말로 하면 `process.mainModule.filename` 해당 코드는 우리 애플리케이션이 실행될 수 있도록 해주는 파일의 경로를 알려주는 것이다.

따라서 해당 파일의 경로를 `dirname` 에 입력해서 디렉토리의 경로를 알아낼 수 있다.
이렇게 해놓으면 admin.js에서 `const rootDir = require('../utils/path');` 이렇게 가져온 것을 `res.sendFile(path.join(rootDir, "views", "add-product.html"));` 이런식으로 사용할 수 있게 되는 것이다.

> ✅ 결국 `루트 디렉토리 경로` 를 구축하는 깔끔한 방법을 사용한 셈이다.
