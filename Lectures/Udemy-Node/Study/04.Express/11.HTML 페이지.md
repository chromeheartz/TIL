## Express.js

### 11. HTML 페이지

---

### 📌 HTML 페이지 생성

라우팅이 작동하는 방식 / 필터링하는 방법을 알아보았는데, 이제 실제로 사용자에게 제공할 내용을 만들어보자.
현재까지는 `<h1>hello</h1>` 같이 더미 html만 만들어 보았는데, `html` 파일을 사용자에게 회신하도록 해보자

`views` 라는 폴더를 만들어서 html을 만들어주자.
폴더 이름을 마음대로 해도 되지만 `MVC` 패턴 구조로 가기 위해 조금 더 직관적으로 폴더를 만드는것이 좋다.

`shop.html / add-product.html` 을 각각 만들어준다.

```html
<!-- shop.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Add Product</title>
  </head>

  <body>
    <header>
      <nav>
        <ul>
          <li><a href="/">Shop</a></li>
          <li><a href="/admin/add-product">Add Product</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <h1>My Products</h1>
      <p>List of all the products...</p>
    </main>
  </body>
</html>

<!-- add-product.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Add Product</title>
  </head>

  <body>
    <header>
      <nav>
        <ul>
          <li><a href="/">Shop</a></li>
          <li><a href="/admin/add-product">Add Product</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <form action="/add-product" method="POST">
        <input type="text" name="title" />
        <button type="submit">Add Product</button>
      </form>
    </main>
  </body>
</html>
```

템플릿 엔진의 개념을 알고 있다면 이 둘을 사용해 이후에 `html` 파일에 `동적으로 컨텐츠` 를 추가할 것이다.

### 📌 HTML 페이지 서비스하기

`shop.html` 을 어떻게 라우트에서 서비스 할 수 있을까?
기존에 텍스트를 보내는 곳에서 `파일` 을 전송하면 된다.

#### sendFile

`sendFile` 을 사용하면 사용자에게 파일을 회신할 수 있으며, 콘텐츠 유형을 자동으로 `응답 헤더` 로 설정하게 된다.
경로를 `app.js` 의관점에서 본다고 가정하면 된다. `/views/shop.html`

`res.sendFile("/views/shop.html");` 이렇게 하면 경로가 올바르지 않다고 나온다.
`./` 를 넣어도 `절대 경로` 여야 한다는 오류가 나온다.

이런 `/` 는 사실 이 프로젝트 폴더가 아니라 `운영 체제의 루트 폴더` 를 나타낸다.
따라서 이 디렉토리 파일의 경로를 구축하려면 `Node.js` 가 제공하는 또 하나의 코어 모듈인 `path` 를 사용해야 한다.

path의 `join` 메소드를 호출함으로써 생성한 경로로 파일을 보낸다. `join` 은 마지막에 경로를 출력하기때문에 세그먼트를 이어 붙여서 경로를 구축한다

#### 첫 번째 세그먼트

Node.js에서 제공하는 전역 변수인 `dirname` 이 있다. `__` 두개의 밑줄 표시를 넣어주어야 하는데, 이는 내 운영 체제의 절대 경로를 이 프로젝트 폴더로 고정해주는 전역 변수이다.

#### 두 번째 세그먼트

다음 세그먼트는 들어가고자 하는 `views` 폴더이다.

#### 세 번째 세그먼트

세번째 세그먼트는 `파일` 이다. 여기에 `shop.html` 을 넣어주면 된다.
중요한 점은 여기에 `/` 를 사용하지 않는다는 점이다. `path.join` 을 사용하는 것은 절대 경로 떄문이 아니라, 자동으로 리눅스 / 윈도우 시스템 모두에서 작동하는 방식으로 경로를 생성해주기 때문이다.

> ✅ 쉽게 말하면 `리눅스 시스템` 에는 `/` 를 사용하는데 윈도우에서는 경로에 `|` 백슬래시를 사용하기 때문에 수동으로 구축하면 윈도우에서는 작동하지 않으며 그 반대도 마찬가지이다.

사실 `dirname` 은 `routes` 폴더를 가리킨다.
자신이 사용된 파일의 경로를 나타내기 때문에 `../` 라는 세그먼트를 2번째에 추가해주어서 한단계 올라가게 해주면 된다.

```js
router.get("/", (req, res, next) => {
  res.sendFile(path.join(__dirname, "../", "views", "shop.html"));
});
```

이제 `/add-product` 즉, `admin.js` 파일도 수정해주자.

```js
router.get("/add-product", (req, res, next) => {
  res.sendFile(path.join(__dirname, "../", "views", "add-product.html"));
});
```

이렇게 하면 `경로 필터링` 때 했었던 것때문에 `http://localhost:3000/admin/add-product`
해당 링크로 확인할 수 있다.
