## Docker Image & Container

### 14. 중지된 컨테이너 자동 제거하기

---

### 📌 중지된 컨테이너 자동 제거하기

`docker run --help` 를 사용해서 무엇이 있나 봐보자.
컨테이너를 실행할 때 구성할 수 있는 항목이 아주 많은데, 사실 이 옵션의 대다수가 별로 중요하지 않다. 필요하다면 찾아서 쓰게 될것이니 지금 당장에 안쓰는 옵션들이 많을것이다.

여기서 중요한 플래그가 하나 있다

#### -rm

이것은 컨테이너가 종료될 때 자동으로 제거되는 플래그이다.
매번 중지된 모든 컨테이너를 수동으로 정리하지 않아도 된다. 대신 이 컨테이너가 중지될 때마다 자동으로 제거되도록 하기 위해 run 명령에 추가해서 쓰면 된다.
`docker run -p 4000:80 -d --rm 0aa8d6c86771`

외부 포트로 퍼블리싱 해주기 위해 `-p` 를 사용하고 `-d` 로 detached 모드, --rm을 추가하여 컨테이너가 중지될때마다 항상 제거되게 해보자.
![](https://velog.velcdn.com/images/chromeheartz/post/9b70ce4d-0810-4fbd-8281-dfdd15baac28/image.png)

컨테이너를 중지하고 나서 `docker ps -a` 를 실행해보면 컨테이너가 표시되지 않는다.
`--rm` 플래그로 중지되었을때 자동으로 컨테이너를 제거하게 했기 때문이다.

이 플래그를 사용하는 것은 드문일이 아니다. 컨테이너에 노드 서버와 같은 것이 포함된 경우 코드가 변경된 경우에만 컨테이너를 중지하는 경우가 많으며 이는 이미지를 다시 빌드해야 함을 의미한다.

그러므로 어쨌든 새 컨테이너를 시작해야 한다. 따라서 종료된 경우 시작된 컨테이너를 제거하는 것이 타당한 시나리오가 될 것이다.
