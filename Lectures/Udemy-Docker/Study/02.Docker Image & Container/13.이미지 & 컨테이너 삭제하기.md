## Docker Image & Container

### 13. 이미지 & 컨테이너 삭제하기

---

### 📌 이미지 & 컨테이너 삭제하기

더이상 필요하지 않은 이미지와 컨테이너를 관리하는 방법을 알아보자.
실행 중인 컨테이너를 출력해보면 `python` 이미지로 만든 컨테이너가 돌아가고 있는데, 이렇게 실행 중인 목록은 많을 수록 더 길어질 수 밖에 없다.
따라서 때때로 이 목록을 정리하고 더 이상 필요하지 않은 컨테이너를 제거하는 것이 합리적이다.

#### rm

> ✅ `docker rm` 명령으로 이 작업을 수행할 수 있다.

![](https://velog.velcdn.com/images/chromeheartz/post/faea65e0-faeb-4da3-a48c-712605f75032/image.png)

하지만 실행중인 컨테이너를 제거할 수 없다고 나오기 때문에 일단 실행을 중지 하는게 우선이다.

```docker
docker stop [CONTAINER_ID]
docker rm [CONTAINER_ID]
```

이렇게 한 후에 `docker ps -a` 리스트로 전체 리스트를 보게되면 해당 컨테이너가 제거된것을 볼 수 있다. 또한 `docker rm [CONTAINER_ID] [CONTAINER_ID]` 이런식으로 멀티플하게도 제거할 수 있다.

![](https://velog.velcdn.com/images/chromeheartz/post/56e9286d-8dd3-408c-add9-7b5ed21124e6/image.png)

이런식으로 하나하나 다 지우는 방법은 번거로울 수 있다. 더 이상 필요하지 않은 경우 컨테이너가 `자동으로 제거` 하는 방법 또한있다.

그 전에 이미지와 이미지를 관리하는 방법을 살펴보자.
도커에서 `ps` 명령은 컨테이너를 `listing` 한다. `images` 명령은 이미지를 리스팅하고.

`docker images` 를 사용하면 가지고 있는 모든 이미지가 표시된다.
하드 드라이브에서 해당 이미지가 차지하는 크기도 볼 수 있는데, 크기는 기본적으로 해당 이미지의 것에서 시작하여 종속성, 소스 코드로 인해 크기가 다를 수 있다.

어쨌거나 노드 이미지에서 또 다른 이미지로 구축되었는데, 그것은 기본적으로 노드 이미지가 위치한 `linux` 운영 체제 레이어이다. 요약하자면, 해당 크기는 노드와 노드 실행 툴만 할당된 것이 아니라 노드 이미지 빌드에 툴 / 운영체제 이미지가 추가된것이다.

#### rmi

이미지 제거는 `rmi` 명령어로 사용할 수 있다.
![](https://velog.velcdn.com/images/chromeheartz/post/75b71703-28b2-4467-8271-edec4840ccb3/image.png)

이미지 제거에 대한 한 가지 중요한 참고 사항은 이미지가 `더 이상 컨테이너에서 사용되지 않고 중지된 컨테이너에 포함된 경우` 에만 이미지를 제거할 수 있다.
중지된 컨테이너가 있는 경우 그 컨테이너에서 사용중인 이미지를 제거할 수 없다.
즉, `컨테이너를 먼저 제거` 해야 한다.

> 사용하지 않는 모든 이미지를 제거하기 위해서는 `docker image prune` 으로 사용되지 않는 이미지를 다 제거할 수 있다.
