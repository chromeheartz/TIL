## Docker Image & Container

### 12. ì¸í„°ë ‰í‹°ë¸Œ ëª¨ë“œë¡œ ë“¤ì–´ê°€ê¸°

---

### ğŸ“Œ ì¸í„°ë ‰í‹°ë¸Œëª¨ë“œ

ì‹¤ì œë¡œ ì›¹ ê°œë°œ ë° ì›¹ ì„œë²„ ì‹¤í–‰ê³¼ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ ë“±ì„ ì²˜ë¦¬í•˜ëŠ” ë“± nodejsì•±ìœ¼ë¡œ ë§ì€ê²ƒì„ ë³´ì•˜ë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ NodeJS, PHP, Pythonì„ ì‚¬ìš©í•˜ë˜ ë„ì»¤ë¡œëŠ” ë‹¤ ê°€ëŠ¥í•˜ë‹¤.
ì˜ˆë¡œ `python` ì„ í™œìš©í•´ë³´ì.

```python
from random import randint

min_number = int(input('Please enter the min number: '))
max_number = int(input('Please enter the max number: '))

if (max_number < min_number):
  print('Invalid input - shutting down...')
else:
  rnd_number = randint(min_number, max_number)
  print(rnd_number)
```

ê°„ë‹¨í•œ íŒŒì´ì¬ íŒŒì¼ìœ¼ë¡œ ê°’ì„ ì¶œë ¥í•˜ê²Œ ë§Œë“¤ì–´ë³´ì.
ì´ì œ ì‹œìŠ¤í…œì— pythonì„ ì„¤ì¹˜í•˜ì—¬ ì´ê²ƒì„ ì‹¤í–‰í•˜ê±°ë‚˜ ë„ì»¤ ì´ë¯¸ì§€ / ì»¨í…Œì´ë„ˆì— ë„£ì„ ìˆ˜ ìˆë‹¤.

ì´ ì•±ì€ ì‹¤ì œë¡œ ì‚¬ìš©ìê°€ ì•±ê³¼ `ìƒí˜¸ ì‘ìš©` í•´ì•¼ í•œë‹¤. ì´ ì˜ˆì œë¥¼ ì‹¤í–‰í•˜ë©´ ì‹¤ì œë¡œëŠ” ì‘ë™í•˜ì§€ ì•Šê² ì§€ë§Œ `Dockerfile` ì„ ì‘ì„±í•´ì„œ ì‹¤í–‰ì‹œì¼œë³´ì.
`python` ì„ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¡œ ì‚¬ìš©í•˜ëŠ” ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê³ ,
ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•œ í›„ì— ì½”ë“œ íŒŒì¼ì„ ë³µì‚¬í•´ì•¼ í•œë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë  ë•Œ ì‹¤í–‰ë˜ì–´ì•¼ í•  ëª…ë ¹ì„ ì¶”ê°€í•œë‹¤. `CMD ["python", "rng.py"]` ë¡œ ë„ì»¤íŒŒì¼ ì„¤ì •ì„ ë§ˆë¬´ë¦¬

```dockerfile
FROM python

WORKDIR /app

COPY . /app

CMD ["python", "rng.py"]
```

`docker build .` ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•´ë³´ì. `IMAGE ID` ë¥¼ ì‚¬ìš©í•˜ì—¬ `docker run` ì„ ì‹¤í–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œëŠ” í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤. ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•„ë‹ˆë¯€ë¡œ.

![](https://velog.velcdn.com/images/chromeheartz/post/02f57386-88b7-4496-8a8a-9358b8dc703e/image.png)

ì‹¤í–‰í•´ë³´ë©´ ì—ëŸ¬ê°€ ë‚˜ê³  `docker run` ì´ë¼ì„œ `attached` ëª¨ë“œì—ì„œ ì‹œì‘ë˜ì§€ë§Œ ì—ëŸ¬ ë©”ì‹œì§€ ì´ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤. docker runì„ ì‚¬ìš©í•˜ë©´ ë””í´íŠ¸ë¡œ ì»¨í…Œì´ë„ˆì— ì—°ê²°ë˜ì–´ ì»¨í…Œì´ë„ˆì— ì˜í•´ ì¶œë ¥ëœ ê²°ê³¼ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë¬´ì—‡ì´ë“  ì…ë ¥í•  ìˆ˜ ìˆë‹¤ëŠ” ê´€ì ì—ì„œ ì—°ê²°ì„ í•œ ê²ƒì€ ì•„ë‹ˆë‹¤.

ì»¨í…Œì´ë„ˆë‚˜ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” ì–´ë–¤ê²ƒë„ ì…ë ¥í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
`--help` ë¥¼ ì—´ì–´ì„œ í™•ì¸í•´ë³´ë©´ ë‘ ê°€ì§€ ì˜µì…˜ì´ ìˆë‹¤
`-i` ì˜µì…˜ì€ `--interactive` ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. í‘œì¤€ ì…ë ¥ì„ ì—´ë¦° ìƒíƒœë¡œ ìœ ì§€í•˜ë©° `attached` ëª¨ë“œê°€ ì•„ë‹Œ ê²½ìš°ì—ë„ ì»¨í…Œì´ë„ˆì— ë¬´ì–¸ê°€ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì´ê²ƒì„ `-t` ì™€ ê²°í•©í•˜ë©´ `pseudo TTY` ê°€ í• ë‹¹ë˜ëŠ”ë°, í„°ë¯¸ë„ì„ ìƒì„±í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

ë”°ë¼ì„œ `-it` ë¼ëŠ” í•˜ë‚˜ì˜ í”Œë˜ê·¸ë¡œ ê²°í•©í•´ì„œ ì»¨í…Œì´ë„ˆëŠ” ì…ë ¥ì„ ìˆ˜ì‹ í•˜ê³ , ì»¨í…Œì´ë„ˆì— ì˜í•´ ìˆ˜ì‹ ì„ ë…¸ì¶œë˜ëŠ” í„°ë¯¸ë„ë„ ì–»ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ì»¨í…Œì´ë„ˆëŠ” ì‹¤ì œë¡œ ì…ë ¥ì„ ë°›ëŠ” ì¥ì¹˜ê°€ ë˜ëŠ”ê²ƒ.

![](https://velog.velcdn.com/images/chromeheartz/post/72481486-4740-42c9-8674-4ea5990f7be5/image.png)

ì»¨í…Œì´ë„ˆë¥¼ ë©ˆì¶”ê³  `docker start` ë¥¼ í•´ë³´ê²Œ ë˜ë©´ ë””í´íŠ¸ë¡œ `detached` ëª¨ë“œì´ê¸°ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆì™€ í†µì‹ í•  ìˆ˜ ì—†ë‹¤.

`docker start -a` ë¡œ aë¥¼ ì¶”ê°€í•´ì„œ attachedëª¨ë“œë¥¼ ì…ë ¥ì‹œì¼œì£¼ëŠ”ê²ƒìœ¼ë¡œ í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì‘ë™í•œ í›„ì—ëŠ” í•œë²ˆë§Œ ì…ë ¥í•  ìˆ˜ ë°–ì— ì—†ë‹¤.

![](https://velog.velcdn.com/images/chromeheartz/post/aa2a7c96-3aa5-482b-8fb8-2bcb80122da2/image.png)

`-i` ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆì— ë¬´ì–¸ê°€ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì.

`docker start -a -i [CONTAINER_ID]`

ì´ì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì²˜ëŸ¼ ì¶œë ¥ ê²°ê³¼ë¥¼ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ ì—°ê²°í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì…ë ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì—°ê²°í•˜ëŠ” ì´ìœ ëŠ” ë„ì»¤ê°€ ì›¹ ì„œë²„ / ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°™ì€ ì¥ê¸°ì ì¸ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.

ê°„ë‹¨í•œ ìœ í‹¸ë¦¬í‹° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤í™”í•˜ëŠ”ë°ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
