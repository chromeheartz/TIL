## Start

### 03. 가상머신 vs Docker Container

---

### 📌 가상머신 vs Docker Container

#### 왜 도커와 컨테이너일까?

재현 가능한 환경적인 문제는 `가상 머신` 으로 해결할 수 있는것아닐까?
라고 생각할 수 있다. 호스트 운영체제에 독립적인 자체 `shell` 을 지닌 캡슐화된 가상 운영 체제를 지닌 가상머신이 솔루션이 될 수 있지 않을까?

그럴 수 있다. 하지만 가상 머신을 사용한다는 것은 `호스트 운영 체제` 즉, windows / macos / linux가 있고 그 위에 설치한다는 것이다. 말하자면 컴퓨터 내부의 컴퓨터이다.
이 가상머신 내부에는 내부에서 실행되는 자체 운영체제인 `가상 운영 체제` 가 있을것이다.

여기에 원하는 무엇이든 설치할 수 있고, 따라서 프로그램에 필요한 모든 것과 거기에 설치되는 모든 도구가 포함된 캡슐화된 가상 머신이기 때문에 `도커 / 컨테이너` 와 동일한 결과를 얻을 수 있다.

하지만 몇가지 문제가있다.

- 1. `가상 운영체제` 를 지닌 여러 가상 머신에서 발생하는 `오버헤드` 이다. 모든 가상 머신은 실제로 내 머신 위에서 실행되는 `스탠드얼론 컴퓨터` 와 같다. 따라서 이러한 머신이 여러 대 있는 경우에는 매번 새로운 컴퓨터를 머신 내부에 설치해야하고, 메모리, CPU 또한 하드 드라이브의 공간을 낭비하게 된다. 따라서 가상 머신이 시스템에 더 많아진다면 문제가 될것이다.

- 2. 가상 머신에 다른 많은 도구가 설치되어 있을 것이다. `앱` 에 직접적으로 필요하지 않지만 `디폴트` 로 설정되어 있는것이 문제가 될 수 있다.

> 따라서 `가상머신` 을 사용하면, 분리된 환경을 생성하고 그 안에 구성을 가질 수 있고, 모든 것을 안정적으로 공유 / 재생산 할 수 있지만 `중복 복제` 즉, 낭비되는 공간이 발생하게 된다.

#### 그렇다면 컨테이너가 가상머신보다 더 나은 방식으로 문제를 해결하는 방법은 무엇일까?

컨테이너를 사용하면 여전히 `호스트 운영 체제` 가 존재하지만 하나의 머신에 몇대의 머신을 설치하지는 않는다. 그 대신 운영체제가 기본적으로 내재하고 있거나 컨테이너 에뮬레이트를 지원하는 내장 컨테이너를 활용한다.
도커는 이것이 작동되도록 처리하는데, 그 위에 `도커 엔진` 이라는 도구를 실행한다.

뿐만 아니라 설치할 때 도커에 의해 모두 설정된다. 그런 다음 시스템에서 실행되는 도커 엔진을 기반으로 컨테이너를 가동할 수 있다. 도커 엔진은 하나의 도구에 불과하며, 여기에는 하나의 가벼운 소형 도구가 설치되어 있을 뿐이고, 여러개의 컨테이너로 분리할 수 있다.

컨테이너 내부에 작은 운영 체제 레이어가 있을 순 있지만 가상 머신에 설치하는 것보다 훨씬 작은 `가벼운 버전` 일 뿐이다.

#### 가상머신과 컨테이너의 비교

이 둘을 비교해보면 컨테이너 쪽에 몇가지 이점이 있다. 운영체제와 시스템에 미치는 영향이 적고, 매우 빠르다.
최소한의 디스크 공간을 사용하며 이러한 이미지와 구성 파일이 있기 때문에 공유 / 재구축 및 배포하는것이 매우 쉽다. 또, 앱에 필요한 모든 것을 캡슐화한 `앱 / 환경` 을 보유하지만 쓸데없는 부가적인 것이 없다.
