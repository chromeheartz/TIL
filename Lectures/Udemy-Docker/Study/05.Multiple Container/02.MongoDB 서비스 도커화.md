## Multiple Container

### 02. MongoDB 서비스 도커화

---

### 📌 MongoDB 도커화

일단 세 가지 블록중 `mongodb` 데이터베이스부터 시작해보자.
새로운 터미널을 열어서 백엔드 노드 API와 통신하도록하자.

일단 공식 이미지를 다시 사용하기 위해 단순히 `docker run mongo` 를 실행하여 시작할 수 있다.
`Docker Hub` 에 등록된 공식이미지이므로 가능하다.

그리고 이 이미지를 기반으로 컨테이너를 구동하게 하기 위해 `docker run --name mongodb --rm -d mongo` 기존에 네트워크도 추가했었는데, 일단 그건 나중에 하자.

백엔드 / 프론트엔드가 아직 도커화되지 않았기 때문에 여기서 한가지 추가 작업을 수행할것인데, `mongo 이미지` 에서 사용할 수 있는 포트 중 하나를 게시하고자 한다. 백엔드 APi가 도커화되지 않는 한, 노드 API는 연결할 때 데이터베이스와 통신하기 때문에 마치 로컬 호스트 머신에서 실행되는 것처럼.

따라서 이것이 작동하게 하려면 포트 `27017` 을 노출해야 한다. 도커 컨테이너에서 로컬 머신으로.
그것으로 서비스가 로컬 머신을 통해 서비스에 연결할 수 있다. `mongo db` 의 디폴트 포트인 `27017` 을 검색해보게 되면 이미지가 포트를 노출하고 있는 것을 알 수 있다.

따라서 문제 없이 로컬 호스트 머신의 동일한 포트에서 이 포트를 노출할 수 있는 것이다.
`docker run --name mongodb --rm -d -p 27017:27017 mongo` 로 컨테이너를 올리자.

이후에 백엔드에서 `node app.js` 로 서버를 키게되면 성공적으로 연결된다.
