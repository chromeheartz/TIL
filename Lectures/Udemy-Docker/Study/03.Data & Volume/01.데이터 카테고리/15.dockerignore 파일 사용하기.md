## Data & Volume

### 15. dockerignore 파일 사용하기

---

### 📌 dockerignore

프로젝트에 추가할 수 있는 부가적인 구성이 있다.
`COPY` 명령은 현재 Dockerfile이 있는 폴더의 모든 항목을 복사한다.
이전에는 `package.json` 만 작업디렉토리에 복사했지만, `COPY . .` 이 단계에서는 실제로 모든 것을 복사한다.

이것만으로도 모든 것이 작동하지만, 복사되는 내용을 제한할 수도 있다.
`.dockerignore` 파일을 추가하면 된다.
`.gitignore` 와 같은 맥락이라고 생각하면 된다. 커밋되어서는 안되는 것을 알린다면 dockerignore은 `COPY 명령으로 복사해서는 안되는 폴더 / 파일` 을 지정할 수 있다.

`node_modules` 를 추가해보자. 호스트 머신의 프로젝트 폴더에서 `npm install` 을 실행한다면 당연히 해당 폴더가 생기게 되고, 그 폴더가 존재한다면 이미지 내부에 생성된 폴더를 덮어쓰게 된다.
그렇게 되면 로컬에 존재하는 폴더가 오래되었을 수도 있고, 이미지 내부에 추가한 중요한 종속성이 누락될 수도 있다. 또는 최신 버전일지라도 복사 프로세스가 더 오래걸릴 수도 있다.

> 현재 기점으로 node_modules 폴더가 있는 경우 이 폴더는 이미지에 복사되지 않고, 그 대신 `npm install` 로 인해 이미지 내부에 생성된 `node_modules` 를 고수한다.

```
Dockerfile
.git
```

이렇게 `dockerignore` 파일에 작성하는 것을 고려해보자.
이것은 잠재적으로 `.git` 폴더와 `Dockerfile` 자체를 무시한다.
일반적으로 애플리케이션이 올바르게 실행되는데 필요없는 모든 것을 추가할 수 있다.
