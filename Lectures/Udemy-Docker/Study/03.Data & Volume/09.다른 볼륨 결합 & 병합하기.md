## Data & Volume

### 09. ë‹¤ë¥¸ ë³¼ë¥¨ ê²°í•© & ë³‘í•©í•˜ê¸°

---

### ğŸ“Œ ë°”ì¸ë“œ ë§ˆìš´íŠ¸ ë°”ë¡œê°€ê¸°

í•­ìƒ ì „ì²´ ê²½ë¡œë¥¼ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ê³  ì‹¶ì§€ ì•Šì€ ê²½ìš°ì— ë°”ë¡œê°€ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```
mac: -v $(pwd):/app
windows: -v "%cd%":/app
```

### ğŸ“Œ ë‹¤ë¥¸ ë³¼ë¥¨ ê²°í•© & ë³‘í•©í•˜ê¸°

ìƒˆë¡œ ì¶”ê°€í•œ ë°”ì¸ë“œ ë§ˆìš´íŠ¸ì˜ ë¬¸ì œëŠ” ì •í™•íˆ ë¬´ì—‡ì¼ê¹Œ?
ì´ í´ë”ì•ˆì— ìˆëŠ” ëª¨ë“  ê²ƒì„ `app` í´ë”ì— ë°”ì¸ë”©í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì.

> ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ 'app' í´ë”ë¥¼ ë¡œì»¬í´ë”ë¡œ ë®ì–´ì“°ëŠ” ê²ƒì´ ëì€ ì•„ë‹ˆë‹¤.

ì²˜ìŒì— ì´ë¯¸ì§€ê°€ ìƒì„±ë  ë•Œ ëª¨ë“ ê²ƒì„ `app` í´ë”ì— ë³µì‚¬í•œë‹¤.
ëª¨ë“  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ì§€ë§Œ, ê²°êµ­ ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•´ ìˆ˜í–‰í•œ ëª¨ë“  ë‹¨ê³„ê°€ `ë¬´ì˜ë¯¸` í•˜ê²Œ ë˜ëŠ” ê²ƒì¸ë°, ì´ ë§ˆìš´íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆì— ë°”ì¸ë”©í•˜ë©´ ì–´ì¨Œë“  `app` í´ë”ì˜ ëª¨ë“  ê²ƒì„ ë¡œì»¬í´ë”ë¡œ ë®ì–´ì“°ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë¦¬ê³  ë¡œì»¬ í´ë”ì—ëŠ” ì•±ì— í•„ìš”í•œ ëª¨ë“  ì¢…ì†ì„±ì´ ìˆëŠ” `node_modules` í´ë”ê°€ ì—†ë‹¤.
ì´ê²ƒì´ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì´ìœ ì´ë‹¤. server.js íŒŒì¼ì€ `Express` íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ í•„ìš”ë¡œí•˜ë©° ì´ê²ƒì€ ì»¨í…Œì´ë„ˆì— ì¡´ì¬í•˜ëŠ”ë°, ë¡œì»¬ ì„¤ì •ì—ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
ë¡œì»¬ í´ë”ì—ì„œ `npm install` ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸.

ê·¸ë¦¬ê³  ë¡œì»¬ í´ë”ë¥¼ `app` í´ë”ì— ë§ˆìš´íŠ¸í•˜ê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë¥¼ ì„¤ì •í•  ë•Œ ëª¨ë“  ì‘ì—…ì„ ë®ì–´ ì“´ë‹¤.

#### ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?

ë¨¼ì € ì»¨í…Œì´ë„ˆê°€ ë³¼ë¥¨ / ë°”ì¸ë“œ ë§ˆìš´íŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ì´í•´í•´ë³´ì.
ì»¨í…Œì´ë„ˆì™€ ë³¼ë¥¨ ë° ë°”ì¸ë“œ ë§ˆìš´íŠ¸ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´, `-v` í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆì— ë‘˜ ë‹¤ ë§ˆìš´íŠ¸ë¥¼ í•  ìˆ˜ ìˆë‹¤.
ì¦‰, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ ì–´ë–¤ í´ë”ê°€ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ í´ë”ì— ë§ˆìš´íŠ¸ë˜ê±°ë‚˜ ì—°ê²°ëœë‹¤.

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— íŒŒì¼ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì. ì´ ê²½ìš° ì™¸ë¶€ ë³¼ë¥¨ì—ë„ íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ë°, (ìƒˆ íŒŒì¼ì„ ì‘ì„±í•˜ë©´ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ í´ë”ì—ë„ ì¶”ê°€ë˜ë‹ˆ) ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•˜ë©´ ë³¼ë¥¨ì—ì„œ íŒŒì¼ì„ ì°¾ëŠ”ë‹¤.

> âœ… ì•„ì§ ë‚´ë¶€ì— íŒŒì¼ì´ ì—†ì–´, ë³¼ë¥¨ì—ì„œ íŒŒì¼ì„ ë¡œë“œí•˜ëŠ”ê²ƒì´ë‹¤. ê·¸ë˜ì„œ `ë°”ì¸ë“œ ë§ˆìš´íŠ¸` ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤.

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— íŒŒì¼ì´ ì—†ì§€ë§Œ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ ì‹œìŠ¤í…œì—ëŠ” íŒŒì¼ì´ ìˆê³ , ì´ ê²½ìš° íŒŒì¼ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ë‘ ê°€ì§€ ì¼ì´ ëª¨ë‘ ë°œìƒí•œë‹¤.

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ `app` í´ë”ì— íŒŒì¼ì„ ê°€ì§€ê³  ìˆë‹¤. `Dockerfile` ì— ì ì–´ë†“ì€ ëª…ë ¹ë–„ë¬¸ì—.
ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ ì™¸ë¶€ì— ìˆëŠ” ë¡œì»¬ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ í´ë”ì—ë„ íŒŒì¼ê³¼ í´ë”ê°€ ìˆë‹¤.
ì¢‹ì€ ì ì€ ë„ì»¤ê°€ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ ë¡œì»¬íŒŒì¼ì„ ë®ì–´ì“°ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  ë¡œì»¬ í˜¸ìŠ¤íŠ¸ í´ë”ì™€ ê·¸ ì•ˆì— ìˆëŠ” ì»¨í…ì¸ ê°€ `ë„ì»¤ ì»¨í…Œì´ë„ˆì— ìˆëŠ” ë‚´ìš©` ì„ ë®ì–´ì“°ê²Œ ëœë‹¤.
ê·¸ë•Œë¬¸ì— `node_modules` ë“±ì´ ì œê±°ë˜ê²Œ ëœê²ƒì´ë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ `ë‚´ë¶€ íŒŒì¼ ì‹œìŠ¤í…œ` ì— `íŠ¹ì • ë¶€ë¶„` ì´ ìˆë‹¤ëŠ” ê²ƒ. ì¦‰, ì™¸ë¶€ì—ì„œ ë®ì–´ì“°ì§€ ë§ì•„ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ìˆë‹¤ëŠ” ê²ƒì„ ë„ì»¤ì—ê²Œ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.
ê·¸ê²ƒì€ ë˜ë‹¤ë¥¸ ë³¼ë¥¨ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ë„ì»¤ ì»¨í…Œì´ë„ˆì— `ìµëª… ë³¼ë¥¨` ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤.

#### ìµëª… ë³¼ë¥¨

ì´ê²ƒì´ ìµëª… ë³¼ë¥¨ì´ ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ì‚¬ìš© ì‚¬ë¡€ì´ê¸°ë„ í•˜ë‹¤.
`-v` ë¡œ ë³¼ë¥¨ì„ í•˜ë‚˜ ë” ì¶”ê°€í•˜ì—¬ `/app/node_modules` í´ë”ë¥¼ ë°”ì¸ë”©í•œë‹¤.
ì´ë ‡ê²Œ ì¶”ê°€í•œ ê²ƒì€ ìµëª…ì˜ ë³¼ë¥¨ì¸ë°, `Dockerfile` ì—ì„œ í•˜ì§€ ì•Šì•˜ë‹¤.

ê²½ë¡œ ì•ì— ì½œë¡ ì„ ì¶”ê°€í•˜ì—¬ ë³¼ë¥¨ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ”ë°, ê·¸ëŸ¬ì§€ ì•Šìœ¼ë©´ ìµëª…ì˜ ë³¼ë¥¨ì´ ëœë‹¤.
ì´ë ‡ê²Œ `-v /app/node_modules` ë¡œ ì¶”ê°€í•˜ëŠ” ê²ƒì€ Dockerfileì— `VOLUME ["/app/node_modules"]` ë¼ê³  ì¶”ê°€í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

#### ì´ê²ƒì´ ë„ì›€ì´ ë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?

ë„ì»¤ëŠ” í•­ìƒ ì»¨í…Œì´ë„ˆì— ì„¤ì •í•˜ëŠ” `ëª¨ë“  ë³¼ë¥¨` ì„ í‰ê°€í•˜ë©°, ì¶©ëŒì´ ìˆëŠ” ê²½ìš° `ë” ê¸´ ë‚´ë¶€ ê²½ë¡œ` ë¥¼ ìš°ì„ í•œë‹¤. ì¦‰ ì§€ê¸ˆ ì¶©ëŒì´ ìˆëŠ”ë°, ë¬´ì–¸ê°€ì— ë°”ì¸ë”©ëœ app ë³¼ë¥¨ì´ ìˆê³ , app/node_modules ë³¼ë¥¨ì´ ìˆë‹¤.

ì´ë¦„ì„ ì§€ì •í•˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ ìµëª… ë³¼ë¥¨ì˜ ê²½ìš°ì—ë„ ë„ì»¤ê°€ ê´€ë¦¬í•˜ê³ , ë¡œì»¬ ì‹œìŠ¤í…œ ì–´ë”˜ê°€ì— ë§¤í•‘ëœ í´ë”ê°€ ìˆë‹¤ëŠ” ì ì„ ê¸°ì–µí•´ì•¼ í•œë‹¤.

ë„ì»¤ëŠ” ì–´ë–¤ ë³¼ë¥¨ì´ `app / app/node_modules` í´ë”ì— ë§¤í•‘ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë°, ì´ëŸ° ê²½ìš° ë„ì»¤ê°€ ê°€ì§„ ê°„ë‹¨í•œ ê·œì¹™ì€ `ë” ê¸¸ê³  ë” êµ¬ì²´ì ì¸ ê²½ë¡œë¥¼ ì±„íƒ` í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
ì¦‰, `app` í´ë”ì— ë°”ì¸ë”© í•  ìˆ˜ ìˆì§€ë§Œ, `app` í´ë” ë‚´ë¶€ì˜ `node_modules` í´ë”ì— ë°”ì¸ë”©í•œë‹¤.
npm install ëª…ë ¹ì–´ë¡œ ìƒì„±ëœ ì´ í´ë”ê°€ ì‚´ì•„ë‚¨ì•„ ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìœ ì…, ì¦‰, ë°”ì¸ë“œ ë§ˆìš´íŠ¸ëœ ë³¼ë¥¨ì˜ ë‚´ìš©ë¬¼ì„ ë®ì–´ì“´ë‹¤.

> ì‰½ê²Œ ë§í•˜ë©´ `npm install` ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ìƒì„±ì¤‘ì— ìƒì„±ëœ `node_modules` í´ë”ëŠ” ì‚´ì•„ë‚¨ì•„ ì‹¤ì œë¡œ ì—¬ì „íˆ ì‘ë™í•˜ëŠ” ë°”ì¸ë“œ ë§ˆìš´íŠ¸ì™€ í•¨ê»˜ ê³µì¡´í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

`docker run -d --rm -p 3000:80 --name feedback-app -v feedback:/app/feedback -v "/Users/bibi/Documents/GitHub/TIL/Lectures/Udemy-Docker/Code/03-volume:/app" -v /app/node_modules feedback-node:volumes`

ì´ë ‡ê²Œí•˜ë©´ í¼ìœ¼ë¡œ ë³´ë‚´ë„ íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

![](https://velog.velcdn.com/images/chromeheartz/post/18790027-eefa-4801-98f4-9a06e61f3434/image.png)

ë˜í•œ htmlì„ ë°”ê¾¸ê²Œ ë˜ë©´ ë°”ë¡œ ë°˜ì˜ì´ ë˜ëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë¦¬ë¹Œë“œí•˜ì§€ ì•Šê³ ë„ ê°€ëŠ¥í•´ì§„ê²ƒì´ë‹¤.
