## MSWë¡œ ì„œë²„ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸°

### 04. 'await findBy'ë¡œ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì±„ì›Œì§€ëŠ” ìš”ì†Œ ì°¾ê¸°
---------------------------------------------

### ðŸ“Œ axios 1.x ì˜¤ë¥˜

í”„ë¡œë•ì…˜ íŒŒì¼ì´ `axios 1.x` ë¥¼ ê°€ì ¸ì˜¬ ë•Œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•˜ë©´ ì˜¤ë¥˜ê°€ í‘œì‹œëœë‹¤.

#### í•´ê²°ë°©ì•ˆ #1
`axios 0.27 ì„¤ì¹˜`

```js
npm install axios@^0.27
```

#### í•´ê²°ë°©ì•ˆ #2
`test script` ì—…ë°ì´íŠ¸

```js
"test": "react-scripts test --transformIgnorePatterns \"node_modules/(?!axios)/\"",
```

### ðŸ“Œ await findBy

ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ëŠ” ì•±ì„ ì½”ë”©í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•´ì•¼ í•˜ëŠ”ë° `ì´ë¯¸ì§€` ë¥¼ ì°¾ì§€ ëª»í•˜ê³  ìžˆë‹¤. ê·¸ë¦¬ê³  `DOM` ì„í™•ì¸í•´ë³´ë‹ˆ ì•„ë¬´ê²ƒë„ ì—†ì—ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-29 á„‹á…©á„Œá…¥á†« 11 58 09](https://github.com/chromeheartz/TIL/assets/95161113/1bc0d4a3-252c-4e8a-80fc-83c66f196930)

ì—ëŸ¬ë¥¼ ì‚´íŽ´ë³´ë‹ˆ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ì— `ì´ë¯¸ì§€ ì—­í• ` ë° ì´ëŸ° ì •ê·œ í‘œí˜„ì‹ ì´ë¦„ì„ ê°€ì§„ `ì•¡ì„¸ìŠ¤ ê°€ëŠ¥ ìš”ì†Œ` ê°€ ì—†ë‹¤ê³  ë‚˜ì˜¨ë‹¤. ì•¡ì„¸ìŠ¤ ê°€ëŠ¥í•œ ì—­í• ì€ ì—†ì§€ë§Œ `ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ëŠ” ì—­í• ` ì€ ìžˆë‹¤.
ì•¡ì„¸ìŠ¤ í•˜ë ¤ë©´ `hidden: true` ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.
íŠ¹ì • ì´ë¦„ì˜ ì—­í• ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ìœ ìš©í•  ì •ë³´.

** í•˜ì§€ë§Œ ì´ ê²½ìš°ì—ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤. ìˆ¨ê²¨ì§„ ê²ƒì´ ì—†ìœ¼ë‹ˆ `ë¹„ë™ê¸°í™”` ë¥¼ ë‹¤ë£¨ì–´ì•¼ í•œë‹¤**
ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ `axios` ë¥¼ ì‚¬ìš©í•´ì„œ ë¹„ë™ê¸°ì‹ ë°©ë²•ìœ¼ë¡œ íŽ˜ì´ì§€ í•­ëª©ì„ ì‘ë‹µìœ¼ë¡œ ì±„ìš´ë‹¤.
> â­ï¸ ë˜ í…ŒìŠ¤íŠ¸ íŒŒì¼ `ìžì²´ê°€ ì¢…ë£Œë˜ëŠ” ì‹œì ` ì€ `ì»´í¬ë„ŒíŠ¸ê°€ í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ ì—ëŸ¬ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ì´ì „` ì´ë‹¤. ì¤‘ìš”í•œ ì ì€ `ë¹„ë™ê¸°ì‹ ìž‘ì—…` ì„ í• ë•Œë§ˆë‹¤ ì„œë²„ ì—°ê²°ì€ `ê±°ì˜ í•­ìƒ ë¹„ë™ê¸°ì‹` ì´ ëœë‹¤ëŠ” ì‚¬ì‹¤.
ë”°ë¼ì„œ `await / findBy` ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ê¸°ì¡´ getAllByRoleì„ `findAllByRole` ë¡œ êµì²´í•´ì£¼ê³ , `async / await` ë¥¼ ê°ê° ì¶”ê°€í•´ì£¼ë©´ í…ŒìŠ¤íŠ¸ í†µê³¼.

```jsx
// Options.test.jsx
test("displays image for each scoop option from server", async () => {
  render(<Options optionType="scoops" />);

  // find images
  const scoopImages = await screen.findAllByRole("img", { name: /scoop$/i });
  expect(scoopImages).toHaveLength(2);
  
  ....
});
```
