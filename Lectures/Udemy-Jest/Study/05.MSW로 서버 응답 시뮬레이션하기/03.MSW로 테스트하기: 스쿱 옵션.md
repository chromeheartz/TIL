## MSWë¡œ ì„œë²„ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸°

### 03. MSWë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°: ìŠ¤ì¿± ì˜µì…˜

---

### ðŸ“Œ Scoops Option

> Options ì»´í¬ë„ŒíŠ¸ê°€ ì„œë²„ì—ì„œ Scoopsì˜ `ì—”ë“œí¬ì¸íŠ¸` ë¥¼ í˜¸ì¶œí•  ë•Œ ìŠ¤ì¿±ì˜µì…˜ì„ ë¶ˆëŸ¬ì™€ ScoopOption ì»´í¬ë„ŒíŠ¸ì— í‘œì‹œí•˜ëŠ”ì§€ë¥¼ `í…ŒìŠ¤íŠ¸`

â­ï¸ í˜„ìž¬ ê¸°ì ì—ì„œëŠ” `ScoopOption ì»´í¬ë„ŒíŠ¸` ë¥¼ ì°¸ì¡°í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ì½”ë“œì—ì„œ ì–´ë–¤ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë˜ëŠ”ì§€ë§Œ ì²´í¬.

`entry ë””ë ‰í† ë¦¬ì— Options / ScoopOption` ì„ ê°ê° ë§Œë“¤ì–´ì£¼ê³  ì¼ë‹¨ `div` ë°˜í™˜ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ë¦¬. ì´í›„ í…ŒìŠ¤íŠ¸ íŒŒì¼ìž‘ì„±

```jsx
// src/pages/entry/Options.jsx
import React from "react";

const Options = ({ optionType }) => {
  return <div>option</div>;
};

export default Options;


// src/pages/entry/ScoopOption.jsx
import React from "react";

const ScoopOption = () => {
  return <div>ScoopOption</div>;
};

export default ScoopOption;
```

### ðŸ“Œ Options.test.jsx

- 1ï¸âƒ£ `render, screen` ì„ ë¨¼ì € ê°€ì ¸ì˜¤ê³ , `user-event` ëŠ” ì´ í…ŒìŠ¤íŠ¸ì—ì„œ ì•„ë¬´ ìƒí˜¸ ìž‘ìš©ë„ ì—†ì„í…Œë‹ˆ ê°€ì ¸ì˜¬ í•„ìš”ê°€ ì—†ë‹¤.

- 2ï¸âƒ£ í•´ë‹¹ `ì˜µì…˜` ì„ ë Œë”ë§í•˜ëŠ”ë° `Options.jsx` ì—ì„œ `optionType` ì„ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ë‹ˆ í•´ë‹¹ êµ¬ë¬¸ì— ë§žê²Œ ìž‘ì„±

```jsx
test("displays image for each scoop option from server", () => {
  render(<Options optionType="scoops" />);
});
```

- 3ï¸âƒ£ `ì´ë¯¸ì§€` ë¥¼ ë°›ì•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•˜ë‹ˆ ê°€ìž¥ í”ížˆ ì“°ì´ëŠ” `getByRole` ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì—¬ëŸ¬ìž¥ ìžˆì„ ê²½ìš°ë¥¼ ê°ì•ˆí•´ `getAllByRole` ë¡œ ì°¾ê³ , name ì˜µì…˜ì€ `alt` ì†ì„±ì¼ í…ë° `scoop$` scoopìœ¼ë¡œ ëë‚œë‹¤ëŠ” ê±¸ ë‚˜íƒ€ë‚´ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ìž‘ì„±.
  ì¶”ê°€ë¡œ `í•¸ë“¤ëŸ¬(handler.js)` ê°€ ìŠ¤ì¿± ì˜µì…˜ ë‘ ê°œë¥¼ ë°˜í™˜í•˜ë‹ˆ ë‹¨ì–¸ì‹œì— ê¸¸ì´ë„ ê°€ì§„ë‹¤.
  ì—¬ê¸°ì„œ ì‚¬ìš©í•œ `toHaveLength` ëŠ” `Jest-dom` ì´ ì•„ë‹Œ `Jest` ì˜ ë‹¨ì–¸ì´ë‹¤.

```jsx
const scoopImages = screen.getAllByRole("img", { name: /scoop$/i });
expect(scoopImages).toHaveLength(2);
```

- 4ï¸âƒ£ ì°¾ì€ ì´ë¯¸ì§€ë¥¼ `ë” êµ¬ì²´ì ` ìœ¼ë¡œ íŠ¹ì •í•  ìˆ˜ ìžˆìœ¼ë‹ˆ, `ì´ë¯¸ì§€ì˜ alt` ë„ ë‹¨ì–¸
  `.map()` ì„ ì´ìš©í•´ ëª¨ë“  ì´ë¯¸ì§€ì— ëŒ€í•œ `alt` ë¥¼ ì–»ì–´ë‚¸ë‹¤. íƒ€ìž…ìŠ¤í¬ë¦½íŠ¸ì˜ ë¬¸ì œê°€ ìžˆì§€ë§Œ `@ts-ignore` ë¡œ ë¬´ì‹œí•˜ê³  ì§„í–‰.
  ì°¾ì€ ì´ë¯¸ì§€ë“¤ì€ `ë°°ì—´` ì´ ë í…ë° ì´ ë°°ì—´ì´ `toEqual` ì´ ë ê²ƒì´ë¼ê³  ë‹¨ì–¸í•˜ë©´ëœë‹¤.

> ë°°ì—´ / ê°ì²´ë¡œ ìž‘ì—…í•  ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ë³€ê²½ ê°€ëŠ¥í•œ ìœ í˜•ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
> ì¼ë°˜ì ìœ¼ë¡œ ë°°ì—´ / ê°ì²´ / ìˆ«ìž / ë¬¸ìžì—´ ì„ ìƒê°í•´ë³´ë©´ëœë‹¤.
> `ìˆ«ìž / ë¬¸ìžì—´` ì€ `toBe ë§¤ì²˜` ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆì§€ë§Œ `ë°°ì—´ / ê°ì²´` ëŠ” `toEqual ë§¤ì²˜` ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤

```jsx
// @ts-ignore
  const altText = scoopImages.map((element) => element.alt);
  expect(altText).toEqual(["Chocolate scoop", "Vanilla scoop"]);
});
```

#### âœ… ì •ë¦¬

#### ì´ í…ŒìŠ¤íŠ¸ì— `Mock Service Worker(MSW)` ê°€ í•œë²ˆë„ ì–¸ê¸‰ë˜ì§€ ì•Šì•˜ëŠ”ë° ê·¸ ì´ìœ ëŠ”?

í…ŒìŠ¤íŠ¸ ìžì²´ëŠ” `MSW` ê°€ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ë„ë¡ ì„¤ì •í•œ `ì„¤ì • íŒŒì¼ì˜ MSW` ë§Œ ì²˜ë¦¬í•œë‹¤.
ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ìƒì„±í•  ìœ„ì¹˜ëŠ” `Options ì»´í¬ë„ŒíŠ¸` ì— ìžˆë‹¤.
ë”°ë¼ì„œ ì´ í…ŒìŠ¤íŠ¸ëŠ” ì˜µì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ëŠ” `ì„œë²„ì— get ìš”ì²­` ì„ ë³´ë‚´ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„ì´ ëœë‹¤. í•˜ì§€ë§Œ `MSW` ì„¤ì • ë•Œë¬¸ì— ìš”ì²­ì€ ì„œë²„ì— ì „í•´ì§€ì§€ ì•Šê³  `MSWê°€ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ` ì˜µì…˜ ì»´í¬ë„ŒíŠ¸ì— `í•¸ë“¤ëŸ¬ ì‘ë‹µ` ì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

```jsx
// src/pages/entry/tests/Options.test.jsx
import { render, screen } from "@testing-library/react";
import Options from "../Options";

test("displays image for each scoop option from server", () => {
  render(<Options optionType="scoops" />);

  // find images
  const scoopImages = screen.getAllByRole("img", { name: /scoop$/i });
  expect(scoopImages).toHaveLength(2);

  // confirm alt text of images
  // @ts-ignore
  const altText = scoopImages.map((element) => element.alt);
  expect(altText).toEqual(["Chocolate scoop", "Vanilla scoop"]);
});
```
