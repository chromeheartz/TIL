## 소개

### 05. Jest: Watch 모드와 테스트가 작동하는 방식
---------------------------------------------

### 📌 Jest

리액트 테스팅 라이브러리`RTL` 은 컴포넌트를 `가상 DOM` 으로 렌더링하는데 도움이 된다.
또한, 가상 DOM을 검색하는데 도움이 되는데 `CRA` 에서 제공되는 `getByText` 메서드를 확인해보았다.
아직 사용하지 않았지만, `가상 DOM과 상호작용` 하여 요소를 클릭하거나 텍스트를 입력할 수 있다.
❗️ 여기까지가 `RTL의 역할`

> ✅ 하지만 `테스트 러너` 가 필요하다.
테스트를 찾고 실행하며 `단언` 할 무언가. 이때 `Jest` 를 사용한다.

Jest가 유일한 테스트러너는 아니며 `Mocha / Jasmine` 도 있지만 테스팅 라이브러리에서는 `Jest` 를 권장하며 `CRA` 와 함께 제공된다.
그래서 `npm test` 를 실행했을때 `CRA` 에서 제공하는 `npm script` 를 실행했고 그 스크립트가 `Jest` 를 `Watch` 모드로 실행하게 되는것이다.

### 📌 Jest Watch Mode

#### `Watch Mode` 는 무엇일까?

`Watch Mode` 는 `Jest` 를 실행하는 방법으로 `마지막 커밋` 이후 파일의 모든 변경사항을 확인해서 `마지막 커밋 이후 변경된 파일` 과 `연관된 테스트` 만 실행한다.
> ✅ 여기서 커밋은 `git commit` 이 아닌 저장 시점이라고 보아도 된다. `GULP` 의 `watch` 와 동일한 개념으로 생각.
⭐️ 추가로 `git commit` 개념 관련해서는 마지막 커밋 이후 변경된 파일없이 똑같이 npm test를 진행하게 되면 `변경사항이 없다는 메시지` 를 출력해준다.

### 📌 How does Jest Work ?

#### `Jest의 원리` 는 무엇일까? 테스트 통과나 실패는 어떻게 아는 것일까?
- 2개의 인수를 가진 `전역 텍스트 메소드` 가 있다.
  - 첫 번째 인수는 `테스트의 문자열 설명` 이며 Jest에서 이 인수를 사용해서 테스트에 실패했을 때 `어떤 테스트` 에 실패했는지 알려줄 수 있다. (보통 1개 이상의 테스트를 실행하기 때문)
  - 두 번째 인수는 `테스트 함수` 이다. Jest는 테스트의 `성공과 실패를 결정` 하기 위해 이 함수를 실행한다.
  
❗️ `테스트 함수` 는 어떻게 실행할까?
테스트는 테스트 함수를 실행할때 `에러가 발생` 하면 실패하게 되고, 단언은 `예상이 틀렸을 때` 에러가 발생하도록 한다. 그래서 테스트 함수에 에러가 없으면 테스트에 통과하기 때문에, `빈 테스트` 도 통과되어야 한다.

```js
// App.test.js
test('renders learn react link', () => {
  // throw new Error('test failed') // => error case
}
```

이런식으로 빈 테스트를 테스트해도 통과하게 된다.
반대로 `throw new Error('test failed')` 같이 에러를 발생시키면 테스트가 실패하게 된다.
