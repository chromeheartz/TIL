## Form 복습과 팝오버

### 01. 온디맨드 선데이 아이스크림 소개 
---------------------------------------------

### 📌 Sundaes On Demand App Summary

`CRA` 로 `sundaes-on-demand` 라는 이름을 입력하고, 새로운 앱을 시작.
#### 📍 앱이 하게 될 작업

- 사람들이 아이스크림의 맛과 토핑을 선택한 뒤, `주문을 제출`
- 맛과 토핑의 선택지는 `서버` 로부터 오게 되며 주문이 제출되면, 이는 서버로 전송
- 서버는 클라이언트에게 `주문 번호` 를 회신해서 고객들에게 보여준다.

> 이렇게 이 앱에서 `클라이언트 / 서버` 가 `상호작용` 을 한다.

### 📌 Backdrop to Test

기존에 했던 테스트 앱보다는 더욱 복잡한 특정 부분을 `테스트` 할 것.
- 이용 약관에 대해 `커서를 올리면 나타나는 팝업창` 을 만들어 사용자들이 가입을 할 때 어떤 약관에 동의하는지 확인
  - 이를 위해서 DOM으로부터 `사라지는 요소` 를 테스트
- 서버의 응답을 `모의(Mock)` 해 볼것. 기능 테스트에 있어 중요한 부분으로 `Mock Service Worker(MSW)` 을 사용해 서버로부터 `모의(Mock)` 응답을 보내도록 함.
  - 즉, 서버로 가는 호출을 중간에서 가로채 응답을 제어할 수 있도록 모의 응답을 보낸다. 이렇게 하면 테스트 도중 `서버가 실행 중일 필요` 가 없다.
- `비동기적 업데이트` .
  - 단언을 하기 전 `DOM 내의 특정 변경` 을 기다리게 하는 도구를 볼것.
- `전역 상태 사용`
  - `컨텍스트(Context)` 를 사용. 
  
#### ⭐️ Spoilter Alert !

> 사실 컨텍스트의 구현은 테스트를 하지 않을것이다.
왜냐하면 우리는 사용자에게 `보이는 테스트 동작` 에만 관심이 있기 때문이다. 그게 바로 `기능 테스트의 목적` 이므로, 따라서 테스트는 다른 전역 상태 관리 시스템을 사용한 경우와 전혀 다르지 않다.

✅ 하지만 테스트의 설정에는 차이점이 있다.
테스트가 올바르게 기능할 수 있게 컴포넌트가 `컨텍스트에 액세스` 할 수 있도록 만들어야 한다.
그래야 컨텍스트에 액세스를 시도할 때, `찾을 수가 없어 테스트 실행 중 오류가 발생하는 상황` 을 방지할 수 있다.

따라서 테스트를 설정하는 데에 있어서 `컨텍스트를 사용하는 방법` 을 고려 하는것이 `한 가지의 방법` 이 될 수 있다.

### 📌 앱의 구성

이 앱에는 `세 개` 의 메인 페이지로 구성할것인데
- `주문 입력` 페이지 : 사람들이 주문을 입력
  - 몇 스쿱의 아이스크립을 원하는지, 어떤 토핑을 원하는지.
  - 토핑을 두 개 선택할 수는 없고 얹거나 얹지 않거나 둘 중 하나
  - 각 섹션의 합계 금액이 나오고 총 합계 금액 출력
- `주문 요약` 페이지
  - 스쿱에 대한 요약 / 토핑에 대한 요약 / 계산한 총 합계 금액
  - 이용 약관을 팝업창으로 표시
- `주문 확인` 페이지
  - 메시지를 표시하고, 주문 제출
  - 서버로부터 받은 `주문 번호` 를 표시
  - 새로운 주문 생성
  
### 📌 Order Phase State (App-level)

`App-level` 상태를 이용해 `주문 단계를 추적` 하며 단계를 거쳐 나갈것이다

`inProgress` => 주문 입력란 표시
`review` => 주문 요약 페이지 표시
`completed` => 주문 확인 페이지 표시