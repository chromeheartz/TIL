## Merge

### 06. 병합 충돌 해결하기

---

### 📌 병합 충돌 해결

<img width="1122" alt="스크린샷 2024-07-08 오후 7 53 54" src="https://github.com/chromeheartz/TIL/assets/95161113/8ceec9e1-f443-43ff-bc5d-59dcc367fdc6">

병합충돌을 생성해서 해결해보자
일단 기존에 사용하던 `ABBA` 브랜치를 삭제.
`git branch -d ABBA` 이미 병합했기 때문.

이제 새로운 브랜치 2개를 만들것이다
`Bjorn / Serena`

이 두개의 브랜치는 각각의 작업을 진행하면서 병합을 하게 된다.

`git switch -c xxxx` 로 각각 2개의 브랜치를 만들어주고, 각각 브랜치에서 작업을 계속 하면서 커밋을 하고있다고 가정해보자.

각각은 서로 `갖고 있지 않은 커밋 2개` 를 가지고 있는데 이전에 했던 병합과는 달리 `충돌` 이 발생하게 된다.

#### ✅ 같은 파일에서 같은 라인 일부를 편집했기 때문

![스크린샷 2024-07-08 오후 8 01 06](https://github.com/chromeheartz/TIL/assets/95161113/dc4e3811-88b3-48dc-afa8-759906702291)

#### 여기서 두 브랜치를 병합하려고 하면 어떤 문제가 발생할까?

일단 `병합할 위치` 를 정해야 한다.
여전히 `별도의 브랜치` 를 갖길 원하면 새 브랜치를 만들어서 병합시킬 수 있을 것이다

`git switch -c combo` `combo` 브랜치를 만들어서 `bjron` 브랜치의 모든 것들을 포함하고, `serena` 의 변경사항들을 병합해보자.

사실 이때 기점으로 `combo` 에 있는데 이는 `bjron` 브랜치에 있는 것과 동일한 것들을 포함하기 때문에 당연히 `충돌` 이 발생한다.

`git mrege serena (HEAD combo)`

![스크린샷 2024-07-08 오후 8 02 43](https://github.com/chromeheartz/TIL/assets/95161113/95f90563-aa0d-4076-89f0-f0d35587de66)

이대로 커밋을 하면 충돌이 나서 에디터를 보게되면 몇 가지를 하이라이트해주면서 설명을 해주고 있다

`HEAD` 를 볼 수 있고, ==== 사인 윗부분은 `브랜치가 원래 갖고 있던 것` 이고 아랫부분은 변경사항이 들어온것이다.

#### ✅ 결정

여기서 결정해야 한다

- serena의 변경사항만 원하는지 (Accept Current Change)
- bnjorn의 것을 원하는지
- 둘다 원하는지

현재의 경우에는 `둘 다` 원하기때문에 그냥 `=====` 이 표시들을 없애고 텍스트 편집하듯이 정리하면 된다.

`git status` 를 실행하면 현재 `combo` 브랜치에 있고, 충돌상황이 있으며 `songs` 파일이 수정되었다고 메세지를 출력한다.

![스크린샷 2024-07-08 오후 8 07 43](https://github.com/chromeheartz/TIL/assets/95161113/d7bba6e7-816a-4a7e-8d32-f409a4a4a95f)

여기서 `변경사항` 등을 등록하고, 그 후에 `git commit -m "resolve conflicts"` 를 실행하는데 커밋메세지는 간단하게 작성하면 된다. 원하는대로.

이제 병합이 되고 새 `병합 커밋` 을 가진다. 차이점은 커밋을 하기전에 몇몇 작업을 해야 한다는 것이다.

> 사실 현재 기점에서 수정은 그냥 하나하나 눈으로 다 확인하면서 텍스트를 수정해주는 것인데 조금 더 쉽게 할 수 있는 방법을 생각해보아야 할듯 하다.
