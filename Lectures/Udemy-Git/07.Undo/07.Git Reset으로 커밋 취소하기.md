## Undo

### 07. Git Reset으로 커밋 취소하기

---

### 📌 git reset

<img width="1114" alt="스크린샷 2024-08-12 오후 8 43 25" src="https://github.com/user-attachments/assets/d7823d59-6450-4a42-8309-47e42932e9cc">

`git restore` 와 비슷한 `git reset` 은 저장소를 `특정 커밋` 으로 다시 `재설정` 한다.

만약 마스터 브랜치에서 작업을 하고 있고, 마지막 커밋 3개가 `마스터 브랜치` 에 있으면 안될 때 제거하고 싶을 것이다. 이런 때에 `git reset` 을 사용하여 `해당 커밋을 실행 취소` 할 수 있다.

`두 가지 방법` 가 있다.

#### ✅ 일반 재설정

`git reset <commit-hash>` 를 사용하는 것인데, 이렇게 하면 커밋 해시가 무엇이든 `저장소를 다시 그곳으로 재설정` 한다.

⭐️ 변경 사항이 사라질 것 같지만 `변경 사항은 여전히 남아 있다`. `기본 / 일반 재설정` 을 한다면 `커밋만 제거` 된다. 변경사항을 제거하고 로컬파일에서 한 일을 취소할 수 있지만 해당 명령어로는 그냥 `커밋 몇개를 없애라` 라고 말한 것 뿐이다.
❗️ `working directory` 에 있는 것은 그대로 유지가 된다는 뜻.

> 그럼 언제 쓸까?

- 작업은 유지하면서 다른 브랜치로 이동시키고 싶은 경우. 즉, 잘못된 브랜치에서 커밋을 했을 때 유용하게 사용할 수 있다.
- 마스터 브랜치에서는 커밋을 잃어버렸지만 변경사항을 가지고 `새로운 브랜치` 를 만들 수 있다.

#### ✅ 하드 재설정

동일한 명령어에 `--hard` 가 있는 것이다. `git reset --hard <commit-hash>` 를 한다면 실제로는 커밋을 잃게 된다. 깃은 `해당 커밋 해시` 까지의 커밋을 취소하게 된다. 그리고 `변경 사항` 이 `working directory` 에서 제거된다.

만약 `작업을 제거 / 관련 커밋을 제거` 하려고 할 때에 `--hard` 를 사용할 수 있을 것이다.
`HEAD` 기준으로 돌아가고 싶다면 `HEAD~1` 같은 것을 사용할 수 있다.

> ✅ `git reset` 은 `브랜치` 를 기준으로 작성하기 때문에 마스터에서 커밋을 제거해도, 제거하고싶었던 커밋이 있던 브랜치에가면 남아있다. `모든 브랜치` 에서 커밋을 제거한 것이 아니다.
