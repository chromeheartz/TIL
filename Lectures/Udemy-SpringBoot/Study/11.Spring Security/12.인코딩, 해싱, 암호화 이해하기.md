## Spring Security

### 12. 인코딩, 해싱, 암호화 이해하기

---

### 📌 인코딩, 해싱, 암호화

`인코딩, 해싱, 암호화` 간의 차이를 알아보자.
보안에 생소하다면 이 `세 용어` 를 헷갈리기도 한다.

### ✅

- `인코딩` : 데이터를 원래 형식에서 다른 형식으로 변환하는 것이다. 인코딩에서는 키, 패스워드를 사용하지 않고, `가역적` 이다. 텍스트를 인코딩한 후 실제 텍스트로 다시 바꿀 수 있다. 목적은 데이터 보안이 아니고, 데이터를 압축하거나 스트리밍하는것이 목적이다. `Base 64, Wav, MP3` 등이 있다.

- `해싱` : 해싱에서는 데이터를 `해시 문자열` 로 변환한다. 단방향 프로세스이고, `비가역적` 이여서 해시에서 원래 데이터를 구할 수 없다. 알고리즘을 이용해 데이터를 해시로 변환하고 나면 이 해시에서 데이터를 구할 수 없다.

#### 그럼 해시를 왜 사용할까?

`데이터 무결성` 을 검증하는데 사용한다. 데이터와 이 데이터의 해시를 함께 전송하면 수신측에서는 데이터를 받고 해싱한 후 계산한 해시와 원래 메시지의 해시가 일치한지 확인한다.
이를 통해 메시지가 전송한 시점 그대로인지 확인할 수 있다.
대표적인 `해싱 알고리즘` 으로는 `bcrypt / scrypt` 가 있다.

- `암호화` : 반면 암호화는 키나 패스워드를 사용해 `데이터를 인코딩하고` 키나 패스워드가 있어야 `복호화` 할 수 있다. 암호화의 예로 `RSA` 가 있다. 암호화 알고리즘이 데이터 암호화 키를 사용해 암호화된 텍스트를 생성한다. 그리고 암호화한 경우에는 `복호화 알고리즘 / 데이터 암호화 키` 를 사용해 실제 텍스트로 되돌릴 수 있다.

<hr />
반면 인코딩에서는 키를 사용하지 않는다. `인코딩 알고리즘` 으로 인코딩된 텍스트를 생성하고, `디코딩 알고리즘` 을 통해 인코딩된 텍스트에서 실제 텍스트를 해독한다.
즉, `인코딩 / 암호화` 모두 실제 텍스트를 구할 수 있다.

> **하지만 인코딩과 암호화는 목적이 서로 다르다**
> 암호화는 `데이터 보호` 를 목적으로 한다면, 인코딩은 `데이터를 효율적으로 전송 / 저장` 하는 것이 목적이다.

`해싱` 의 경우 `데이터 무결성` 을 검증하는 것이 목적.
데이터를 `해싱 알고리즘` 으로 보내면 알고리즘에서 해시를 생성. 데이터와 해시를 모두 저장하고, 데이터 전송이 필요한 경우에는 데이터와 해시를 함께 전송한다.

수신 측에서도 데이터를 해싱한 후 이 해시가 데이터와 일치하는지도 확인한다.
해시를 이용하는 대표적인 활용 사례는 패스워드를 저장할 때이다. 패스워드를 평문 그대로 저장하는 것은 바람직하지 않다. 누군가 데이터베이스에 액세스해서 `평문 암호` 를 획득할 수 있기 때문에, 패스워드를 저장할때 `해싱` 을 이용하는 것이다.

#### 해싱 예시

어떤 사용자의 경우 패스워드는 `12345678` 이지만, 데이터베이스에 저장된 것은 해싱된 값인 `hd23dd23` 이다. 그럼 인증은 어떻게 이루어질까?

사용자가 로그인을 시도하면 패스워드를 확인해, 해싱한다.
그리고 해싱된 값을 데이터베이스에 저장된 해시와 비교.
즉, `해시 키` 를 다시 생성하고 이것이 `저장된 패스워드 해시 키` 와 일치하는지 확인하고 두 값이 일치하면 로그인이 허용된다.
