## Spring AOP

### 04. AOP μ©μ–΄ ν›‘μ–΄λ³΄κΈ°

---

### π“ AOP μ©μ–΄

![](https://velog.velcdn.com/images/bibiboy/post/1bdd5373-adc9-4aaf-9803-8d856c63da68/image.png)

κ΄€μ  μ§€ν–¥ ν”„λ΅κ·Έλλ°κ³Ό κ΄€λ ¨λ μ©μ–΄ μ •λ¦¬

#### π“ μ»΄νμΌ νƒ€μ„ κ΄€λ ¨ μ©μ–΄

- `Advice` : μ‹¤ν–‰ν•λ ¤λ” μ½”λ“λ¥Ό μλ―Έν•λ‹¤.
  μμ‹λ΅λ” `Logging, Authentication` λ“±μ΄ μλ‹¤.
- `Pointcut` : μΈν„°μ…‰νΈν•λ ¤λ” λ©”μ†λ“ νΈμ¶μ„ μλ―Έν•λ‹¤.
  μ–΄λ–¤ λ©”μ†λ“λ¥Ό μΈν„°μ…‰νΈν• κ²ƒμΈκ°€, ν¨ν‚¤μ§€μ λ¨λ“  λ©”μ†λ“λ¥Ό μΈν„°μ…‰νΈ ν•κ³ μ‹¶μ§€ μ•μ„λ•λ” `μ›ν•λ” κ²ƒ` λ§ λ…μ‹ν•λ‹¤. ν‘ν„μ‹μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.
- `Aspect` : `Advice + PointCut` μ μ΅°ν•©.
  κ²°κµ­ μ½”λ“λ¥Ό λ³΄κ² λλ©΄

```java
@Aspect
public class LoggingAspect {

	private Logger logger = LoggerFactory.getLogger(getClass());
	// PointCut
	@Before("execution(* com.in28minutes.learn_springaop_13.*.*.*(..))") // μ–Έμ λ¥Ό λ…μ‹
	public void logMethodCall(JoinPoint joinPoint) {
		logger.info("Before Aspect - Method is called - {}", joinPoint); // ν•λ ¤λ” λ¬΄μ—‡
	}
}
```

`μ–Έμ  + λ¬΄μ—‡` μ„ ν•©μΉκ² λλ©΄ `Aspect` κ°€ λλ”κ²ƒμ΄λ‹¤

- `Weaver` : μ„λ²„λ” AOPλ¥Ό κµ¬ν„ν• ν”„λ μ„μ›ν¬λ¥Ό μλ―Έν•λ‹¤.
  μ–΄λ“λ°”μ΄μ¤λ‘ ν¬μΈνΈμ»·μ„ μ •μν•κ³  λ‚ λ‹¤μ μ–΄λ“λ°”μ΄μ¤κ°€ μ μ‹μ— κµ¬ν„λλ”μ§€ λ„κ°€ ν™•μΈν• κΉ?
  `AOP ν”„λ μ„μ›ν¬` μ„λ²„μ μΌλ‹¨. `AspectJ / Spring AOP` λ„ `Weaver` μ΄λ‹¤.

#### π“ λ°νƒ€μ„ κ΄€λ ¨ μ©μ–΄

- `Join Point` : ν¬μΈνΈμ»·μ΅°κ±΄μ΄ μ°Έμ΄λ©΄ μ–΄λ“λ°”μ΄μ¤κ°€ μ‹¤ν–‰λλ‹¤.
  μλ¥Ό λ“¤μ–΄ ν¬μΈνΈμ»· μ΅°κ±΄μ΄ μ°Έμ΄λλ” λ©”μ†λ“ νΈμ¶μ΄ 1,000κ±΄ μλ‹¤λ©΄ μ–΄λ“λ°”μ΄μ¤λ„ 1,000λ² νΈμ¶λλ‹¤.
  μ–΄λ“λ°”μ΄μ¤ `μ‹¤ν–‰ μΈμ¤ν„΄μ¤` λ¥Ό κ°€λ¦¬μΌ `Join Point` λΌκ³  ν•λ‹¤.

μ΅°μΈν¬μΈνΈλ” λ©”μ†λ“ νΈμ¶κ³Ό κ΄€λ ¨λ μ •λ³΄λ¥Ό λ” μ κ³µν•λ”λ°, `.` λ¥Ό μΉλ©΄ μ •λ³΄λ¥Ό λ³Ό μ μλ‹¤.
μΈμλ¥Ό μ·¨λ“ν•κ±°λ‚ ν΄λμ¤, λ©”μ†λ“ μ‹κ·Έλ‹μ²λ¥Ό μ·¨λ“ν•  μ μκ³ , μ†μ¤ μ„μΉλ“± μ—¬λ¬ μ •λ³΄λ¥Ό μ–»μ„ μ μλ”°.

```java
logger.info("Before Aspect - {} is called with arguments: {}", joinPoint, joinPoint.getArgs());
```

μ΄λ° μ½”λ“λ¥Ό λ„£μ–΄λ³΄λ©΄

```
2025-08-23T15:16:41.651+09:00  INFO 62421 --- [learn-springaop-13] [           main] c.i.l.a.LoggingAspect$$SpringCGLIB$$0    : Before Aspect - execution(int com.in28minutes.learn_springaop_13.business.BusinessService1.calculateMax()) is called with arguments: []
2025-08-23T15:16:41.653+09:00  INFO 62421 --- [learn-springaop-13] [           main] c.i.l.a.LoggingAspect$$SpringCGLIB$$0    : Before Aspect - execution(int[] com.in28minutes.learn_springaop_13.data.DateService1.retrieveData()) is called with arguments: []
```

μ΄λ ‡κ² `arguments` λ“¤λ„ ν™•μΈν•  μ μλ‹¤.

> β… κ°„λµ μ •λ¦¬
> advice - μ‹¤ν–‰ν•λ ¤λ” μ½”λ“
> pointcut - ν•΄λ‹Ή μ½”λ“λ¥Ό μ–Έμ  μ‹¤ν–‰ν•  κ²ƒμΈκ°€
> aspect - μ–΄λ“λ°”μ΄μ¤μ™€ ν¬μΈνΈμ»·μ μ΅°ν•©
> weaver - AOPλ¥Ό κµ¬ν„ν• ν”„λ μ„μ›ν¬
> joinpoint - μ–΄λ“λ°”μ΄μ¤μ μ‹¤ν–‰ μΈμ¤ν„΄μ¤
