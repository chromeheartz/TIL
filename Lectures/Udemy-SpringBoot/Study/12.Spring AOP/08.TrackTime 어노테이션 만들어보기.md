## Spring AOP

### 08. TrackTime μ–΄λ…Έν…μ΄μ… λ§λ“¤μ–΄λ³΄κΈ°

---

### π“ TrackTime

μ–΄λ–¤λ•μ—λ” νΉμ • λ©”μ†λ“λ¥Ό κ³¨λΌμ„ ν•΄λ‹Ή λ©”μ†λ“λ§ μ„±λ¥μ„ μΈ΅μ •ν•κ³  μ‹¶μ„ μλ„ μμ„κ²ƒμ΄λ‹¤.
μ΄λ΄ λ• μ–΄λ…Έν…μ΄μ…μ„ μƒμ„±ν•λ”κ²ƒ, μ–΄λ…Έν…μ΄μ…μΌλ΅ AOPλ¥Ό κµ¬ν„ν•  μ μλ‹¤λ” μ μ΄ κ½¤ λ„μ›€μ΄ λλ‹¤.

μΌλ‹¨ `calculateMax` λ©”μ†λ“μ μ‹¤ν–‰μ‹κ°„μ„ μ¬λ³΄κ³  μ‹¶λ‹¤.
`@TrackTime` μ΄λΌλ” μ–΄λ…Έν…μ΄μ…μ„ λ§λ“¤κ³  `cmd + 1` μ„ λ„λ¥΄κ² λλ©΄ μ΄κ±΄ μ΅΄μ¬ν•μ§€ μ•λ” μ–΄λ…Έν…μ΄μ…μ΄λΌμ„ `create annotation TrackTime` μ΄λΌλ” κµ¬λ¬Έμ΄ λ‚μ¤κ² λλ‹¤.

`annotation` μ΄λΌλ” `package` λ¥Ό λ§λ“¤μ–΄μ„ λ„£μ–΄μ£Όμ.

> μ—¬κΈ°μ„ μ¤‘μ”ν• 2κ°€μ§€λ” μ΄ μ–΄λ…Έν…μ΄μ…μ€ `λ°νƒ€μ„μ— μ‚¬μ©` ν•κ³  μ‹¶κ³ , μ–΄λ…Έν…μ΄μ…μ€ `λ©”μ†λ“λ¥Ό λ€μƒ` μΌλ΅λ§ ν•κ² μ‚¬μ©ν•κ³  μ‹¶λ‹¤.

μΌλ‹¨ `@Target` μ–΄λ…Έν…μ΄μ…μΌλ΅ νƒ€κ²μ„ λ©”μ†λ“λ΅ μ§€μ •ν•΄μ¤€λ‹¤.
`@Target(ElementType.METHOD)` κ·Έλ¦¬κ³  λ°νƒ€μ„μ— μ‹¤ν–‰ν•κΈΈ μ›ν•λ‹ `@Retention` μ„ μ¶”κ°€ν•΄μ„ μ΄ μ •λ³΄κ°€ λ°νƒ€μ„μ— μ κ³µλκ² ν•κΈ° μ„ν•΄ `RUNTIME` μ„ λ„£μ–΄μ¤€λ‹¤.

```java
package com.in28minutes.learn_springaop_13.annotation;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface TrackTime {

}
```

μ΄λ ‡κ² λ§λ“¤μ–΄λ†“μΌλ©΄ μ‹¤ν–‰ μ‹κ°„μ„ μΈ΅μ •ν•κ³  μ‹¶μ€ μ•„λ¬΄ λ©”μ†λ“μ— `TrackTime` μ–΄λ…Έν…μ΄μ…μ„ μ“Έ μλ„ μλ‹¤.
μ΄ μ–΄λ…Έν…μ΄μ…μ„ ν¬μΈνΈμ»·μΌλ΅λ„ μ‚¬μ©ν•  μ μλ”λ°,

```java
@Pointcut("@annotation(/learn-springaop-13/src/main/java/com/in28minutes/learn_springaop_13/annotation/TrackTime.java")
	public void trackTimeAnnotation() {}
```

μ΄λ ‡κ² λ§λ“¤μ–΄μ„ μ‚¬μ©ν•  μ μλ‹¤.
`PerformanceTrackingAspect` μ—μ„ λ¨λ“  λ©”μ†λ“ νΈμ¶μ„ μΈν„°μ…‰νΈν•λ”λ°

```java
@Around("com.in28minutes.learn_springaop_13.aspects.CommonPointcutConfig.businesAndDataPackageConfig()")
	@Around("com.in28minutes.learn_springaop_13.aspects.CommonPointcutConfig.trackTimeAnnotation()")
```

`TrackTimeAnnotation` μ„ λ„£μ–΄μ¤„ μ μλ‹¤.

> β… μƒν™©μ— λ”°λΌ μ΄λ ‡κ² μ–΄λ–¤ λ©”μ†λ“λ” λ΅κ·Έ μ¶λ ¥μ„ ν•΄μ£Όκ³  μ–΄λ–¤ κ±΄ λ³΄μ• κ΄€λ ¨ μ‘μ—…μ„ ν•΄μ£Όμ–΄μ•Ό ν•  λ•κ°€ μμ„ μ μλ”λ°, κ·Έλ° μƒν™©μ—μ„ `μ»¤μ¤ν…€ μ–΄λ…Έν…μ΄μ…` μ„ λ§λ“¤κ³  κ·Έλ° μ–΄λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄ `AOP` λ¥Ό κµ¬ν„ν•  μ μλ‹¤.
