## Spring AOP

### 03. AOP λ΅κΉ… μ• μ¤ν©νΈμ™€ ν¬μΈνΈμ»· λ§λ“¤κΈ°

---

### π“ AOP λ΅κΉ… μ• μ¤ν©νΈ / ν¬μΈνΈμ»·

μΌλ‹¨ `build.gradle` μ— ν•„μ”ν• μμ΅΄μ„±μ„ μ¶”κ°€ν•΄λ³΄μ
`Spring AOP / AspectJ` λ¥Ό μ„ν¬νΈ

```
implementation 'org.springframework.boot:spring-boot-starter-aop'
```

`refresh gradle` μ„ ν•΄μ£Όλ©΄ μ¶”κ°€κ°€ λλ‹¤.

μ΄μ  μ‹¤μ λ΅ AOP μ½”λ“ μ‘μ—…μ„ μ‹μ‘.

#### AOP μ½”λ“μ‘μ—…μ—μ„ λ¬΄μ—‡μ„ ν•΄μ•Ό ν•λ”κ°€?

![](https://velog.velcdn.com/images/bibiboy/post/9e4bbf17-8782-4caf-ae53-e8d48d0eedf3/image.png)

μ§€κΈκΉμ§€λ” `λΉ„μ¦λ‹μ¤ / λ°μ΄ν„°` μ΄ 2κ°μ λ μ΄μ–΄λ¥Ό λ§λ“¤μ—λ”λ°, μ΄μ   κ³µν†µλ μ½”λ“λ΅ `μ• μ¤ν©νΈ` λ΅ μ‘μ„±ν•  μ°¨λ΅€μ΄λ‹¤.

μΌλ‹¨ `λ΅κ·Έλ¥Ό μ¶λ ¥ν•λ” μ• μ¤ν©νΈ` λ¥Ό λ§λ“¤μ–΄λ³΄μ.
λΉ„μ¦λ‹μ¤ λ μ΄μ–΄μ™€ λ°μ΄ν„°λ μ΄μ–΄μ— μλ” λΉμ— ν¬ν•¨λλ” λ¨λ“  λ©”μ†λ“μ λ΅κ·Έλ¥Ό μ¶λ ¥ν• κ²ƒμ΄λ‹¤.

`new class` λ΅ `LoggingAspect` ν¨ν‚¤μ§€λ” `aspects` λ΅ λ§λ“ λ‹¤.
λ¨Όμ € μ΄ ν΄λμ¤κ°€ μ„¤μ • ν΄λμ¤μΈκ±Έ λ…μ‹ν•΄μ•Ό ν•λ‹¤. `AOP μ„¤μ •` μ

> β… λν• λ΅μ§μ„ κµ¬ν„ν•  λ©”μ†λ“λ¥Ό μ •μν•΄μ•Όν•λ‹¤. λ©”μ†λ“ νΈμ¶μ„ λ΅κ·Έλ΅ μ¶λ ¥ν•λ” κ²ƒμ„ λ§λ“¤μ—λ”λ°, μ΄ λ©”μ†λ“κ°€ μ–Έμ  νΈμ¶λΌμ•Ό ν•λ”μ§€λ¥Ό μ •μν•΄μ•Ό ν•λ‹¤. λΉ„μ¦λ‹μ¤ λ μ΄μ–΄ / λ°μ΄ν„° λ μ΄μ–΄ λΉμ—μ„ νΈμ¶λλ” λ©”μ†λ“ νΈμ¶μ„ μΈν„°μ…‰νΈν•΄μ•Όν•λ‹¤. κ·Έκ²ƒμ„ `ν¬μΈνΈμ»·` μ΄λΌλ” κ±Έλ΅ μ •μν•΄μ¤„κ²ƒμ΄λ‹¤.

λ¨Όμ € `@Configuration` μ„ μ„¤μ •ν•΄μ£Όκ³  λ‚μ„, AOP κ΄€λ ¨ μ„¤μ •μ΄λΌλ” κ²ƒμ„ λ…μ‹ν•΄μ£ΌκΈ° μ„ν•΄ `@Aspect` μ–΄λ…Έν…μ΄μ… λν• μ¶”κ°€ν•΄μ¤€λ‹¤.

`logger.info` λ΅ μ¶λ ¥ λ©”μ‹μ§€λ¥Ό λ§λ“¤μ–΄μ¤€λ‹¤.
μ΄λ• μ–΄λ–¤ μ •λ³΄κ°€ ν•„μ”ν•λ°, λ‘ κ°€μ§€ μ‘μ—…μ΄ ν•„μ”ν•λ‹¤.

#### `ν¬μΈνΈ μ»·` μ„ μ •μν•λ” κ²ƒμ΄κ³ , `μ–΄λ–¤ λ©”μ†λ“` λ¥Ό λ€μƒμΌλ΅ ν•λ”μ§€μ΄λ‹¤.

λ¨Όμ € `ν¬μΈνΈ μ»·` μ„ μ •μν• λ• `syntax` λ¥Ό μ£Όμν•΄μ•Όν•λ”λ°, μ΄ μ‹ νƒμ¤λ” νΉμ • ν¨ν‚¤μ§€μ— μ†ν• λ¨λ“  ν΄λμ¤μ λ©”μ†λ“λ¥Ό λ€μƒμΌλ΅ νΈμ¶μ„ μΈν„°μ…‰νΈ ν•κΈ° μ„ν• ν¬μΈνΈ μ»·μ΄λ‹¤
`execution(* PAKAGE.*.*(..))`

μΌλ‹¨ λΉ„μ¦λ‹μ¤ ν¨ν‚¤μ§€μ—μ„ λ°μƒν•λ” λ¨λ“  νΈμ¶μ„ μΈν„°μ…‰νΈν•΄λ³΄μ.
ν•΄λ‹Ή ν¨ν‚¤μ§€μ—μ„ μ°ν΄λ¦­ `Copy Qualifed Name` μ„ ν•΄μ„ ν¨ν‚¤μ§€ μ΄λ¦„μ„ λ³µμ‚¬ν•κ³ 
`@Pointcut("execution(* com.in28minutes.learn_springaop_13.business.*.*(..))")`
μ΄λ ‡κ² μ μ©ν•΄λ†“κ³  νΉμ •λ©”μ†λ“ μ‹¤ν–‰μ€ `joinPoint` λ¥Ό κ°€μ Έμ™€μ„ μ‚¬μ©ν•΄λ³΄μ.
μ¤‘κ΄„νΈ ν•μμ— `joinPoint` κ°€ μ¶λ ¥λλ„λ΅ ν•κ³ λ‚μ„

ν¬μΈνΈ μ»·μ„ `λ©”μ†λ“κ°€ νΈμ¶λκΈ° μ „` μ— μ‹¤ν–‰μ‹ν‚¬κ²ƒμ΄λ‹ `@Before` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄λ³΄μ.

```java
@Configuration
@Aspect
public class LoggingAspect {

	private Logger logger = LoggerFactory.getLogger(getClass());
	// PointCut
	@Before("execution(* com.in28minutes.learn_springaop_13.business.*.*(..))")
	public void logMethodCall(JoinPoint joinPoint) {
		logger.info("Before Aspect - Method is called - {}", joinPoint);
	}
}
```

μ΄λ ‡κ² ν•κ³  μ‹¤ν–‰ν•΄λ³΄λ©΄ `2025-08-23T14:57:27.725+09:00  INFO 44567 --- [learn-springaop-13] [           main] c.i.l.a.LoggingAspect$$SpringCGLIB$$0    : Before Aspect - Method is called - execution(int com.in28minutes.learn_springaop_13.business.BusinessService1.calculateMax())
`

λΌκ³  λ΅κ·Έκ°€ λ‚μ¤λ” κ²ƒμ„ λ³Ό μ μλ‹¤. `calculateMax` κ°€ νΈμ¶λκΈ° μ „μ— μΈν„°μ…‰νΈκ°€ κ°€λ¥ν•κ² λκ²ƒμ΄λ‹¤.
`data` λ΅ λ°”κΎΈκ³  μ‹¤ν–‰ν•΄λ³΄λ©΄
`2025-08-23T14:57:59.805+09:00  INFO 45055 --- [learn-springaop-13] [           main] c.i.l.a.LoggingAspect$$SpringCGLIB$$0    : Before Aspect - Method is called - execution(int[] com.in28minutes.learn_springaop_13.data.DateService1.retrieveData())
`

λ€μƒμ΄ λ°”λ€μ–΄μ„ μΈν„°μ…‰νΈ ν•κ²ƒμ„ λ³Ό μ μλ‹¤. ν¨ν‚¤μ§€ μ΄λ¦„λ§ λ°”κΏ”μ¤¬μ„ λΏμΈλ° μΈν„°μ…‰νΈν•λ” λ€μƒ λ©”μ†λ“λ¥Ό λ°”κΏ€ μ μλ‹¤.
λΉ„μ¦λ‹μ¤ ν¨ν‚¤μ§€λ“  λ°μ΄ν„° ν¨ν‚¤μ§€λ“  λ‹¤ μΈν„°μ…‰νΈ ν•κ³ μ‹¶λ‹¤λ©΄ `*.*.*(..))` μ΄λ°μ‹μΌλ΅ dataκ°€ μ•„λ‹λΌ \* μΌλ΅ λ„£μ–΄μ£Όλ©΄ λλ‹¤.
