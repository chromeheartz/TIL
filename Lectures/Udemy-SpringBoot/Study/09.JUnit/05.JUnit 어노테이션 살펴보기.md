## JUnit

### 05. JUnit μ–΄λ…Έν…μ΄μ… μ‚΄ν΄λ³΄κΈ°

---

### π“ JUnit μ–΄λ…Έν…μ΄μ… μ‚΄ν΄λ³΄κΈ°

`JUnit` μ—μ„λ” `@Test` μ–΄λ…Έν…μ΄μ… μ΄μ™Έμ—λ„ λ‡ κ°€μ§€ λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…λ„ μ§€μ›ν•λ‹¤.
`BeforeAll / BeforeEach / AfterAll / AfterEach` κ°™μ€ κ²ƒλ“¤μ΄ μλ‹¤.

#### μ΄λ° κ²ƒλ“¤μ΄ ν•„μ”ν• μ΄μ λ” λ¬΄μ—‡μ΄λ©° μ–΄λ–»κ² μ‚¬μ©ν• κΉ?

`MyBeforeAfterTest` λΌλ” μ΄λ¦„μΌλ΅ μƒ ν…μ¤νΈ μΌ€μ΄μ¤λ¥Ό λ§λ“¤μ—λ‹¤.

```java
class MyBeforeAfterTest {

	@Test
	void test1() {
		System.out.println("test1");
	}

	@Test
	void test2() {
		System.out.println("test2");
	}

	@Test
	void test3() {
		System.out.println("test3");
	}

}

```

λ§μ•½ μ΄λ° ν…μ¤νΈλ“¤μ΄ μμ„λ• `JUnit` ν”„λ μ„μ›ν¬κ°€ μ΄ μμ„ κ·Έλ€λ΅ μ‹¤ν–‰ν• κΉ? μ•„λ‹λ‹¤.
μ΄ μμ„ κ·Έλ€λ΅ μ‹¤ν–‰ν•λ¦¬λΌλ” λ³΄μ¥μ€ μ—†λ‹¤.
2λ¥Ό λ¨Όμ € μ‹¤ν–‰ν•κ³  1, 3 μ΄λ° μμ„λ΅ μ‹¤ν–‰ν•  μ μλ‹¤.

ν…μ¤νΈ μ „μ— λ¬΄μ–Έκ°€ ν•κ³ μ‹¶λ‹¤λ©΄ `JUnit` λ” λ‹¤λ¥Έ μ„ νƒμ§€λ¥Ό μ κ³µν•λ”λ°, κ·Έ μ„ νƒμ§€κ°€ μ–΄λ…Έν…μ΄μ…λ“¤μ΄ λ  κ²ƒμ΄λ‹¤.

- `@BeforeEach / @AfterEach`

```java
@BeforeEach
void beforeEach() {
	System.out.println("Before Each");
}
```

μ΄λ ‡κ²ν•κ³  μ‹¤ν–‰μ„ ν•΄λ³΄λ©΄,

```
Before Each
test1
Before Each
test2
Before Each
test3
```

μ΄λ°μ‹μΌλ΅ λ‚μ¤λ”λ°, λ¨λ“  ν…μ¤νΈ μ „μ— λ©”μ†λ“κ°€ μ‹¤ν–‰λλ” κ²ƒμ„ λ³Ό μ μλ‹¤. μ΄μ™€ μ μ‚¬ν•κ² `AfterEach` λ„ λ§λ“¤μ–΄λ³΄μ.

> β­οΈ `λ©”μ†λ“ μ„μΉ` λ” μ‚¬μ‹¤ μ¤‘μ”ν•μ§€ μ•λ‹¤. μ–΄λ…Έν…μ΄μ…μ΄ ν›¨μ”¬ μ¤‘μ”ν•λ‹¤

```
Before Each
test1
After Each
Before Each
test2
After Each
Before Each
test3
After Each
```

`AfterEach` λ” λ¨λ“  λ©”μ†λ“ μ‹¤ν–‰ ν›„μ— μ‹¤ν–‰λλ” κ²ƒμ„ λ³Ό μ μλ‹¤.

> λ”°λΌμ„ ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— μν–‰ν•΄μ•Όν•  μ„¤μ •μ΄ μλ‹¤λ©΄ `BeforeEach` λ¥Ό μ‚¬μ©ν•κ³  ν…μ¤νΈ ν›„μ— μ •λ¦¬κ°€ ν•„μ”ν•λ‹¤λ©΄ `AfterEach` λ©”μ†λ“μ—μ„ μν–‰ν•λ©΄ λλ‹¤.

- `@BeforeAll / @AfterAll`

`BeforeAll` μ΄λΌλ” λ©”μ†λ“λ„ `sysout` λ§ μ¶λ ¥ν•λ” λ©”μ†λ“λ¥Ό λ§λ“¤μ–΄λ³΄κ³  μ‹¤ν–‰ν•΄λ³΄λ©΄ μ¤λ¥κ°€ λ‚λ‹¤.

```
org.junit.platform.commons.JUnitException: @BeforeAll method 'void com.in28minutes.junit.MyBeforeAfterTest.beforeAll()' must be static unless the test class is annotated with @TestInstance(Lifecycle.PER_CLASS).
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1116)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
```

μ–΄λ–¤ μ΅°κ±΄μ„ μ¶©μ΅±ν•μ§€ μ•λ” ν• `BeforeAll` λ©”μ†λ“λ” μ •μ  λ©”μ†λ“μ—¬μ•Ό ν•λ‹¤.
λ€λ¶€λ¶„μ ν…μ¤νΈμ—μ„ `BeforeAll` λ©”μ†λ“λ” μ •μ μ΄μ—¬μ•Ό ν•λ‹¤. μ΄κ² μ¤‘μ”ν• μ΄μ λ” ν•΄λ‹Ή λ©”μ†λ“κ°€ β… `ν΄λμ¤ λ λ²¨` λ©”μ†λ“μ΄κΈ° λ•λ¬Έμ΄λ‹¤.

λ¨λ“  ν…μ¤νΈ μ΄μ „μ— μ‹¤ν–‰λκΈ° λ•λ¬Έμ— μ •μ μΌλ΅ μ„¤μ •ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

```java
// MyBeforeAfterTest.java
class MyBeforeAfterTest {

	@BeforeEach
	void beforeEach() {
		System.out.println("Before Each");
	}

	@AfterEach
	void afterEach() {
		System.out.println("After Each");
	}

	@BeforeAll
	static void beforeAll() {
		System.out.println("Before All");
	}

	@AfterAll
	static void afterAll() {
		System.out.println("After all");
	}

}

// κ²°κ³Ό
Before All
Before Each
test1
After Each
Before Each
test2
After Each
Before Each
test3
After Each
After all
```

> β… `BeforeAll` μ€ λ¨λ“  ν…μ¤νΈμ μ„¤μ •μ„ν•κ³ , `AfterAll` μ€ λ¨λ“  ν…μ¤νΈκ°€ λλ‚κ³  μ •λ¦¬ν•λ” μ©λ„λ΅ μ‚¬μ©ν•  μ μλ‹¤.
