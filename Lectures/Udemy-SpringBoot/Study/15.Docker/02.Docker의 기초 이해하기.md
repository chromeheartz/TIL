## Docker

### 02. Docker의 기초 이해하기

---

### 📌 Docker의 기초

![](https://velog.velcdn.com/images/bibiboy/post/779d3765-5083-443d-b91b-5b9da8d3da83/image.png)

Docker를 사용해서 앱을 빠르게 실행할 수 있었다.

#### 그럼 백그라운드에서는 어떤일이 일어날까?

백그라운드에서 일어나는 일에 대해 알아보기 전에 `Docker의 배포 프로세스` 에 대해 이해하는것이 필요하다.
Docker를 사용하면 배포 프로세스가 매우 간단해지며, 운영체제는 상관없다.

앱을 빌드하기 위해 사용하는 프로그래밍 언어 역시 상관없고, 하드웨어 역시 상관이 없다.

개발자는 `Docker` 이미지를 생성한다. 개발자가 앱에 대한 Docker이미지를 생성하고 나면 운영팀이 간단한 명령어로 실행할 수 있는데, `Docker이미지` 가 무엇을 포함하고 있는지는 문제 되지 않는다.

기본적으로 `Docker 이미지` 가 무엇을 포함하고 있는지에 관계 없이, Docker 이미지가 주어진 후에는 동일한 방식으로 실행할 수 있다.

#### 이 기능이 실제로 어떻게 작동하는지 살펴보자

`docker container ls` 를 입력한다.

```docker
CONTAINER ID   IMAGE                                      COMMAND                   CREATED          STATUS          PORTS                    NAMES
a63cbe1b621a   in28min/hello-world-python:0.0.1.RELEASE   "/bin/sh -c 'python …"   18 minutes ago   Up 18 minutes   0.0.0.0:5001->5000/tcp   lucid_goldstine
```

생성된 컨테이너가 실행중인데, 이를 중지하려면 `docker container stop` 을 입력하고 `NAMES` 에 있는 `ID` 를 넣어주면 된다.
이렇게 하고 다시 `localhost:5000` 을 확인해보면 앱이 다운된것을 볼 수 있다.

그럼 자바로 실행해보자.

```docker
docker run -d -p 5001:5000 in28min/hello-world-java:0.0.1.RELEASE
```

이 경우, 해당 이미지를 다운로드 하게 된다.
`in28min/hello-world-java` 에서 이미지를 풀링하는 것을 확인할 수 있는데, 여러 스레드 또는 데몬을 사용해서 이미지를 풀링하고있으며 `docker container ls` 로 확인해보면 자바 컨테이너가 실행중인것을 볼 수 있다.

이처럼 자바 / 파이썬 애플리케이션을 실행하는데 같은 명령어가 사용되는 것이다.
사실 여기서 docker container stop을 할때 ID를 다 입력하지 않고 앞 2자리만 넣어도 해당 두글자로 시작하는 컨테이너가 하나이기때문에 잘 중단이 되는것을 볼 수 있다.

`java` 를 `nodejs` 로 바꿔서 다시 이미지를 다운받아보자. `Node JS` 애플리케이션을 가질 수 있다.

> 이렇게 여기서 주목해야 할 점은 Docker이미지에 무엇이 있는지에 관계없이 개발자가 이미지를 생성하고나면 운영팀이 이미지를 같은 방식으로 실행할 수 있다는 것이다.
> 그저 이미지의 이름, 버전 등을 변경하기만 하면 된다.

#### Docker가 어떻게 이토록 쉽게 처리할 수 있을까?

`Docker 이미지` 가 작동하는 방식은, 우리가 실행하려고 하는 `Docker 이미지` 는 애플리케이션을 실행하는데 필요한 모든 것을 가지고 있다. `운영 체제 / 애플리케이션 런타임` 도 가지고 있고, 예를 들어 자바 애플리케이션이라면 `JDK` / 파이썬 애플리케이션이라면 `파이썬` / NodeJS애플리케이션이라면 `Node.js` 가 필요한데 이 모든 것이 `Docker 이미지` 에 있는 것이다.
애플리케이션의 코드와 의존성 또한 `Docker 이미지` 의 일부이다.

`Docker 이미지` 를 갖고 있다면 컨테이너를 어디서나 같은 방식으로 실행할 수 있는데, 로컬 머신 / 데이터 센터 / 클라우드에서도 가능하다.

중요한 것은 동일한 Docker이미지는 로컬머신 뿐만 아니라 어디서든 `Docker 런타임` 이라는 것을 설치하기만 하면 된다.
