## Mockito

### 04. Mocktio μ–΄λ…Έν…μ΄μ…

---

### π“ @Mock, @InjectMocks λ¥Ό μ΄μ©ν•΄ ν…μ¤νΈ λ‹¨μν™”ν•κΈ°

`Mock` μ„ μ΄μ©ν• ν…μ¤νΈλ¥Ό λ” μ‰½κ² λ§λ“¤ μ μλ‹¤.
`Mockito` μ–΄λ…Έν…μ΄μ…μ„ μ΄μ”ν•λ©΄ λλ‹¤.

- `@Mock`
  μ–΄λ–¤ ν΄λμ¤μ— λ€ν• `Mock` μ„ λ§λ“¤μ–΄μ•Ό ν• κΉ? ν„μ¬λ” `DataService` ν΄λμ¤μ΄λ‹¤.

```java
@Mock
private DataService dataServiceMock;

@InjectMocks
private SomeBusinessImpl businessImpl;
```

μ΄λ ‡κ² μ„ μ–Έν•΄λ†“κ³  `import` ν• λ’¤μ— `DataService` κ°€ μƒμ„±λλ©΄ μ΄κ±Έ `businessImpl` μ— μ£Όμ…ν•΄μ•Ό ν•λ‹¤. μƒμ„±λ `Mock` μ΄ λ¬΄μ—‡μ΄λ `SomeBusinessImpl` μ— μ£Όμ…ν•λ ¤κ³  ν• λ• `@InjectMocks` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

`Mock` μ΄ `λ‘ κ° / μ„Έ κ°` λ“±μ΄ λλ”λΌλ„ λ¨λ‘ μ£Όμ…λ κ²ƒμ΄λ‹¤.

```java
//		DataService dataServiceMock = mock(DataService.class);
//		SomeBusinessImpl businessImpl = new SomeBusinessImpl(dataServiceMock);
```

μ΄λ ‡κ²λ§ ν•λ”λΌλ„ κΈ°μ΅΄μ— μ“°λ μ½”λ“μ—μ„ `2μ¤„` μ΄ μ—†μ–΄μ§€κ³ , `Mock` μ„ μ„¤μ •ν•κ³  λ©”μ†λ“λ¥Ό `νΈμ¶` ν•λ” μ½”λ“λ§ λ‚¨κ² λλ‹¤.

μ΄μ  λ‹¤μ‹ μ‹¤ν–‰ν•΄λ³΄λ©΄ `Null ν¬μΈν„° μμ™Έ` κ°€ λ°μƒν•λ‹¤.
`dataServiceMock` μ΄ `Null` λ΅ λ“¤μ–΄μ¤λ‹ μ¦‰, μƒμ„±λμ§€ μ•λ”λ‹¤λ” κ²ƒμ΄λ‹¤.
π“ μ™λƒν•λ©΄ `Mockito` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ ¤λ©΄ `Mockito` ν™•μ¥μ„ μ‚¬μ©ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ΄λ‹¤.

`ExtendWith` μ–΄λ…Έν…μ΄μ…μ„ μ΄μ©ν•μ.
μ΄ μ–΄λ…Έν…μ΄μ…μ•μ— `Mockito` κ°€ μ κ³µν•λ” ν™•μ¥μΈ `MockkitoExtension.class` λ¥Ό λ„£μ–΄μ£Όλ©΄ ν™•μ¥μ„ μ‚¬μ©ν•κ² λμ–΄μ„ `Mock / InjectMock` μ΄ μ‹¤μ  Mock μΌλ΅ λ€μ²΄ λλ‹¤.

```java
// μµμΆ… μ½”λ“
package com.in28minutes.mockito.mockito_demo_10.business;

import com.in28minutes.mockito.mockito_demo_10.business.SomeBusinessImpl;


import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;

@ExtendWith(MockitoExtension.class)
class SomeBusinessImplMockTest {

	@Mock
	private DataService dataServiceMock;

	@InjectMocks
	private SomeBusinessImpl businessImpl;

	@Test
	void findTheGreatestFromAllData_basicScenario() {
//		DataService dataServiceMock = mock(DataService.class);
		when(dataServiceMock.retrieveAllData()).thenReturn(new int[] {25, 15, 5});
//		SomeBusinessImpl businessImpl = new SomeBusinessImpl(dataServiceMock);
		assertEquals(25, businessImpl.findTheGreatestFromAllData());
	}

	@Test
	void findTheGreatestFromAllData_OneValue() {
		when(dataServiceMock.retrieveAllData()).thenReturn(new int[] {30});
		assertEquals(25, businessImpl.findTheGreatestFromAllData());
	}

}
```

λΉ„μ¦λ‹μ¤ κµ¬ν„ ν΄λμ¤μ— `Mock` μ΄ 5κ°μΌμ§€λΌλ„ `Mock` μ„ μƒμ„±ν•κ³  κ°’μ„ λ°ν™μ‹ν‚¨ λ‹¤μ `λΉ„μ¦λ‹μ¤ λ΅μ§` μ„ ν…μ¤νΈν•κΈ°λ§ ν•λ©΄ λλ‹¤.
μ΄λ ‡κ² μ–΄λ…Έν…μ΄μ…λ“¤μ„ μ‚¬μ©ν•΄μ„ `Mockito` μ½”λ“λ¥Ό λ” λ‹¨μν™” ν•  μ μλ‹¤.``
