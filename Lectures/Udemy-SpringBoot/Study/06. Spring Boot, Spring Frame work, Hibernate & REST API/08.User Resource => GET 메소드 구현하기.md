## Spring Boot, Spring Frame work, Hibernate / REST API

### 08. User Resource => GET ë©”ì†Œë“œ êµ¬í˜„í•˜ê¸°

---

### ğŸ“Œ User Resource / GET

ì‚¬ìš©ì ê´€ë ¨ REST APIë¥¼ ë§Œë“¤ì–´ ë³´ì.
ì¡°íšŒ ëŒ€ìƒì€ ëª¨ë“  ì‚¬ìš©ìì´ê³  ìš”ì²­ì€ `/users` ë¡œ ë³´ë‚¼ê²ƒì´ë‹¤.

`UserResource.java` ë¥¼ ë§Œë“¤ì–´ì„œ `@RestController` ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
ì—¬ê¸°ì„œ `ëª¨ë“  ì‚¬ìš©ìë¥¼ ì¡°íšŒ` í•˜ëŠ” ì²« ë²ˆì§¸ REST APIë¥¼ ë§Œë“¤ì.
ë©”ì†Œë“œëŠ” í¼ë¸”ë¦­ìœ¼ë¡œ ë°˜í™˜ê°’ì€ ì‚¬ìš©ì ì •ë³´ ëª©ë¡ì´ë‹ˆ `List<User>` ê°€ ëœë‹¤. `retrieveAllUsers` ë¼ëŠ” ë©”ì†Œë“œë¥¼ êµ¬í˜„í• ê±´ë°, ì •ë³´ëŠ” `UserDaoService` ì—ì„œ ì–»ì–´ì˜¨ë‹¤ ì´ëŠ” `spring` ì—ì„œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì˜¤í†  ì™€ì´ì–´ë§ì„ í•´ì¤€ë‹¤.

```
@RestController
public class UserResource {

	private UserDaoService service;

	public UserResource(UserDaoService service) {
		this.service = service;
	}

	// GET all
	@GetMapping("/users")
	public List<User> retrieveAllUsers() {
		return service.findAll();
	}
}
```

ì´ë ‡ê²Œ ê°„ë‹¨íˆ í•´ì£¼ê²Œ í•˜ë©´ ëœë‹¤.

![Image](https://github.com/user-attachments/assets/262631dc-c4bc-4ffe-994f-80a0364604af)

ì—¬ê¸°ì„œ ë¬´ìŠ¨ì¼ì´ ì¼ì–´ë‚˜ëƒë©´ `localhost:8080/users` ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ í•´ë‹¹ ìš”ì²­ì€ `UserDaoService` ë¡œ ê°„ë‹¤ìŒ ê±°ê¸°ì—ì„œ ëª¨ë“  ì‚¬ìš©ì ì •ë³´ë¥¼ ë°˜í™˜í•˜ê³  ê·¸ê±¸ `UserResource` ì—ì„œ ë°›ì•„ì„œ `JSON` ìœ¼ë¡œ ë°˜í™˜í•˜ê²Œ ë˜ëŠ”ê²ƒì´ë‹¤.

#### ìƒì„¸ API

ì´ì œ ëª…ì‹œëœ ì‚¬ìš©ìì˜ ì •ë³´ë§Œ ì¡°íšŒí•˜ëŠ” APIë¥¼ ë§Œë“¤ì–´ë³´ì.
`path variable` ì„ ì‚¬ìš©í•´ì„œ `id` ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

```java
// UserDaoService
public User findOne(int id) {
	Predicate<? super User> predicate = user -> user.getId().equals(id);
	return users.stream().filter(predicate).findFirst().get();
}

// GET path
@GetMapping("/users/{id}")
public User retrieveUser(@PathVariable Integer id ) {
	return service.findOne(id);
}
```

![Image](https://github.com/user-attachments/assets/bd543375-0561-4f22-bbee-1d58d272480c)

ì´ë²ˆì— ëˆˆì—¬ê²¨ ë³¼ê²ƒì€ `findOne` ì—ì„œ `í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°` ì„ ì‚¬ìš©í•œê²ƒì´ë‹¤. `predicate` ëŠ” ì‚¬ìš©ìì˜ ë¬´ì–¸ê°€ë¥¼ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ ê±°ì¹˜ëŠ”ë° ì´ êµ¬ë¬¸ì€ ëŒë‹¤ì‹ì„ ìƒì„±í•œë‹¤. `->` ì´ ë¶€ë¶„.
ì‚¬ìš©ìì˜ ì•„ì´ë””ê°€ ì¸ìˆ˜ë‘ ê°™ì€ì§€ í™•ì¸í•´ì•¼í•˜ë‹ˆ `getId` ë¥¼ í˜¸ì¶œí•˜ê³ , ë‹¤ìŒ `equals` ë¡œ ë¹„êµ.
ê·¸ ë‹¤ìŒì— í•´ì•¼í•˜ëŠ”ê±´ í•´ë‹¹í•˜ëŠ” ì•„ì´ë”” ê°’ì— ê±¸ëŸ¬ì§„ ê°’ì„ `return` í•´ì¤€ë‹¤.

`List` ë¥¼ ë°›ì•„ì„œ Streamìœ¼ë¡œ ë³€í™˜í•œ ë’¤ `predicate` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë¥¼ í•˜ëŠ” ê²ƒ ë¿ì´ë‹¤.
`predicate` ê°€ í•˜ëŠ” ê²ƒì€ ì‚¬ìš©ìì˜ ì•„ì´ë”” ê°’ì´ ì „ë‹¬ëœ ì¸ìˆ˜ì™€ ê°™ì€ì§€ë§Œ í™•ì¸í•˜ëŠ” ê²ƒ

> **predicate ì°¸ê³ ê¸€** ğŸ‘‰ [`predicate ì°¸ê³ ê¸€`]

[`predicate ì°¸ê³ ê¸€`]: https://yeonyeon.tistory.com/200

![Image](https://github.com/user-attachments/assets/745010bd-41a2-44af-92c4-f33902e6248e)

ì´ë ‡ê²Œ í•˜ê³  êµ¬í˜„í•œ í•¨ìˆ˜ë¥¼ REST APIì—ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
