## Spring Boot, Spring Frame work, Hibernate / REST API

### 26. User ì—”í„°í‹° ë° í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±í•˜ê¸°

---

### ğŸ“Œ User ì—”í„°í‹°

`User` í´ë˜ìŠ¤ë¥¼ ìœ„í•œ ì—”í„°í‹°ë¶€í„° ìƒì„±í• ê²ƒì´ë‹¤.
ê¸°ì¡´ì— ë§Œë“¤ì—ˆë˜ `User` í´ë˜ìŠ¤ë¥¼ JPAê°€ ê´€ë¦¬í•˜ê²Œ í•´ì£¼ë ¤ë©´ `@Entity` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.
ë˜í•œ `@Id` ë¥¼ ì¶”ê°€í•´ì„œ `id` í•„ë“œëŠ” ì‹ë³„ìì´ê²Œ í•œë‹¤. ë˜í•œ `@GeneratedValue` ë¥¼ ë„£ì–´ì£¼ì–´ì„œ idê°’ì´ ìƒì„±ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

```
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "create table [*]user (birth_date date, id integer not null, name varchar(255), primary key (id))"; expected "identifier"; SQL statement:
```

ë¡œê·¸ë¥¼ ë³´ë©´ ì´ëŸ° ì˜¤ë¥˜ê°€ ìˆëŠ”ë° `SQL` ë¬¸ì— ë¬¸ë²•ì  ì˜¤ë¥˜ê°€ ìˆë‹¤. `identifier`ê°€ ì™€ì•¼í•œë‹¤.
ì™œ ì´ëŸ°ë¬¸ì œê°€ ìƒê¸°ëƒë©´ `h2` ì—ì„œëŠ” `user` ê°€ í‚¤ì›Œë“œì´ê¸° ë•Œë¬¸ì— `@Entity(name="user_details")` ì²˜ëŸ¼ ë°”ê¾¸ì–´ì¤€ë‹¤.

`2025-03-28T15:54:27.535+09:00  INFO 92032 --- [restful-web-services] [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn50: url=jdbc:h2:mem:fdb2d491-8236-4e7f-b7e5-cc14654b050f user=SA`

ì´ëŸ°ì‹ìœ¼ë¡œ `ë™ì  URL` ì€ ì“°ì§€ ì•Šì„ê²ƒì´ë‹¤. `ì •ì  URL` ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `application.properties` ì— `spring.datasource.url=jdbc:h2:mem:testdb` ë¥¼ ì…ë ¥í•´ì¤€ë‹¤

ì´ë ‡ê²Œ í•˜ë©´ `localhost:8080/h2-console` ë¡œ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤. `JDBC URL` ì´ ë‚´ê°€ ì„¤ì •í•œê²ƒê³¼ ê°™ë‹¤ë©´ `connect` ë¡œ ì´ì–´ì¤€ë‹¤. ì—°ê²°í•˜ê³ ë‚˜ì„œ ë³´ë©´ ë°”ë¡œ `USER_DETAILS` í…Œì´ë¸”ì´ ìƒê¸´ë‹¤.
í•˜ì§€ë§Œ `SELECT * FROM USER_DETAILS` ë¥¼ í•˜ë©´ ì•„ë¬´ëŸ° ì„¸ë¶€ì •ë³´ê°€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤.

```sql
intert into user_details(id, birth_date, name)
values(1001, current_date(), 'Bibi');
```

`data.sql` ì„ `resources` ì— ë§Œë“¤ì–´ë³´ëŠ”ë° ì˜¤ë¥˜ê°€ ë‚œë‹¤. ì´ìœ ëŠ” `h2` ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ì´ ìƒì„±ë˜ê¸° ì „ì— `data.sql` ì´ ë¨¼ì € ì‹¤í–‰í•´ì„œ ê·¸ë ‡ë‹¤.
`spring.jpa.defer-datasource-initialization=true`
application.propertiesì— í•´ë‹¹ êµ¬ë¬¸ì„ ë„£ì–´ì£¼ê²Œ ë˜ë©´
![ì—…ë¡œë“œì¤‘..](blob:https://velog.io/72ddb105-cda6-4496-a5fb-92588fe5d07e)
ì‚¬ìš©ìê°€ ì œëŒ€ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
