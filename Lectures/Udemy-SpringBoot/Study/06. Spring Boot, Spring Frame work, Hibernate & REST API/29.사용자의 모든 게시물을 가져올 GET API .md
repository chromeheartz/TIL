## Spring Boot, Spring Frame work, Hibernate / REST API

### 29. ì‚¬ìš©ìì˜ ëª¨ë“  ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¬ GET API

---

### ğŸ“Œ ì‚¬ìš©ìì˜ ëª¨ë“  ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¬ API

`URL` ì€ `/users/posts` ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë ê²ƒì´ë‹¤.
`UserJpaResource` ì—ì„œ `/jpa/users/{id}/posts` ë¡œ ì‘ì„±í•´ì„œ ì§„í–‰í•´ë³´ì.

ì¼ë‹¨ `id` ê°’ì„ ë°›ì•„ì™€ì„œ ì‚¬ìš©ìë¥¼ ì°¾ì•„ì•¼ í•˜ë‹ˆ `repository.findbyId()` ë¥¼ í˜¸ì¶œí•˜ê³  ì‚¬ìš©ìê°€ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.

userê°€ ì¡´ì¬í•˜ë©´ í•´ë‹¹ ì‚¬ìš©ìì™€ ê´€ë ¨ëœ ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.
ë”°ë¼ì„œ `User í´ë˜ìŠ¤` ë¥¼ ë“¤ì–´ê°€ì„œ ë³´ë©´ `getter / setter` ê°€ ì—†ê¸° ë•Œë¬¸ì— ë°”ë¡œ ìƒì„±í•´ì„œ ë§Œë“¤ì–´ì¤€ë‹¤.

```
public List<Post> getPosts() {
	return posts;
}

public void setPosts(List<Post> posts) {
	this.posts = posts;
}
```

ì´í›„ì— `user.get().getPosts()` ë¥¼ ì…ë ¥í•œ í›„ì— ë°˜í™˜í•´ì¤€ë‹¤.

<img width="611" alt="Image" src="https://github.com/user-attachments/assets/048a93cc-3449-4d56-9d15-6c5692e5c9de" />

ìµœì¢… ì½”ë“œ

```
// UserJpaResource.java
@GetMapping("/jpa/users/{id}/posts")
public List<Post> retrievePostsForUser(@PathVariable Integer id ) {
	Optional<User> user = repository.findById(id);
	if (user.isEmpty()) {
		throw new UserNotFoundException("id:" + id);
	}

	return user.get().getPosts();
}
```
