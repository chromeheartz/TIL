## Spring Boot, Spring Frame work, Hibernate / REST API

### 20. REST APIì˜ ë²„ì „ ê´€ë¦¬ - ìš”ì²­ ë§¤ê°œë³€ìˆ˜, í—¤ë”, ì½˜í…ì¸  í˜‘ìƒ

---

### ğŸ“Œ ìš”ì²­ ë§¤ê°œë³€ìˆ˜ ë²„ì „ ê´€ë¦¬

ì†Œë¹„ìëŠ” `ìš”ì²­ ë§¤ê°œë³€ìˆ˜` ë¡œ ë²„ì „ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. pathëŠ” ê¸°ì¡´ì— í–ˆë˜ `v1 / v2` ê°€ ë“¤ì–´ê°€ìˆëŠ” ê°’ì´ ì•„ë‹Œ `/person` ìœ¼ë¡œë§Œ ë§Œë“ ë‹¤. ë˜í•œ `params` ë¥¼ ë„£ì–´ì£¼ì–´ì„œ `version=1` ê°™ì´ ìš”ì²­ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆë‹¤.

ì´ì™€ ë§ˆì°¬ê°€ì§€ë¡œ `version2` ë˜í•œ `params` ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```java
@GetMapping(path = "/person", params="version=1")
public PersonV1 getFirstVersionOfPersonRequestParameter() {
	return new PersonV1("Bucky Barnes");
}

@GetMapping(path = "/person", params="version=2")
public PersonV2 getSecondVersionOfPersonRequestParameter() {
	return new PersonV2(new Name("Bucky", "Barnes"));
}
```

ì´ë ‡ê²Œ í•˜ê²Œë˜ë©´ `localhost:8080/person?version=1` ê°™ì€ URLë¡œ ìš”ì²­í•˜ê²Œ ë˜ë©´ `v1` ì„ ë°˜í™˜í•˜ê³  `version=2` ë¡œ í•´ì£¼ê²Œë˜ë©´ `v2` ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="513" alt="Image" src="https://github.com/user-attachments/assets/89154d56-3488-43ff-ae93-466bbeb7f72b" />
<img width="454" alt="Image" src="https://github.com/user-attachments/assets/5ae7ffcf-8541-4ce3-bf01-35b494896f18" />

### ğŸ“Œ ì‚¬ìš©ì ì •ì˜ í—¤ë” ë²„ì „ ê´€ë¦¬

API ì†Œë¹„ìê°€ v1ì„ ì›í•˜ëŠ” ê²½ìš° `request header` ì¸ `X-API-VERSION=1` ì„ ì „ì†¡í•  ìˆ˜ ìˆëŠ”ë°, 2ì¼ê²½ìš°ì—ëŠ” `X-API-VERSION=2` ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.
`Spring MVC` ë¥¼ í†µí•´ ê°„í¸í•˜ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
@GetMapping(path = "/person/header", headers = "X-API-VERSION=1")
public PersonV1 getFirstVersionOfPersonRequestHeader() {
	return new PersonV1("Bucky Barnes");
}

@GetMapping(path = "/person/header", headers = "X-API-VERSION=2")
public PersonV2 getSecondVersionOfPersonRequestHeader() {
	return new PersonV2(new Name("Bucky", "Barnes"));
}
```

ì´ë ‡ê²Œ ì‘ì„±í•œ í›„ì— í—¤ë” ì´ë¦„ìœ¼ë¡œ `X-API-VERSION` ì— `1` ì„ ë„£ì–´ì£¼ë©´ `v1` ì˜ ì‘ë‹µì„ ë°›ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

<img width="815" alt="Image" src="https://github.com/user-attachments/assets/46f6bdfb-803a-472a-905f-3cb1fb5a5079" />

### ğŸ“Œ ì½˜í…ì¸  í˜‘ìƒ

`content negotiation` ì€ `Accept Header / Accept-Language` í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–ˆëŠ”ë°, ë™ì¼í•œ í—¤ë”ë¥¼ ë²„ì „ ê´€ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì†Œë¹„ìê°€ `v1` ì— ì—‘ì„¸ìŠ¤í•˜ë ¤ëŠ” ê²½ìš°, ì´ê²ƒì„ `Accept Header` ì— ì…ë ¥í•˜ê³ , `v2` ë¥¼ ì›í•˜ë©´ `v2` ë¥¼ ë„£ì–´ì£¼ë©´ ëœë‹¤.

```java
@GetMapping(path = "/person/accept", produces = "application/vnd.company.app-v1+json")
public PersonV1 getFirstVersionOfPersonAcceptHeader() {
	return new PersonV1("Bucky Barnes");
}

@GetMapping(path = "/person/accept", produces = "application/vnd.company.app-v2+json")
public PersonV2 getSecondVersionOfPersonAcceptHeader() {
	return new PersonV2(new Name("Bucky", "Barnes"));
}
```

<img width="850" alt="Image" src="https://github.com/user-attachments/assets/81c54d67-005c-4345-99e2-e40b638551f3" />

ì´ëŸ°ì‹ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•´ë‚¼ ìˆ˜ ìˆë‹¤.

#### ğŸ“ ì •ë¦¬

ì´ëŸ°ì‹ìœ¼ë¡œ `REST API` ì˜ ë²„ì „ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ì˜µì…˜ì´ ìˆë‹¤.

**ê·¸ë ‡ë‹¤ë©´ ì¶”ì²œë˜ëŠ” ë°©ì‹ì€ ë¬´ì—‡ì¼ê¹Œ?**

ì¼ë‹¨ ë²„ì „ê´€ë¦¬ì˜ ë°©ë²•ì„ ê²°ì •í•  ë•Œ ê³ ë ¤í•´ì•¼í•  ì—¬ëŸ¬ ìš”ì¸ì´ ìˆë‹¤.

1. `URI Pollution` - `URI / ë§¤ê°œë³€ìˆ˜` ë²„ì „ ê´€ë¦¬ë¥¼ í•  ë•Œ ìƒˆ ë²„ì „ì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ URLì„ ìƒì„±í•˜ëŠ”ë°, ë”°ë¼ì„œ ì´ ë‘ê°€ì§€ ë²„ì „ìœ¼ë¡œ ê´€ë¦¬í•  ê²½ìš°ì—ëŠ” `URL Pollution` ì´ ìƒë‹¹íˆ ë§ì´ ë°œìƒí•œë‹¤. í•˜ì§€ë§Œ `í—¤ë” / ë¯¸ë””ì–´ ìœ í˜•` ì„ ì‚¬ìš©í•˜ê²Œë˜ë©´ ë™ì¼í•œ URLì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì–‘ì´ ì ë‹¤.

2. `HTTP í—¤ë”ì˜ ì˜¤ìš©` - `HTTP í—¤ë”` ë¥¼ ì‚¬ì‹¤ìƒ ë²„ì „ ê´€ë¦¬ ìš©ë„ë¡œ ì‚¬ìš©í•´ì„œëŠ” ì•ˆëœë‹¤. ë”°ë¼ì„œ `í—¤ë” / ë¯¸ë””ì–´ ìœ í˜•` ì˜ ê²½ìš°ì—ëŠ” HTTP í—¤ë”ë¥¼ ì˜¤ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤.

3. `ìºì‹±` - ìºì‹±ì€ ì¼ë°˜ì ìœ¼ë¡œ `URL` ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ”ë°, `í—¤ë” / ë¯¸ë””ì–´ ìœ í˜•` ì˜ ê²½ìš°ì—ëŠ” ë‹¤ë¥¸ ë²„ì „ì„ ì‚¬ìš©í•˜ì§€ë§Œ ë‚˜ë¨¸ì§€ëŠ” ë™ì¼í•œ URLì„ ì“´ë‹¤.
   ë”°ë¼ì„œ URLê¸°ë°˜ìœ¼ë¡œ ìºì‹±ì„ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ìºì‹±ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— í—¤ë”ë¥¼ ì‚´í´ë³´ì•„ì•¼ í•œë‹¤.

4. `ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ì§€` - `URI / ìš”ì²­ ë§¤ê°œë³€ìˆ˜` ì˜ ê²½ìš° ë¸Œë¼ìš°ì €ì—ì„œ ê°„í¸í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì°¨ì´ëŠ” `URL` ì— ìˆê¸° ë•Œë¬¸ì—. í•˜ì§€ë§Œ `í—¤ë” / ë¯¸ë””ì–´ ìœ í˜•` ì—ì„œëŠ” `REST API Client` ë¥¼ ì‚¬ìš©í•´ì„œ í—¤ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

5. `API ë¬¸ì„œ` - `URI / ë§¤ê°œ ë³€ìˆ˜` ëŠ” APIë¬¸ì„œë¥¼ ìƒì„±í•˜ê¸° ì‰½ë‹¤. ë‘ ë²„ì „ì˜ URLì´ ë‹¤ë¥´ê¸° ë•Œë¬¸.
   API ë¬¸ì„œ ìƒì„±íˆ´ì€ ë³´í†µ `í—¤ë”` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ë¬¸ì„œì˜ ìƒì„±ì„ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆì–´, ë²„ì „ ê´€ë¦¬ì— ëŒ€í•œ ë¬¸ì„œ ìƒì„±ì´ ê¹Œë‹¤ë¡œì›Œ ì§ˆ ìˆ˜ ìˆë‹¤.

> ì‚¬ì‹¤ ë²„ì „ ê´€ë¦¬ì— ëŒ€í•´ ì™„ë²½í•œ ì†”ë£¨ì…˜ì€ ì—†ë‹¤.
> `URL - Twitter / ìš”ì²­ ë§¤ê°œ ë³€ìˆ˜ - Amazon / í—¤ë” ë²„ì „ - Microsoft / ë¯¸ë””ì–´ ìœ í˜• - Github` ì´ì²˜ëŸ¼ ì—¬ëŸ¬ ê¸°ì—…ì—ì„œ ê°ê° ë‹¤ë¥¸ ë²„ì „ê´€ë¦¬ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
> ì¼ë‹¨ ë²„ì „ ê´€ë¦¬ê°€ í•„ìš”í•˜ê¸° ì „ì— ë²„ì „ ê´€ë¦¬ì— ëŒ€í•´ ê³ ë ¤í•˜ê³ , ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í• ì§€ ì¥,ë‹¨ì ì„ ì˜ ë¹„êµí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
