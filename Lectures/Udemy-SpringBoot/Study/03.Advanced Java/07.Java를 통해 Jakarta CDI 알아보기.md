## Advanced Java

### 07. Javaλ¥Ό ν†µν•΄ Jakarta CDI μ•μ•„λ³΄κΈ°

---

### π“ Jakarta CDI

<img width="1084" alt="Image" src="https://github.com/user-attachments/assets/fa0e201b-3e58-463c-bede-bdc333eacb9a" />

`CDI` λΌκ³ λ„ λ¶λ¦¬λ” `Jakarta Contexts and Dependency Injection` μ— λ€ν•΄ μ‚΄ν΄λ³΄μ.
`CDI` λ” κ·κ²©μ΄κ³ , μΈν„°νμ΄μ¤μ΄λ‹¤. κµ¬ν„μ΄ μ—†κ³  `Spring` μ—μ„ `CDI` λ¥Ό κµ¬ν„ν•λ‹¤. `CDI` μ—λ” `API annotation` μ΄ λ‡ κ°€μ§€ μ •μ λμ–΄μλ‹¤.

- `Inject`
- `Named`
- `Qualifier`
- `Scope`
- `SingleTon`

`Inject` λ” `Autowired` μ™€ λΉ„μ·ν•κ³ , `Named` λ” `Component` μ™€ λΉ„μ·ν•λ‹¤. κ·Έλ¦¬κ³  λ‚λ¨Έμ§€ 3κ°λ” μ΄λ¦„μ΄ κ°™μ€ `spring annotation` κ³Ό ν΅μ‚¬ν•λ‹¤.

#### CDIλ¥Ό μ‚¬μ©ν• μμ‹

`CDI` λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ `pom.xml` μ— μμ΅΄μ„±μ„ μ¶”κ°€ν•΄μ•Ό ν•λ‹¤.

```xml
<dependency>
  <groupId>jakarta.inject</groupId>
  <artifactId>jakarta.inject-api</artifactId>
  <version>2.0.1</version>
</dependency>
```

μμ‹λ¥Ό λ§λ“¤μ–΄μ„ `BusinessService` λΌλ” ν΄λμ¤λ¥Ό λ§λ“¤κ³  `κΈ°λ³Έ μ„Έν„° / κ²ν„°` λ¥Ό λ§λ“¤μ. λν• μ„Έν„° μ£Όμ…μ„ μ„ν•΄ `@Autowired` λ¥Ό μ‘μ„±ν•κ³  `sysout` μΌλ΅ Setter Injectionμ΄ μν–‰λκ±Έ ν™•μΈ.

```java
@Component
class BusinessService {
	private DataService dataService;

	@Autowired
	public DataService getDataService() {
		System.out.println("Setter Injection");
		return dataService;
	}

	public void setDataService(DataService dataService) {
		this.dataService = dataService;
	}


}

@Component
class DataService {

}
```

μ΄λ ‡κ² ν•λ©΄ `sysout` μ΄ μ μΌ μƒλ‹¨μ— μν–‰λλ”κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.
`System.out.println(context.getBean(BusinessService.class).getDataService());` λ΅ μ¶λ ¥μ‹μΌλ³΄λ©΄ `null` μ΄ λ‚μ¤λ” κ²ƒμ„ λ³Ό μ μλ”λ°, μ΄ μ΄μ λ” `Autowired` κ°€ `get method` κ°€ μ•„λ‹ `set method` μ— μμ–΄μ•Όν•΄μ„μ΄λ‹¤.
μ„Έν„° μ£Όμ…μ„ μ„λ΅ μ®κΈ°κ³  μ‹¤ν–‰ν•΄λ³΄λ‹ μ λ€λ΅ μν–‰λλ”κ²ƒμ„ λ³Ό μ μλ‹¤.

![Image](https://github.com/user-attachments/assets/a8c0fcf7-3e15-41de-b2e4-638bc608d654)

#### CDIλ” λ€μ²΄ λ°©μ‹

`@Component` λ€μ‹ μ— `@Named` λ¥Ό μ‚¬μ©ν•λ‹¤κ³  μƒκ°ν•λ©΄ λλ‹¤.
`@Autowired` λ€μ‹ μ— `@Inject` λ¥Ό μ‚¬μ©ν•λ©΄ λκ³ , μ‹¤ν–‰ν•λ©΄ `dataService` κ°€ μλ™ μ—°κ²°λκ³  μ„Έν„° μ£Όμ…λ„ μν–‰λλ” κ²ƒμ„ λ³Ό μ μλ‹¤.

> β… `CDI annotation` μ΄ `Spring annotation` μ„ λ€μ²΄ν•  μ μλ‹¤λ” κ²ƒμ„ μ•μ•„λ΄¤λ‹¤. μ–΄λ…Έν…μ΄μ… κ·Έλ£Ήμ„ μ •μν• κ·κ²©μ΄ `CDI` μΈλ°, μμ΅΄μ„± μ£Όμ…μ—λ„ μ΄ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•  μ μλ‹¤.
