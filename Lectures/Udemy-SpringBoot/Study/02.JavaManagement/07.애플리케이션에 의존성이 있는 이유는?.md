## Java Management

### 07. μ• ν”λ¦¬μΌ€μ΄μ…μ— μμ΅΄μ„±μ΄ μλ” μ΄μ λ”?

---

### π“ μμ΅΄μ„±μ΄ μλ” μ΄μ λ” λ¬΄μ—‡μΌκΉ?

μ™ μΌλ° μΌλ° μ• ν”λ¦¬μΌ€μ΄μ…μ— λ§μ€ μμ΅΄μ„±μ„ κ°–κ³  μμ„κΉ?
ν„μ¬ μμ λ΅ ν–λ μ•±μ—μ„λ” ν΄λμ¤κ°€ κ±°μ μ—†μ§€λ§ μ‹¤μ  μ•±μ—μ„λ” ν›¨μ”¬ λ” λ³µμ΅ν•λ‹¤.
λ μ΄μ–΄λ” `μ›Ή λ μ΄μ–΄ / λΉ„μ¦λ‹μ¤ λ μ΄μ–΄ / λ°μ΄ν„° λ μ΄μ–΄` κ°€ μλ‹¤.
μ›Ή λ μ΄μ–΄μ ν΄λμ¤λ” `λΉ„μ¦λ‹μ¤ λ μ΄μ–΄` μ ν΄λμ¤μ—κ² λ§μ„ κ±Έ μ μκ³ , λΉ„μ¦λ‹μ¤ λ μ΄μ–΄μ ν΄λμ¤λ” `λ°μ΄ν„° λ μ΄μ–΄` ν΄λμ¤μ—κ² λ§μ„ κ±΄λ‹¤κ³  ν•΄λ³΄μ.

μ΄λ ‡κ² λλ‹¤λ©΄ `λ°μ΄ν„°` λ” `λΉ„μ¦λ‹μ¤` μ μμ΅΄μ„±μ΄ λκ³ , λ¨λ“  μ•±μ—λ” μ΄λ¬ν• μμ΅΄μ„±μ΄ μμ²κ°κ°€ μλ‹¤. `Spring` μ„ μ‚¬μ©ν•λ©΄ κ°μ²΄κ°€ μ•„λ‹ `μμ΅΄μ„± / μ™€μ΄μ–΄λ§` μ— μ§‘μ¤‘ν•  μ μλ‹¤. λ”°λΌμ„ `λΉ„μ¦λ‹μ¤ λ΅μ§` μ— μ§‘μ¤‘ν•  μ μλ‹¤.

`Spring` μ€ `κ°μ²΄μ μƒλ… μ£ΌκΈ°` λ¥Ό κ΄€λ¦¬ν•λ”λ°, `@Component` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄μ„ μ»΄ν¬λ„νΈλ¥Ό ν‘μ‹ν•κ³  `@Autowired` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄μ„ μμ΅΄μ„±μ„ ν‘μ‹ν•κΈ°λ§ ν•λ©΄ λλ‹¤.

<img width="1125" alt="Image" src="https://github.com/user-attachments/assets/ecc437df-045d-44bc-8713-093e8f14aaac" />

μμ λ¥Ό λ΄λ³΄μ.
`BusinessCalculationService` λ΅ λ§μ€ μ μ—°μ„±μ„ μ–»μ–΄μ•Ό ν•λ‹¤. κ°„λ‹¨ν μμ λ¥Ό λ³΄κ² λλ‹¤λ©΄ `MongoDB / MySQL` μ— λ°μ΄ν„°λ¥Ό κ°€μ§€κ³  μμ–΄μ„, ν•λ‚μ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ λ‹¤λ¥Έ λ°μ΄ν„°λ² μ΄μ¤λ΅ μ μ—°ν•κ² μ΄λ™ν•  μ μμ–΄μ•Ό ν•λ‹¤. λ”°λΌμ„ `DataService` μΈν„°νμ΄μ¤λ¥Ό μƒμ„±.
`MongoDbDataService / MySQLDataService` λ¥Ό `DataService` μΈν„°νμ΄μ¤λ΅ κµ¬ν„ν–λ‹¤.

μƒμ„±μ μ£Όμ…μ„ μ‚¬μ©ν•΄μ„ μμ΅΄μ„±μ„ μ£Όμ…ν•κ³ , `MongoDbDataService` μ— μ°μ„ κ¶μ„ λ¶€μ—¬ν•λ” λ°©μ‹μ„ ν•΄λ³΄μ.

```java
package com.in28minutes.learn_spring_framework.examples.c1;

import java.util.Arrays;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan
public class RealWorldSpringContextLauncherApplication {


	public static void main(String[] args) {
		try (var context = new AnnotationConfigApplicationContext(RealWorldSpringContextLauncherApplication.class)) {
			Arrays.stream(context.getBeanDefinitionNames()).forEach(System.out::println);
		}

	}

}
```

κΈ°λ³Έμ μΌλ΅ μ„Έν…μ„ ν•΄λ†“κ³  `ν΄λμ¤λ¥Ό μƒμ„±` ν•΄μ•Ό ν•λ‹¤. `example.c1` ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•λ‹ μ΄ μ•μ—μ„ μƒ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤μ. newλ΅ interfaceλ¥Ό λ§λ“¤μ–΄μ£Όκ³ , μ½”λ”©μ„ μ‹μ‘.
`DataService` μΈν„°νμ΄μ¤λ¥Ό λ§λ“  μ΄ν›„μ— `MongoDbDataService` λ¥Ό λ§λ“¤μ–΄μ„ `implements` λ¥Ό λ„£μ–΄μ£Όλ©΄ μ»΄νμΌ μ¤λ¥κ°€ λ°μƒν•λ”λ°, `Add unimplemented Methods` λ¥Ό μ„ νƒν•΄μ„ μ‚¬μ©ν•΄λ³΄μ.
`MySQLDataService` λ„ λ§μ°¬κ°€μ§€λ΅ κµ¬ν„ν•΄μ£Όκ³ , μ΄ν›„μ—λ” `BusinessCalculationService` λ¥Ό κµ¬ν„ν•΄λ³΄μ. `DataService` λ„ λ§λ“¤μ–΄μ£Όμ–΄μ•Ό ν•¨.

```java
// BusinessCalculationService.java
package com.in28minutes.learn_spring_framework.examples.c1;

import java.util.Arrays;

public class BusinessCalculationService {

	private DataService dataService;

	public int findMax() {
    return Arrays.stream(dataService.retrieveData())
                                .max().orElse(0);
	}
}
```

ν„μ¬ ν•„μ”μ— λ”°λΌ λ¨λ“  ν΄λμ¤ / μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤μ–΄λ‘μ—λ”λ°, μƒμ„±μ μ£Όμ…μ„ μ‚¬μ©ν•΄μ„ μμ΅΄μ„±μ„ μ£Όμ…ν•΄μ•Ό ν•λ‹¤.

```java
public BusinessCalculationService(DataService dataService) {
	super();
	this.dataService = dataService;
}
```

μ΄λ ‡κ² μƒμ„±μλ¥Ό μ¤€λΉ„ν•΄μ„ μ»΄ν¬λ„νΈλ΅ λ§λ“¤μ–΄μ•Ό ν•κΈ° λ•λ¬Έμ— `@Component` λ¥Ό μ¶”κ°€ν•λ‹¤. `MongoDbDataService / MySQLDataService` μ—λ„ μ¶”κ°€ν•κ² λλ©΄ springμ΄ κ΄€λ¦¬λ¥Ό ν•κ² λλ”λ°, μ΄μ  `MongoDB` μ— μ°μ„ κ¶μ„ μ¤λ³΄μ.
λ§μ•½ ν„μ¬ κΈ°μ μ—μ„ κ·Έλƒ¥ μ‹¤ν–‰ν•κ² λλ©΄ `μ—¬λ¬ κ°μ ν›„λ³΄ μμ™Έ` κ°€ λ°μƒν•κ² λλ‹¤. λ”°λΌμ„ `@Primary` λ„ μ‘μ„±ν•΄μ¤€λ‹¤.

μ΄μ  `BusinessCalculationService` λ¥Ό μ–»κ³  μ΄μ— λ€ν•΄ λ©”μ†λ“λ¥Ό μ‹¤ν–‰ ν•΄μ•Ό ν•λ”λ°, μ–΄λ–»κ² ν• κΉ?
`context.getBean` μ„ μ…λ ¥ν•κ³  ν•΄λ‹Ή μ„λΉ„μ¤μ `class` λ¥Ό μ…λ ¥ν•λ©΄ λλ‹¤.
μ΄ `Bean` μ— μ •μλ `findMax` λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν•΄μ£ΌκΈ° μ„ν•΄μ„ `.findMax` λ΅ μ‹¤ν–‰ν•λ©΄ λλ‹¤.

```java
// RealWorldSpringContextLauncherApplication.java
package com.in28minutes.learn_spring_framework.examples.c1;

import java.util.Arrays;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan
public class RealWorldSpringContextLauncherApplication {


	public static void main(String[] args) {
		try (var context = new AnnotationConfigApplicationContext(RealWorldSpringContextLauncherApplication.class)) {
			Arrays.stream(context.getBeanDefinitionNames()).forEach(System.out::println);

			System.out.println(context.getBean(BusinessCalculationService.class).findMax());

		}
	}
}
```

ν•΄λ‹Ή μ•±μ„ μ‹¤ν–‰ν•λ©΄ `55` κ°€ μ¶λ ¥λλ” κ²ƒμ„ λ³Ό μ μλ‹¤.
μΌλ°μ μΌλ΅ μ‹¤μ  μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ‹¤λ£¨λ” κ²½μ°, μ΄λ° λ°©μ‹μΌλ΅ μ£Όμ–΄μ§€κ² λλ‹¤. `λ°μ΄ν„° μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ” λΉ„μ¦λ‹μ¤ μ„λΉ„μ¤` λ¥Ό κ°–κ² λλ‹¤. `λ°μ΄ν„° / λΉ„μ¦λ‹μ¤` μ„λΉ„μ¤μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•λ” λ°©λ²•, μμ΅΄μ„±μ„ `μ™€μ΄μ–΄λ§` ν•λ” λ°©λ²•μ—λ” κ·Έλ‹¤μ§€ μ£Όλ©ν•  ν•„μ”λ” μ—†λ‹¤. `Spring` μ΄ λ‹΄λ‹Ήν•κ³  μμΌλ©°, μ΄ λ•λ¶„μ— λ‚λ” λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ ν•  μ μκ² λλ”κ²ƒ.
