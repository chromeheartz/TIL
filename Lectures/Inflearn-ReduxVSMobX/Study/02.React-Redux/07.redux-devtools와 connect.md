## React-Redux

### 07. redux-devtools와 connect

---

### 📌 redux-devtools

가장 쉽게 해결하는 방법은

```
npm i redux-devtools-extension -D
```

으로 설치 하는 방법이다. `-D` 를 붙여 개발용으로 설치. `production` 배포환경으로 사용하는 것이 아닌 개발용으로 사용해야 된다.

자칫하면 웹프로젝트의 데이터가 몰아져있는 리덕스가 유출될 수 있다.

```js
// store.js
const { composeWithDevTools } = require("redux-devtools-extension");

const enhancer = composeWithDevTools(
  applyMiddleware(firstMiddleware, thunkMiddleware)
);
```

#### 📍 다른 방식

공식 문서를 살펴보면 다른 방식으로 준비를 해놓은것을 볼 수 있다. `composeWithDevTools / devToolsEnhancer` 이 두 가지 방식으로 할 수 있는데 현재는 `composeWithDevTools` 방식으로 진행

> ✅ 배포 환경에서 더이상 쓰고싶지 않다면?
> 보통 `process.env.NODE_ENV` 로 구별을 하는데
> `삼항 연산자` 로 리덕스 데이터구조가 노출되는 것을 막아줄 수 있다.

```jsx
const enhancer =
  process.env.NODE_ENV === "production"
    ? compose(applyMiddleware(firstMiddleware, thunkMiddleware))
    : composeWithDevTools(applyMiddleware(firstMiddleware, thunkMiddleware));
```

### 📌 클래스 버전

리액트는 현재 `클래스 파 / 훅스 파` 로 나뉘어져있다.
근데 클래스 버전의 리덕스보다 `훅스` 버전의 리덕스가 훨씬 사용하기 쉽다
클래스버전에서 번거로웠던 부분들이 훅스에서는 많이 해결이 되었다.

#### 그래서 어떤 점이 번거로웠을까?

```jsx
// App.jsx
import React from "react";
import { connect } from "react-redux";
import { logIn, logOut } from "./actions/user";

class App {
  onClick = () => {
    dispatch(
      logIn({
        id: "bibi",
        password: "password",
      })
    );
  };

  onLogout = () => {
    dispatch(logOut());
  };

  render() {
    const { user } = this.props;
    return (
      <div>
        {user.isLoggingIn ? (
          <div>로그인 중</div> // 로그인 중
        ) : user.data ? (
          <div>{user.data.nickname}</div> // 로그인 후
        ) : (
          "로그인 해주세요" // 로그인 전
        )}
        {!user.data ? (
          <button onClick={this.onClick}>로그인</button>
        ) : (
          <button onClick={this.onLogout}>로그아웃</button>
        )}
      </div>
    );
  }
}

export default connect()(App);
```

이렇게 클래스 버전으로 만들어봤는데 여기서 포인트는 `connect` 를 써주는 것이다.
`하이오더 컴포넌트` 에서 이 `App` 이라는 컴포넌트를 `확장` 해주는 역할로 사용된다.
