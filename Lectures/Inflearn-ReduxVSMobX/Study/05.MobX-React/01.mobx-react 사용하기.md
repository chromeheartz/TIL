## MobX-React

### 01. mobx-react ì‚¬ìš©í•˜ê¸°

---

### ğŸ“Œ MobX-React

`MobX` ëŠ” ììœ ë¡œìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ì„œ `React` ì»´í¬ë„ŒíŠ¸ì— ì ìš©í•˜ëŠ” ë°©ë²•ì´ ì—„ì²­ë‚˜ê²Œ ë‹¤ì–‘í•˜ë‹¤.
ê¸°ì¡´ `03 / 04` ì½”ë“œì™€ ê°™ì€ë° ì¶”ê°€ëœ ë¶€ë¶„ì´ ìˆë‹¤ë©´ `ë°ì½”ë ˆì´í„°` ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ `@babel/plugin-proposal-decorators` ê°€ ì¶”ê°€ë˜ì—ˆë‹¤.

ì¶”ê°€ë¡œ `webpack-config.js` ë„ `decorators` ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `plugins` ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•¨.
`decorators` ì—ëŠ” `legacy : true` / `properties` ëŠ” `loose: true` ë¡œ ë°°ì—´ë¡œ ë¬¶ì–´ ë‘ ë²ˆì§¸ ìš”ì†Œë¡œ ì˜µì…˜ì„ ì¤€ë‹¤.

ğŸ“ `MobX` ë¥¼ ì“°ë©´ `react-state` ë¥¼ ì•„ì˜ˆ ì—†ì•¨ ìˆ˜ê°€ ìˆë‹¤. `state` ë§ˆì €ë„ `observable` ë¡œ ë§Œë“¤ì–´ë²„ë¦¬ë©´ëœë‹¤.
`Redux` ì—ì„œëŠ” í¸ì˜ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ”ë° ì°¨ì´ê°€ ìˆë‹¤.

```jsx
// client.jsx
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

ReactDOM.render(<App />, document.querySelector("#root"));
```

âœ… `class ì»´í¬ë„ŒíŠ¸`

`class` ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê³  ê·¸ ìœ„ì— `@observer` ë¥¼ ì˜¬ë ¤ì£¼ë©´ ëœë‹¤.

- `MobX` ëŠ” `state` ë¥¼ `observable` ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
// store.js
const { observable } = require("mobx");

const userStore = observable({
  isLoggingIn: false,
  data: null,
  logIn(data) {
    this.isLoggingIn = true;
    setTimeout(() => {
      this.data = data;
      this.isLoggingIn = false;
      postStore.data.push(1);
    }, 2000);
  },
  logOut() {
    this.data = null;
  },
});

export { userStore, postStore };

// App.jsx
import React, { Component } from "react";
import { observer } from "mobx-react";
import { observable } from "mobx";

import { userStore, postStore } from "./store";

@observer
class App extends Component {
  state = observable({
    name: "",
    password: "",
  });

  onClick = () => {
    userStore.logIn({
      nickname: "zerocho",
      password: "ë¹„ë°€ë²ˆí˜¸",
    });
  };

  onLogout = () => {
    userStore.logOut();
  };

  onChangeName = (e) => {
    this.state.name = e.target.value;
  };

  onChangePassword = (e) => {
    this.state.password = e.target.value;
  };

  render() {
    return (
      <div>
        {userStore.isLoggingIn ? (
          <div>ë¡œê·¸ì¸ ì¤‘</div>
        ) : userStore.data ? (
          <div>{userStore.data.nickname}</div>
        ) : (
          "ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”."
        )}
        {!userStore.data ? (
          <button onClick={this.onClick}>ë¡œê·¸ì¸</button>
        ) : (
          <button onClick={this.onLogout}>ë¡œê·¸ì•„ì›ƒ</button>
        )}
        <div>{postStore.data.length}</div>
        <input value={this.state.name} onChange={this.onChangeName} />
        <input
          value={this.state.password}
          type="password"
          onChange={this.onChangePassword}
        />
      </div>
    );
  }
}

export default observer(App);
```

âœ… `í¬ì¸íŠ¸`

- `MobX` ì—ì„œ `global state` ëŠ” ê¼­ í•˜ë‚˜ì˜ ìŠ¤í† ì–´ë¡œ ë¬¶ì¼ í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¡œ ë§Œë“¤ì–´ë„ ëœë‹¤. ê°ê° ë³„ê°œë¡œ
- `store.js` ë¥¼ ë³´ë©´ `redux` ì²˜ëŸ¼ ê°ì²´ë¡œ ë§Œë“¤ í•„ìš” ì—†ì´ ê·¸ëƒ¥ ìƒíƒœë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤. ë¬¶ì´ëŠ” ë‹¨ìœ„ê°€ ë°ì´í„°ë‘ ê°™ì´ ë¬¶ì—¬ì„œ ë³´ê¸°ê°€ í¸í•˜ë‹¤.

### ğŸ“Œ ë°ì½”ë ˆì´í„°

`@observable / observable({})`

#### Client.jsxì—ì„œ Providerë¡œ ì•ˆê°ì‹¸ëŠ” ì´ìœ ?

> **Provider**
