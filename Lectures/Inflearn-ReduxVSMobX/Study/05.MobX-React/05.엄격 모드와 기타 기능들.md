## MobX-React

### 05. ì—„ê²© ëª¨ë“œì™€ ê¸°íƒ€ ê¸°ëŠ¥ë“¤

---

### ğŸ“Œ configure

`MobX` ì—ëŠ” `configure` ë¼ëŠ” ê²ƒì´ ìˆë‹¤.
`enforceActions` ë¥¼ `always / strict / never / observered ` ì´ëŸ° ì˜µì…˜ë“¤ì—ì„œ `always` ë¥¼ í•˜ë©´ ì¡°ê¸ˆ ì—„ê²©í•´ì§„ë‹¤.

ê·¸ë˜ì„œ ë­”ê°€ë¥¼ ë°”ê¿€ ë•Œ ë¬´ì¡°ê±´ ì•¡ì…˜ ê°™ì€ ê²ƒìœ¼ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•œë‹¤.

```jsx
// store.js
const { observable, configure } = require("mobx");

configure({ enforceActions: "always" });

const userStore = observable({...})
```

ì‚¬ì‹¤ `MobX` ê°€ ë„ˆë¬´ ììœ ë¡­ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ì œí•œì„ ë‘ëŠ” ê²ƒ. ì˜ˆë¥¼ ë“¤ì–´ `observable` ë°ì´í„°ë“¤ì´ ë°”ë€” ë•Œ ì•Œì•„ì„œ ë¦¬ë Œë”ë§ì„ ìµœì í™” í•´ì£¼ê¸´í•˜ëŠ”ë° ê°„í˜¹ `ë‘ ë²ˆ ë¦¬ë Œë”ë§` ë˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ê¸´ í•œë‹¤.

ê·¸ëŸ° ê²ƒë“¤ì´ ê±°ìŠ¬ë¦°ë‹¤ë©´ `enforceActions` ë¥¼ ì—„ê²©í•˜ê²Œ í•´ì„œ `state` ë“¤ì´ ë°”ë€ŒëŠ” ë™ì‘ë“¤ì„ `action` ìœ¼ë¡œ ê°ì‹¼ë‹¤. `ë°ì½”ë ˆì´í„° actionì´ ì•„ë‹˜`

`runInAction` ìœ¼ë¡œ ê°ì‹¸ë„ ë˜ê³  í•¨ìˆ˜ ìì²´ë¥¼ `action` ìœ¼ë¡œ ê°ì‹¸ë„ ëœë‹¤.

```jsx
const state = useLocalStore(() => ({
  name: "",
  password: "",
  onChangeName: action((e) => {
    state.name = e.target.value;
  }),

  onChangePassword(e) {
    runInAction(() => {
      state.password = e.target.value;
    });
  },
}));
const onLogIn = useCallback(() => {
  userStore.logIn({
    nickname: "bibi",
    password: "ë¹„ë°€ë²ˆí˜¸",
  });
}, []);
```

`action` ìœ¼ë¡œ ì•ˆê°ì‹¼ ë¶€ë¶„ë“¤ì´ ì½˜ì†”ì—ì„œ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

#### this.state.name

ê¸°ì¡´ì— `this.state.name = e.target.value` ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš©í–ˆëŠ”ë° ì™œ `this` ê°€ ì•ˆë ê¹Œ?

ì•¡ì…˜ìœ¼ë¡œ ê°ì‹¸ì¤„ ë•ŒëŠ” `this` ë¥¼ í•˜ë©´ ì•ˆëœë‹¤. `í™”ì‚´í‘œ í•¨ìˆ˜ / ì¼ë°˜ í•¨ìˆ˜` ì˜ `this` ê°’ì˜ ì°¨ì´ê°€ ìˆê¸° ë•Œë¬¸.

actionì„ ì“°ë©´ ê·¸ ì•ˆì— ìˆëŠ” `this` ê°€ ë°”ë€Œê¸° ë•Œë¬¸ì— ì•ˆëœë‹¤.
â­ï¸ `this` ëŠ” í•¨ìˆ˜ê°€ ì‹¤í–‰ë ë•Œ ê²°ì •.

ì•¡ì…˜ì„ ì´ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ì„œ `this` ê°€ ë°”ë€Œê¸° ë•Œë¬¸ì— `bind.this` ë¥¼ í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆëŠ”ë° ì´ê²ƒë„ ì•ˆë˜ëŠ”ê²Œ `app` ì— `this` ê°€ ì ìš©ì´ ë˜ì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì•ˆëœë‹¤.

ğŸ“ ì‚¬ì‹¤ ì´ëŸ°ë¶€ë¶„ì„ ê³ ë ¤í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ `enforceActions` ë¥¼ ë¹¼ì£¼ë©´ ëœë‹¤.

### ğŸ“Œ useState / useLocalStore ì˜ ì°¨ì´ì 

`const [name, setName] = useState('');`
ì´ëŸ° ê¸°ë³¸ì ì¸ `useState` êµ¬ë¬¸ì—ì„œ `setState` ëŠ” ì‚¬ì‹¤ìƒ `this.state = ..` ê°€ ë ê²ƒì´ë‹¤.
ë¶ˆë³€ì„±ì„ ì§€ì¼œì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ë²ˆê±°ë¡­ì§€ë§Œ

`useLocalStore` ëŠ” `Immer` ì²˜ëŸ¼ ë°”ë¡œ `state.name = e.target.value` ë¡œ ë°”ë¡œ ì¨ë„ ëœë‹¤. ì¢€ ë” í¸ë¦¬í•œê²ƒ.

### ğŸ“Œ useAsObservableSource

`observable` ì´ ì•„ë‹Œ ì• ë“¤ì„ `observable` ì²˜ëŸ¼ ë§Œë“¤ì–´ ì¤€ë‹¤. ì˜ˆë¥¼ë“¤ì–´ `props` .

```jsx
import { useAsObservableSource } from "mobx-react";

const personSource = ({ name, age }) => {
  const person = useAsObservableSource({ name, age });
  return <PersonBanner person={person} />;
};
```

ì´ë ‡ê²Œ `props` ë¡œ ë¶€ëª¨ì—ì„œ ë„˜ì–´ì˜¨ ì• ë“¤ì€ `observable` ì¸ì§€ ì•Œê¸°ê°€ í˜ë“¤ë‹¤. ê·¸ëŸ°ì• ë“¤ì„ `useAsObservableSource` ë¡œ ê°ì‹¸ ì£¼ë©´ `observable` ì´ ë˜ì–´ ì´ ê°’ë“¤ì´ ë°”ë€” ë•Œ ë¦¬ë Œë”ë§ì´ ëœë‹¤.

#### â­ï¸ destructing

`const { isLogginIn } = userStore`
ì´ëŸ°ì‹ìœ¼ë¡œ êµ¬ì¡°ë¶„í•´í• ë‹¹ì„ ë§ì´ í•˜ê²Œ ë˜ëŠ”ë° `observable` ì€ `destructing` ì„ í•˜ë©´ ì•ˆëœë‹¤. í•˜ê²Œë˜ë©´ `observable` ì´ ê¹¨ì ¸ë²„ë¦°ë‹¤.

> `ê°ì²´` ê¹Œì§€ëŠ” `observable` ì´ ìœ ì§€ê°€ ë˜ëŠ”ë° ê·¸ ì´í›„ ì›ì‹œê°’ë“¤ `string, number, boolean ...` ë“±ì€ êµ¬ì¡°ë¶„í•´ í• ë‹¹í•˜ë©´ `observable` ì´ ìœ ì§€ê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.
