## Redux-Toolkit

### 07. createSelector(reselect)

---

```jsx
const { email, password } = useSelector((state) => state.user);
```

ê¸°ì¡´ì— `useSelector` ë¥¼ ì´ëŸ° `êµ¬ì¡° ë¶„í•´í• ë‹¹` í˜•íƒœë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì“¸ë°ì—†ëŠ” `ë¦¬ë Œë”ë§` ì´ ë§ì´ ì¼ì–´ë‚  ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤.

ê·¸ë˜ì„œ ê³µì‹ë¬¸ì„œì—ì„œ ë‚˜ì˜¤ëŠ” í•˜ë‚˜ì˜ í•´ê²°ì±…ì´ ìˆëŠ”ë°

- `ì›ì‹œê°’ ì‚¬ìš©`
  - ê°ì²´ë§Œ ë‚˜ì˜¤ëŠ”ê²Œ ì•„ë‹ˆë¼ `ì›ì‹œê°’` ì´ ë  ë•Œ ê¹Œì§€ ë”°ë¡œì“°ëŠ”ê²ƒ

```jsx
// ì›ì‹œê°’ ì‚¬ìš©
const email = useSelector((state) => state.user.email);
const password = useSelector((state) => state.user.password);
```

í•˜ì§€ë§Œ ì´ë ‡ê²Œ `ëª¨ë“  ì†ì„±` ì„ ë‹¤ ì ì–´ì¤„ ìˆ˜ ì—†ìœ¼ë‹ˆ ë³´í†µ íƒ€í˜‘ì„ í•œë‹¤. ë§Œì•½ ë”±íˆ ìµœì í™”ë¥¼ ìƒê°ì•ˆí•˜ê³  ì„±ëŠ¥ì— ì˜í–¥ì´ ì—†ì„ ê²ƒì´ë¼ ìƒê°í•˜ê³  `{ email, password  }` ì²˜ëŸ¼ í’€ì–´ì„œ ì‚¬ìš©í•˜ë‹¤ê°€ ë¬¸ì œê°€ ìƒê¸°ë©´ ì–´ë–»ê²Œ í• ê¹Œ?
`ì›ì‹œê°’` ìœ¼ë¡œ í•˜ë‚˜í•˜ë‚˜ ë§Œë“¤ì–´ë„ ë˜ì§€ë§Œ `createSelector` ë¼ê³  `toolkit` ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì´ ìˆë‹¤.

### ğŸ“Œ createSelector

ê¸°ì¡´ì— `Reselect` ë¼ê³  ìœ ëª…í–ˆë˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ `toolkit` ì— ì§‘ì–´ ë„£ì€ ê²ƒì´ë‹¤.

```jsx
// userSlice.js
const initialState = {
  isLoggingIn: false,
  data: null,
  email: "",
  password: "",
  data: null,
  prices: Array(100)
    .fill()
    .map((v, i) => (i + 1) * 100),
};

// app.jsx
const prices = useSelector((state) => state.user.prices);
<div>
  <b>{prices.reduce((a, c) => a + c, 0)}ì›</b>
</div>;
```

ì´ëŸ°ì‹ìœ¼ë¡œ `prices` ë¼ëŠ” ë°°ì—´ê°’ì„ ê°€ì ¸ì™€ì„œ ì—°ì‚°ì„ í•˜ëŠ” í•¨ìˆ˜ë¡œ ê°’ì„ ë¿Œë ¤ì£¼ê³ ìˆëŠ”ë° ì´ë ‡ê²Œ ë˜ë©´ `email, password` ì˜ ìƒíƒœê°€ ë°”ë€”ë•Œë§ˆë‹¤ `ë¦¬ë Œë”ë§` ë˜ë©° ê³„ì† ì—°ì‚°ì´ ì´ë£¨ì–´ì§€ê²Œ ëœë‹¤.

ì§€ê¸ˆì—°ì‚°ì´ì•¼ ê°„ë‹¨í•˜ê²Œ 100ê°œë¥¼ ë”í•˜ëŠ” ê²ƒì´ì§€ë§Œ ì—°ì‚°ì´ ë” ë³µì¡í•´ì§ˆ ìˆ˜ë¡ ë¶€í•˜ê°€ ìƒê¸¸ ìˆ˜ ë°–ì— ì—†ë‹¤.
ì´ëŸ´ë•Œ `ìºì‹±` ì„ í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë° ë– ì˜¬ë¦¬ëŠ” ë°©ë²•ì´ `useMemo` ë¥¼ ì¨ì„œ `memoization` ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì¼ê²ƒì´ë‹¤.

```jsx
const totalPrice = useMemo(() => {
  console.log("memo");
  return prices.reduce((a, c) => a + c, 0);
}, [prices]);
<b>{totalPrice}ì›</b>;
```

ì´ë ‡ê²Œ ì‘ì„±ì„ í•´ë³´ë©´ `'memo'` ëŠ” ì²˜ìŒì— ê³„ì‚°ì„ í•œë²ˆ í•˜ê³  ë‚˜ì„œ ê·¸ ë‹¤ìŒë¶€í„°ëŠ” ì½˜ì†”ì— ì°íˆì§€ ì•Šì„ ê²ƒì´ë‹¤. í•œë²ˆ `ìºì‹±ëœ ê°’` ìœ¼ë¡œ ê³„ì† ê°€ì§€ê³  ìˆëŠ”ê²ƒ.

#### âœ… ì´ì œ ë¬¸ì œ ë‹¤ í•´ê²° ëë‹¤ ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.

`useMemo` ë¥¼ ì‚¬ìš©í•´ì„œ `prices` ê°’ì´ ë°”ë€Œì§€ ì•ŠëŠ” ì´ìƒ ê³„ì† ìºì‹±ëœ ê°’ì„ ì“°ëŠ”ê²ƒ ì—¬ê¸°ê¹Œì§€ë„ ì›¬ë§Œí¼ì€ ì˜í•œ ê²ƒì¸ë°, ì´ì œ ë°œìƒí•  ë¬¸ì œê°€ ìˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ì´ ë¬¸ì œë¥¼ ì‹¤ì œ ì˜ˆì œê°€ ì•„ë‹Œ `ê°„ì†Œí™”í•œ ì˜ˆì œ` ë¼ê³  ìƒê°í•´ë³´ë©´, â­ï¸ `useMemo, memoization, ìºì‹±` ë“±ì€ í•­ìƒ `trade-off` ì´ë‹¤.

**ë¬´ì–¸ê°€ ì–»ëŠ”ê²Œ ìˆìœ¼ë©´ ìƒëŠ”ê²Œ ìˆë‹¤ëŠ” ëœ»**
`ì–»ì€ ê²ƒ` => ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ëœí•´ë„ ë˜ëŠ”ê²ƒ
`ìƒì€ ê²ƒ` => ë¹„êµ. ë§¤ë²ˆ `ë¦¬ë Œë”ë§` ë  ë•Œë§ˆë‹¤ `prices` ëŠ” ì—°ì‚°ì„ í•´ì•¼í•œë‹¤. ë°°ì—´ì˜ ê°’ì´ ì‹¤ì œë¡œ ë°”ë€Œì—ˆë‚˜ ì•ˆë°”ë€Œì—ˆë‚˜.

ê·¸ë˜ì„œ `dependency` ê°„ì— ë¹„êµí•˜ëŠ” ë¹„ìš©ì„ ìƒê³  `ìºì‹±ìœ¼ë¡œ ì–»ëŠ” íš¨ìœ¨(ì—°ì‚°ì„ ì•ˆí•´ë„ ë˜ëŠ”)` ì„ ì–»ì€ê²ƒì´ë‹¤.

> ê´œíˆ ë©”ëª¨ì´ì œì´ì…˜ì„ ë§ì´í•˜ë©´ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ë” ì•ˆì¢‹ì•„ ì§ˆ ìˆ˜ ìˆë‹¤.
> `dependency ì—°ì‚°` ì´ `ë¶ˆí•„ìš”í•œ ì—°ì‚°` ë³´ë‹¤ ë” ë§ì•„ì§€ë©´ ì•ˆì¢‹ë‹¤.
