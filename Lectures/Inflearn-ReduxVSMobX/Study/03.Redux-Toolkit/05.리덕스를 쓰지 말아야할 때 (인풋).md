## Redux-Toolkit

### 05. ë¦¬ë•ìŠ¤ë¥¼ ì“°ì§€ ë§ì•„ì•¼í•  ë•Œ (ì¸í’‹)

---

### ðŸ“Œ ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©° ê°€ìž¥ ë§Žì´ ë‚˜ì˜¤ëŠ” ì§ˆë¬¸ë“¤

#### ðŸ“ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ìžˆì„ ë•Œ ê·¸ ì•ˆì—ì„œ ë¦¬ë•ìŠ¤ë¥¼ ì¨ì•¼í•  ë•Œ / ì•ˆ ì¨ì•¼í•  ë•Œ

```jsx
// actions/user.js
exports.logIn = createAsyncThunk("user/logIn", async (data, thunkAPI) => {
  // throw new Error("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
  return await delay(500, {
    userId: 1,
    nickname: "bibi",
  });
});
```

ì˜ˆë¥¼ ë“¤ì–´ `App.jsx` ì—ì„œ `logIn` ì„ ì‚¬ìš©í•˜ë ¤ê³  í• ë•Œ `createAsyncThunk` ë¡œ `ë¹„ë™ê¸° ìš”ì²­` ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê³  ìžˆë‹¤. ì´ ë¹„ë™ê¸° ìš”ì²­ì„ í•­ìƒ ë§Œë“¤ì–´ì•¼ í• ê¹Œ?
í•­ìƒì€ ì•„ë‹ˆë‹¤. `redux-toolkit` ì˜ ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ì½”ë“œ ì–‘ì´ ë§Žì´ ì¤„ì—ˆë‹¤ê³ ëŠ” í•´ë„ ì—¬ì „ížˆ ì½”ë“œ ì–‘ì´ ë§Žê¸° ë•Œë¬¸ì— ì¨ì•¼í•  ë•Œë¥¼ êµ¬ë¶„í•´ì•¼ í•œë‹¤. ê´œížˆ ë¦¬ë•ìŠ¤ë¡œ ê°”ë‹¤ê°€ ì˜¤ížˆë ¤ ë„ˆë¬´ ë§Žì•„ì„œ ê³ í†µë°›ëŠ” ê²½ìš°ê°€ ìƒê¸´ë‹¤.

âœ… `ë¹„ë™ê¸° ìš”ì²­` ì—ì„œë„ êµ¬ë¶„ì„ ì¢€ í•´ì•¼í•˜ëŠ”ë° `input` ì„ ì‚¬ìš©í• ë•Œë„ ë¦¬ë•ìŠ¤ë¥¼ ì•ˆì“°ëŠ” ê²ƒì´ ì¢‹ë‹¤

```jsx
const { email, password } = useSelector((state) => state.user);

const onChangeEmail = useCallback((e) => {
  dispatch(userSlice.actions.setEmail(e.target.value));
}, []);

const onChangePassword = useCallback((e) => {
  dispatch(userSlice.actions.setPassword(e.target.value));
}, []);

<form>
  <input type="email" value={email} onChange={onChangeEmail} />
  <input type="password" value={password} onChange={onChangePassword} />
</form>;
```

`form` ì´ ìžˆë‹¤ê³  ê°€ì •í• ë•Œ ë³´í†µ `value` ì˜ ê°’ì—ëŠ” `useState` ë¥¼ ì“°ê³  `onChange` ì—ëŠ” í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ì´ `value` ë¥¼ `redux` ì— ë„£ëŠ” ê²½ìš°ì—ëŠ” ì¢€ ë§Žì´ ì§€ì €ë¶„í•´ì§€ê²Œ ëœë‹¤.
êµ³ì´ `input` ê°™ì€ê²ƒì€ ì•¡ì…˜ìœ¼ë¡œ ì•ˆë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.

â­ï¸ ë¦¬ë•ìŠ¤ íˆ´í‚·ì—ì„œ ë°ì´í„°ëŠ” `action.payload` ì•ˆì— ë“¤ì–´ìžˆë‹¤ ì´ì „ì²˜ëŸ¼ ìžìœ  ìžìž¬ë¡œ `action.email, action.password` ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í†µì¼ì´ ë˜ì–´ìžˆë‹¤.
êº¼ë‚´ì˜¤ëŠ” ê²½ìš°ì—ë„ `useSelector` ë¡œ ê°€ì ¸ì™€ì„œ valueë¡œ ë„£ê²Œ ë˜ëŠ”ë° ì´ë ‡ê²Œ í•´ë„ ëŒì•„ê°€ê¸°ëŠ” í•œë‹¤.
í•˜ì§€ë§Œ ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” `onChange` ê°€ ì¼ì–´ë‚  ë•Œ ì¦‰ `ê¸€ìž í•˜ë‚˜ì”© ì¹  ë•Œë§ˆë‹¤ action` ì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ ëª¨ë“  ê¸€ìží•˜ë‚˜í•˜ë‚˜ë¥¼ `dispatch` ë¡œ ë§Œë“œëŠ”ê²Œ ì˜ë¯¸ê°€ ì—†ë‹¤. ì™„ì„±ëœ ê²ƒë§Œ ë°›ì•„ë„ ëœë‹¤.

âœ… `input` ë“¤ì„ ì €ëŸ°ì‹ìœ¼ë¡œ êµ¬í˜„ì„ ê¼­ í•´ì•¼í•œë‹¤ í•˜ë©´ `onBlur` ë‹¨ìœ„ë¡œ ëŠì–´ì„œ í•˜ê±°ë‚˜ `onSubmit` ì„ íŠ¸ë¦¬ê±°ë¡œ ìž¡ì•„ë„ ë ê²ƒì´ë‹¤.

```js
const [email, setEmail] = useState("");
const [password, setPassword] = useState("");

const onSubmit = useCallback(
  (e) => {
    e.preventDefault();
    dispatch(
      userSlice.actions.setLoginForm({
        email,
        password,
      })
    );
  },
  [dispatch, email, password]
);
```

âœ… `useCallback` ì˜ `dependencies` ì— `dispatch` ë¥¼ ì•ˆë„£ê²Œ ë˜ë©´ `eslint` ì—ì„œ íˆ¬ëœê±°ë¦¬ëŠ” ê²ƒë“¤ì„ ë³¼ ìˆ˜ ìžˆë‹¤. ì‚¬ì‹¤ì€ ë””ìŠ¤íŒ¨ì¹˜ë¥¼ ì•ˆë„£ì–´ë„ ëœë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëŠ” `ì ˆëŒ€ ë°”ë€” ì¼ì´ ì—†ëŠ” í•¨ìˆ˜` ë¼ì„œ ì•ˆë„£ì–´ë„ ë¬´ë°©í•œë° `eslint` ì—ì„œ `warning` ì´ ë‚˜ì˜¤ë©´ ê·¸ëƒ¥ ë„£ì–´ì¤˜ë„ ëœë‹¤.

> `input` ê°™ì€ ê²ƒì´ ìžˆëŠ”ë° ì´ ì¸í’‹ì€ ì»´í¬ë„ŒíŠ¸ í•˜ë‚˜ì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ í•˜ë©´ ê·¸ëƒ¥ `state` ë¡œ ë§Œë“¤ì–´ì„œ ë§ˆì§€ë§‰ í•œë²ˆì— ëª¨ì•„ì„œ ë³´ë‚´ìž. ì´ë ‡ê²Œ í•˜ì§€ ì•Šì•„ë„ ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ë¬¸ì œëŠ” ì—†ì§€ë§Œ ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§€ë©´ ê²°êµ­ `ë””ë²„ê¹…` ì´ ì–´ë ¤ì›Œ ì§€ê¸° ëŒ€ë¬¸ì— ì¢‹ì§€ ì•Šì„ ìˆ˜ ìžˆë‹¤.

### ðŸ“Œ ì‹¤ìˆ˜

```js
const user = useSelector((state) => state.user);
const { list } = useSelector((state) => state.post);
```

í˜„ìž¬ ì´ëŸ°ì‹ìœ¼ë¡œ ê°’ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•˜ê³ ìžˆëŠ”ë° `ê¸€ìž í•˜ë‚˜í•˜ë‚˜ ì¹  ë•Œë§ˆë‹¤ ì•¡ì…˜ì„ í˜¸ì¶œ` í•˜ê²Œ ëœë‹¤ë©´ ì´ êµ¬ë¬¸ë“¤ì´ `ë§¤ë²ˆ ë¦¬ë Œë”ë§` ì´ ë˜ë²„ë¦°ë‹¤. `user` ë¥¼ êµ¬ì¡°ë¶„í•´ í• ë‹¹í•´ì„œ í’€ë©´ `{ email, password }` ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•œë°, âœ… `useSelector` ëŠ” `user` ê°€ ë°”ë€” ë•Œ ì´ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ ì‹œí‚¤ê³ , ì´ `user` ëŠ” ì•ˆì— ê²ƒë“¤ì´ ë°”ë€Œë©´ ë¦¬ë Œë”ë§ì´ ë˜ë‹ˆ, ê³„ì† ë¦¬ë Œë”ë§ì´ ë˜ëŠ”ê²ƒì´ë‹¤.

#### useStateë¡œ ì‚¬ìš©í•´ë„ ë¦¬ë Œë”ë§ ë˜ëŠ”ê±´ ë˜‘ê°™ì§€ ì•Šë‚˜?

`useState` ë¡œ ì‚¬ìš©í•´ë„ ë¦¬ë Œë”ë§ ë˜ëŠ”ê±´ ë§žë‹¤. í•˜ì§€ë§Œ `redux` ë¥¼ ë¦¬ë Œë”ë§ì´ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë¬¸ì œì ì€ ì´ `user` ëŠ” ì´ ì»´í¬ë„ŒíŠ¸ ë§ê³  ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‚¬ìš©í•˜ê²Œ ë í…ë° í˜„ìž¬ ë¶€ë¶„ì—ì„œ `user` ë¥¼ ë°”ê¾¸ê²Œë˜ë©´ `ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§` ë˜ì–´ ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤.
ê·¸ëŸ¼ì—ë„ `redux` ë¥¼ ì €ë ‡ê²Œ í˜¸ì¶œí•´ì•¼ í•œë‹¤ë©´ `í•˜ë‚˜ í•˜ë‚˜ì”© ì œëŒ€ë¡œ êº¼ë‚´ì„œ` ì‚¬ìš© í•´ì•¼ í•œë‹¤.
ë˜í•œ `=> state.user.xxx` ì´ ë¶€ë¶„ì—ì„œ return í•´ì£¼ëŠ” ê°’ì´ `ì›ì‹œ íƒ€ìž…` ì´ë©´ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.

```js
const email = useSelector((state) => state.user.email);
const password = useSelector((state) => state.user.password);
const list = useSelector((state) => state.post.list);
```

â­ï¸ `í”„ë¡ íŠ¸` ìž…ìž¥ì—ì„œ ì²˜ìŒë¶€í„° ë„ˆë¬´ ì´ë ‡ê²Œ ë‹¤ `ìµœì í™”` ë¥¼ í•´ì£¼ëŠ”ê²Œ ì¢‹ì§€ëŠ” ì•Šë‹¤. ìžì˜ì ìœ¼ë¡œ íŒë‹¨í•˜ê¸°ì— ì„±ëŠ¥ì— ë”±ížˆ ë¬¸ì œê°€ ì—†ì„ ê²ƒê°™ë‹¤ ì‹¶ìœ¼ë©´ ë‹¤ ë¬¶ì–´ì„œ ì¨ë„ ë˜ê¸´í•¨. ë„ˆë¬´ ì§€ë‚˜ì¹˜ê²Œ ìµœì í™”ë¥¼ í•˜ë ¤ê³  í•˜ë©´ ìµœì í™”ë¥¼ í•˜ë©´ í•  ìˆ˜ë¡ ëŒ€ì²˜í•˜ê¸° íž˜ë“¤ì–´ì§„ë‹¤. ì¦‰, `ìœ ì§€ë³´ìˆ˜ / ê¸°íš ë³€ê²½` ì´ ë˜ì—ˆì„ë•Œì— ê³µìˆ˜ê°€ ë§Žì•„ì§€ê²Œ ë˜ëŠ”ê²ƒ.

```js
const { email, password, isLogginIn } = useSelector((state) => state.user);
```
