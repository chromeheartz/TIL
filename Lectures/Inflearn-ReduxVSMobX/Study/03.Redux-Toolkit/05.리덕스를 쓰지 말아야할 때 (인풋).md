## Redux-Toolkit

### 05. 리덕스를 쓰지 말아야할 때 (인풋)

---

### 📌 리덕스를 사용하며 가장 많이 나오는 질문들

#### 📍 하나의 컴포넌트가 있을 때 그 안에서 리덕스를 써야할 때 / 안 써야할 때

```jsx
// actions/user.js
exports.logIn = createAsyncThunk("user/logIn", async (data, thunkAPI) => {
  // throw new Error("비밀번호가 틀렸습니다.");
  return await delay(500, {
    userId: 1,
    nickname: "bibi",
  });
});
```

예를 들어 `App.jsx` 에서 `logIn` 을 사용하려고 할때 `createAsyncThunk` 로 `비동기 요청` 을 만들어서 사용하고 있다. 이 비동기 요청을 항상 만들어야 할까?
항상은 아니다. `redux-toolkit` 의 사용으로 인해 코드 양이 많이 줄었다고는 해도 여전히 코드 양이 많기 때문에 써야할 때를 구분해야 한다. 괜히 리덕스로 갔다가 오히려 너무 많아서 고통받는 경우가 생긴다.

✅ `비동기 요청` 에서도 구분을 좀 해야하는데 `input` 을 사용할때도 리덕스를 안쓰는 것이 좋다

```jsx
const { email, password } = useSelector((state) => state.user);

const onChangeEmail = useCallback((e) => {
  dispatch(userSlice.actions.setEmail(e.target.value));
}, []);

const onChangePassword = useCallback((e) => {
  dispatch(userSlice.actions.setPassword(e.target.value));
}, []);

<form>
  <input type="email" value={email} onChange={onChangeEmail} />
  <input type="password" value={password} onChange={onChangePassword} />
</form>;
```

`form` 이 있다고 가정할때 보통 `value` 의 값에는 `useState` 를 쓰고 `onChange` 에는 핸들러 함수를 넣어주게 된다. 하지만 이 `value` 를 `redux` 에 넣는 경우에는 좀 많이 지저분해지게 된다.
굳이 `input` 같은것은 액션으로 안만드는 것이 좋다.

⭐️ 리덕스 툴킷에서 데이터는 `action.payload` 안에 들어있다 이전처럼 자유 자재로 `action.email, action.password` 로 만드는 것이 아니라 통일이 되어있다.
꺼내오는 경우에도 `useSelector` 로 가져와서 value로 넣게 되는데 이렇게 해도 돌아가기는 한다.
하지만 추천하지 않는 이유는 `onChange` 가 일어날 때 즉 `글자 하나씩 칠 때마다 action` 이 일어나기 때문에 이렇게 모든 글자하나하나를 `dispatch` 로 만드는게 의미가 없다. 완성된 것만 받아도 된다.

✅ `input` 들을 저런식으로 구현을 꼭 해야한다 하면 `onBlur` 단위로 끊어서 하거나 `onSubmit` 을 트리거로 잡아도 될것이다.
