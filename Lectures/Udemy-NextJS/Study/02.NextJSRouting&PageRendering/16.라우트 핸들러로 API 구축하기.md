## NextJS Routing & Page Rendering

### 16. 라우트 핸들러로 API 구축하기

---

### 📌 라우트 핸들러로 API 구축하기

라우트와 관련된 중요한 두 가지 기능이 있다.

#### ✅ 라우트 핸들러

또 다른 라우트 경로를 라우트 그룹 옆에 설정해보자.
`api` 라는 이름으로 어느 라우트 그룹에도 속하지 않게 한다. 일반 페이지를 렌더링 하지 않기 때문에 레이아웃이 따로 필요하지 않다.
⭐️ `route.js` 라는 이름으로 만들것인데, 이는 `NextJS` 가 찾는 또 다른 예약어이다.
route.js 파일을 생성하면 라우트 핸들러를 설정해야 한다.

#### 그렇다면 라우트 핸들러는 무엇일까?

`다양한 함수` 를 내보내는 파일이다.
`get / post / patch / put / delete` 등 `HTTP 메소드` 이름이 있어야 한다.
라우트 핸들러의 핵심은 화면에 `렌더링 되는 페이지를 반환하지 않는 라우트` 를 설정하는 것에 있다. 대신 라우트 핸들러에서는 보통 `JSON` 데이터를 반환하거나 수신되는 데이터를 수락하고 응답을 반환한다. 따라서 라우트 핸들러의 `목적` 은 `API 같은 라우트` 를 설정하여 데이터를 `생성, 저장` 하는 등 필요한 작업을 전부 수행하되 `클라이언트` 에서 내부적으로 호출하는 것이다.

전체 페이지 콘텐츠를 렌더링 하는 것이 아니라 내부적으로 `일부 데이터` 만 저장할 수 있다.
이런 라우트 핸들러는 `자동` 으로 `request` 객체를 받는다.

```js
// api/route.js
export function GET(request) {
  console.log(request);
  return newResponse();
}
```

`기본 Response` 클래스를 사용해서, `Json` 응답 / 문자열등을 반환할 수 있다.
해당 메소드는 `Response` 클래스에서 직접 호출할 수 있고, 지금은 텍스트를 반환해보자.

![스크린샷 2025-01-14 오후 7 43 52](https://github.com/user-attachments/assets/33c63f2d-138f-46ee-93a8-d05aaa4074d3)

<img width="285" alt="스크린샷 2025-01-14 오후 7 44 56" src="https://github.com/user-attachments/assets/45c72823-cb02-4f0f-a1f0-08a5681fb49d" />

`localhost:3000/api` 로 이동하면 내가 반환해주는 문자열이 제대로 나오는것을 볼 수 있고, 터미널을 보게되면 요청 객체들에 들어오는 값들을 알수가 있다.
⭐️ `함수에 적절한 이름` 을 지정해서 요청을 필터링한다.
req body를 추출해서 DB에 저장하거나 수신하는 정보에서 필요한 정보들을 추출해낼 수도 있다.

라우트 핸들러기능은 현재는 필요하지 않는데, 이후에 클라이언트를 `NextJS` 앱과 연결할 때 특히 유용하다. 넥스트 앱을 구축할 때 페이지 렌더링만 하는게 아니라 `NextJS` 앱에 요청을 보내는 모바일 앱으로 데이터를 전달해야 한다면, 라우트 핸들러를 구축해서 외부 클라이언트로 커뮤니케이션을 처리할 수 있다.
