## NextJS Core (App router)

### 22. 로딩 페이지 추가

---

### 📌 로딩 페이지 추가

이제 `meals` 를 로딩할 수 있는데 다른 페이지를 `/` 로딩하면 화면에 뭔가가 보이기까지 몇초가 걸린다.

데이터베이스에서 식사 정보를 가져올 떄 `지연 시간` 을 추가했기 때문에 페이지가 `업데이트 되기 전` 에 2초정도 멈춤이 있다.

하지만 다른 페이지에 갔다가 다시 `meals` 로 돌아온다면 기다리지 않아도 된다

> ✅ 이때 거의 바로 로딩되는 이유는 `NextJS` 는 안보이는 곳에서 굉장히 `공격적인 캐싱` 을 하기 때문이다. 정확히 말하면 내가 들어간 페이지들 모두 캐시한다. 그 페이지의 데이터까지. 따라서 캐시에서 존재하고 있는 페이지를 로딩하여 최대한 빨리 보여지게 된다.

`새로고침` 할 때만, 즉, 본질적으로 이 페이지를 떠났다가 다시 돌아올 때만 페이지가 다시 설계가 되는것이다

#### 그럼 로딩 표시를 어떻게 추가할 수 있을까?

캐시에 저장정보가 없는 페이지를 누르게 되면 지연이 있어야 들어갈 수 있다

> ⭐️ 이를 개선하는 방법은 `파일에 특별한 폴더` 를 추가하는 것이다. `meals` 폴더에 `loading.js` 를 추가할 수 있다. 이 또한 `지정된 파일 이름` 이고, 이 옆의 `page` 혹은 다른 중첩된 페이지가 있을 때 데이터가 나오기 전까지 대체로 보여지게 된다.

`module.css` 를 추가해서 간단한 스타일링을 해주고 이제 새로고침을 하면 `loading` 되고 있는 것을 볼 수 있다. 이렇게 되면 `무슨일` 이 일어나고 있는지 전보다 더 나은 사용자 경험을 제공할 수 있다.
