## NextJS Core (App router)

### 46. 모듈 요약

---

### 📌 모듈 요약

해당 섹션은 `app router` 를 통해 `NextJS` 의 주요한 요소들을 보았다.

- `app` 대신에 `file system` 을 이용하여 `route` 를 설정
- `page.js / layout.js` 와 같은 특별한 파일명을 가진 파일을 사용
- `error.js / not-found.js` 와 같은 기본 `page / layout` 이외의 특별한 파일. 추가로 로딩 상태를 보여주기 위해 잠깐 사용했던 `loading.js` 파일
- `suspense` 를 사용한 더욱 `세분화된 제어`
  `path 세그먼트` 를 미리 알 수 없는 경우에 `동적 라우팅` 을 구성하는 방법

동적 라우팅의 경우 `음식의 총 개수` 가 몇 개인지 알 수 없는 상태로 각 음식 별 페이지를 로딩할때 가장 중요한 것으로 모든 페이지들은 결국 일반 리액트 컴포넌트를 `export` 하지만 이 컴포넌트들은 `NextJS` 를 사용할 때에는 다소 특별했다.

컴포넌트들은 `서버 컴포넌트` 이고, 서버측에서 실행이 되고 그러므로 `서버측에서 렌더링` 된다.
이것은 단순히 페이지 컴포넌트 뿐만이 아닌 `모든 컴포넌트` 를 의미한다.

그러나 명시적으로 이러한 동작에서 벗어날 수 있다.
`use client` 지시어를 이용해서 파일과 그 컴포넌트를 `클라이언트 컴포넌트` 로 변환하면 클라이언트 측에서 렌더링되고 그리하여 `useState` 또는 사용자 이벤트 관리와 같은 `클라이언트 측 기능` 을 사용할 수 있게 된다.

또한 서버 컴포넌트의 `이점의 활용` 에 대해서도 보았는데, 컴포넌트 안에서 직접 데이터를 가져오는 것과 같은 것.
`useEffect` 를 사용해 요청을 따로 백엔드에 보낼 필요가 없이 그저 `서버 컴포넌트 안` 에서 요청을 따로 백엔드에 보낼 필요가 없이 그저 서버컴포넌트안에서 바로 데이터를 가져오면 된다.

그리고 단순히 데이터를 가져오는 것 뿐만 아니라 `server action / async` 함수에 대해서도 배웠다.
이것들을 사용하기 위해서는 `함수 안` 이나 `파일의 맨 위` 에서 `use server` 지시어를 사용해야 했다.

그리고 `server actions` 의 특별한 점은 `form` 요소의 `action` 속성에 할당할 수 있다는 것입니다. 직접적으로든 아니면 `useFormState` 를 사용해서 가능했다.

이는 `react-dom` 이 제공하는 훅으로 `server action` 기능이 반환하는 응답을 다루거나 그 응답을 기준으로 `UI` 를 변경할 수도 있다.

또한 `server action` 를 기준으로 한 변경으로 `useFormStatus` 훅 또한 보았다.
해당 훅은 현재 `form` 이 제출되고 있는지의 여부를 알아내는데 사용되고, 이에따라 `UI` 를 변경하는데 사용될 수 있고, 이 모든것과 연관되어서 NextJS가 ✅ `공격적인 캐싱` 을 한다고 배웠다.
그러므로 `revalidatePath` 를 호출하여 데이터가 변경될 때마다 가장 최신 데이터를 가져와서 페이지에 나타낼 수 있게 해야한다.

또한 배포 환경에서 데이터를 찾지 못했다.
이 `revalidate` 는 기본적으로 `중요한 기능이며 중요한 개념` 이다.

마지막으로 `metaData` 를 살펴보았다.

> \*\*\*\* 👉 [``]

[``]:
