## NextJS Core (App router)

### 33. ê°œë³„ íŒŒì¼ì— ì„œë²„ ì•¡ì…˜ ì €ì¥

---

### ğŸ“Œ

```js
async function shareMeal(formData) {
  "use server";

  const meal = {
    title: formData.get("title"),
    summary: formData.get("summary"),
    instructions: formData.get("instructions"),
    image: formData.get("image"),
    creator: formData.get("name"),
    creator_email: formData.get("email"),
  };

  console.log(meal);
}
```

ì´ë ‡ê²Œ `server action` ì„ ì¶”ê°€í–ˆì—ˆë‹¤. ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ ì´ ë°©ë²•ì€ `í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹ ë•Œ` ì—ë§Œ ë™ì‘í•œë‹¤. ë§Œì•½ `'use client'
 ` ì§€ì‹œì–´ë¥¼ ì‚¬ìš©í•˜ê³  `server action` ì„ ì‚¬ìš©í•˜ë ¤í•˜ë©´ ì—ëŸ¬ê°€ ë‚œë‹¤.

#### ê°œì„ 

ë§Œì•½ `ì„œë²„ ì¸¡ì˜ form ì œì–´ ë¡œì§` ì„ `JSX` ì™€ ê°™ì´ ë‘ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ë‹¤ë¥¸ íŒŒì¼ë¡œ ì €ì¥í•˜ë©´ ëœë‹¤.
`root/lib/actions.js` ê°™ì€ ì´ë¦„ìœ¼ë¡œ ì •ë¦¬ í•  ìˆ˜ ìˆë‹¤.

âœ… ì¼ë‹¨ `use server` ì§€ì‹œì–´ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. (íŒŒì¼ì˜ ë§¨ìœ„)
ì´ë ‡ê²Œ ì •ì˜í•˜ë©´ í•´ë‹¹ íŒŒì¼ì—ì„œ ì •ì˜í•˜ëŠ” `ëª¨ë“  í•¨ìˆ˜ê°€ server actions` ê°€ ëœë‹¤.

`shareMeal` ì„ ì˜®ê¸°ê³  `meals/share/page.js` ì—ì„œ `import` í•´ì„œ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ë° ì´ ë•Œ í•´ë‹¹ íŒŒì¼ì´ `use client` ë¡œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

> âœ… ë§ì´ ì•ˆë ì§€ ëª¨ë¥´ì§€ë§Œ ë¬¸ì œëŠ” `ê°™ì€ íŒŒì¼ì— í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì½”ë“œ / ì„œë²„ ì¸¡ ì½”ë“œ` ë¥¼ ì •ì˜í•˜ë ¤ê³  í–ˆì—ˆê³ , `NextJS` ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥ í•˜ê¸° ëŒ€ë¬¸ì— ì„œë²„ ì¸¡ ì½”ë“œê°€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ìœ„ì¹˜í•´ì„œ ë³´ì•ˆ ë¬¸ì œê°€ ìƒê¸°ê±°ë‚˜ ë‹¤ë¥¸ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì´ëŸ° ê¸°ìˆ ì ì¸ ì´ìœ ë¡œ ê°™ì€ íŒŒì¼ì— `ë‘ ì¢…ë¥˜` ë¥¼ ì„ìœ¼ë©´ ì•ˆë˜ê³ , ëŒ€ì‹  `server action` ì„ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ `import` í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ê°™ì€ ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
// lib/actions.js
"use server";

export async function shareMeal(formData) {
  const meal = {
    title: formData.get("title"),
    summary: formData.get("summary"),
    instructions: formData.get("instructions"),
    image: formData.get("image"),
    creator: formData.get("name"),
    creator_email: formData.get("email"),
  };

  console.log(meal);
}

// meals/share/page.js
("use client");
import ImagePicker from "@/components/meals/image-picker";
import classes from "./page.module.css";
import { shareMeal } from "@/lib/actions";

export default function ShareMealPage() {
  return <>...</>;
}
```

> â­ï¸ `use client` ê°€ ì§€ê¸ˆ ì € í˜ì´ì§€ì—ì„œ ì¤‘ìš”í•˜ì§€ ì•Šì§€ë§Œ ì„ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”
