## Fetching

### 02. ì˜µì…˜ 1 > í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

---

### ðŸ“Œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

`ë°±ì—”ë“œ API ì›¹ì„œë²„` ë¥¼ ì‹œìž‘í•´ì•¼ í•œë‹¤.
í„°ë¯¸ë„ì—ì„œ ë°±ì—”ë“œ í´ë” ìœ„ì¹˜ë¡œ ì´ë™í•´ì„œ `npm start` ë¡œ ë°±ì—”ë“œ ì„œë²„ë¥¼ ì¼œì¤€ë‹¤.

![Image](https://github.com/user-attachments/assets/d5ef24f7-ec26-475b-a08b-72d0e54cf13a)

ì¶”ê°€ë¡œ `root` ì—ì„œ `NextJS` ì•±ë„ ì¼œì£¼ê²Œ ë˜ë©´ ë‘ ì„œë²„ ëª¨ë‘ í™œì„±í™” ëœë‹¤.
ë°±ì—”ë“œ ì•±ì€ `localhost 8080` ì—ì„œ ì œê³µëœë‹¤. ì´ë¥¼ í†µí•´ ë°±ì—”ë“œì—ì„œ ë‰´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì½”ë“œë¥¼ ì¡°ì •í•  ìˆ˜ ìžˆë‹¤.

ë‹¤ë¥¸ `React` ì•±ì—ì„œì²˜ëŸ¼ ë³„ë„ APIë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì¸¡ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.
`app/(content)/news/page.js` ì—ì„œ ìž‘ì—…ì„ ì‹œìž‘í•´ë³´ìž.

`fetch` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìžˆëŠ”ë°, ì´ í•¨ìˆ˜ëŠ” `useEffect` í›…ì„ ì‚¬ìš©í•´ì„œ ì¼ë°˜ì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  `HTTP` ìš”ì²­ê³¼ ê°™ì€ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.

`TanStack Query` ë¥¼ ì‚¬ìš©í• ìˆ˜ë„ ìžˆëŠ”ë°, í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  `ìºì‹±` í•˜ëŠ” ê³¼ì •ì„ ë‹¨ìˆœí™”í•œë‹¤. í˜„ìž¬ëŠ” ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ ìœ ì§€í•˜ê¸° ìœ„í•´ `í‘œì¤€ ë‚´ìž¥ fetch í•¨ìˆ˜` ë¥¼ ì‚¬ìš©.

> ì´ ìž‘ì—…ì€ `Promise` ë¥¼ ë°˜í™˜í•˜ëŠ”ë° `useEffect` í•¨ìˆ˜ì—ì„œ `async / await` ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `async` ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ê¶Œìž¥ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³„ë„ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ `async / await` ë¥¼ ì‚¬ìš©í•˜ìž.

`response` ê°€ ì‹¤íŒ¨í•  ìˆ˜ë„ ìžˆìœ¼ë‹ˆ, ì¡°ê±´ë¬¸ìœ¼ë¡œ ì˜¤ë¥˜ìƒíƒœë„ ìž¡ì•„ì¤€ë‹¤.
ì´ì œ ì´ ë‹¨ê³„ë¥¼ ë„˜ì–´ì„œì„œëŠ” `ë¡œë”© ìƒíƒœ` ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ `isLoading` ì„ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì´ë¥¼ `true` ë¡œ ì„¤ì •í•˜ê³  ì´ˆê¸°ì—ëŠ” `false` ë¡œ ì„¤ì •í•´ë†“ëŠ”ë‹¤.

`3ë²ˆì§¸ state` ë¡œ `news` ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ë‹µë°ì´í„°ë¥¼ ë‰´ìŠ¤ë¡œ ì„¤ì •í•œë‹¤. ì‹¤ì œë¡œ ë°ì´í„°ê°€ ë¨¼ì € íŒŒì‹±ë˜ì–´ì•¼ í•˜ë¯€ë¡œ `response.json()` ì„ í˜¸ì¶œí•œë‹¤. ì´ëŠ” ê¸°ë‹¤ë ¤ì•¼í•  `Promise` ë¥¼ ë°˜í™˜í•˜ëŠ”ë°, ì´í›„ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ë‰´ìŠ¤ ìƒíƒœë¡œ íŒŒì‹±ëœ ë‰´ìŠ¤ë¥¼ ì„¤ì •í•˜ë©´ ëœë‹¤.

```jsx
"use client";

import NewsList from "@/components/news-list";
import { useEffect, useState } from "react";

export default function NewsPage() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState();
  const [news, setNews] = useState();
  useEffect(() => {
    async function fetchNews() {
      setIsLoading(true);
      const response = await fetch("http://localhost:8080/news");
      if (!response.ok) {
        setError("Failed to fetch news.");
        setIsLoading(false);
      }

      const news = await response.json();
      setNews(news);
      setIsLoading(false);
    }

    fetchNews();
  }, []);

  if (isLoading) {
    return <p>Loading...</p>;
  }

  if (error) {
    return <p>{error}</p>;
  }

  let newsContent;

  if (news) {
    newsContent = <NewsList news={news} />;
  }

  return (
    <>
      <h1>News Page</h1>
      {newsContent}
    </>
  );
}
```

ì´ë ‡ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì€ `ëª¨ë“  React app` ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìžˆê³ , `NextJS` ì—ì„œë„ ì˜ˆì™¸ëŠ” ì•„ë‹ˆë‹¤.
`/news` íŽ˜ì´ì§€ë¥¼ ë“¤ì–´ê°€ì„œ í™•ì¸í•´ë³´ë©´ ì œëŒ€ë¡œ ë‚˜ì˜¤ëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.
`fetch` ì—ì„œ `localhost:8080` ì„ í•  ê²½ìš° ì˜¤ë¥˜ê°€ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” `ë°±ì—”ë“œ ë„ë©”ì¸` ì—ë§Œ ìš”ì²­ì„ ë³´ëƒˆê¸° ë•Œë¬¸ì— `/news` ë¥¼ ì‚¬ìš©í•´ì„œ ë°±ì—”ë“œ ì½”ë“œì™€ ì‹±í¬ë¥¼ ë§žì¶°ì¤€ê²ƒì´ë‹¤.

> âœ… ì´ ë°©ë²•ì€ ëª¨ë“  `React app` ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìžˆê³ , ë”°ë¼ì„œ ë°ì´í„°ë¥¼ ë¡œë”©í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” í›Œë¥­í•œ ë°©ë²•ì´ì§€ë§Œ, `NextJS` ë¥¼ ì‚¬ìš©í•  ë•Œ ë°ì´í„°ë¥¼ ë¡œë”©í•˜ëŠ” ìµœì„ ì˜ ë°©ë²•ì€ ì•„ë‹ˆë‹¤.

> \*\*\*\* ðŸ‘‰ [``]

[``]:
