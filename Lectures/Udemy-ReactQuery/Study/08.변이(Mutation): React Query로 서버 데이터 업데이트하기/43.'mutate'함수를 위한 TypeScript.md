## ë³€ì´(Mutation): React Queryë¡œ ì„œë²„ ë°ì´í„° ì—…ë°ì´íŠ¸í•˜ê¸°
### 43. 'mutate' í•¨ìˆ˜ë¥¼ ìœ„í•œ TypeScript
<hr>

### ğŸ“Œ TypeScript: Returning mutate Function

ì»¤ìŠ¤í…€ í›…ì—ì„œ `mutate í•¨ìˆ˜` ë¥¼ ë°˜í™˜í•˜ëŠ” ìœ í˜•.
`useMutateFunction` ì—ëŠ” ëª‡ê°€ì§€ ë§¤ê°œ ë³€ìˆ˜ê°€ ìˆë‹¤.

```ts
UseMutateFunction<IData = unknown, TError = unknown, TVariables = void, TContext = unknown>
```

- `TData` : ë³€ì´ í•¨ìˆ˜ ìì²´ì—ì„œ ë°˜í™˜ëœ `ë°ì´í„° ìœ í˜•`
- `TError` : ë³€ì´ í•¨ìˆ˜ì—ì„œ ë°œìƒí•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” `ì˜¤ë¥˜ ìœ í˜•`
- `TVariables` : `ë³€ìˆ˜` ê°€ ìˆëŠ”ë° ì´ê²ƒì€ mutate í•¨ìˆ˜ê°€ ì˜ˆìƒí•˜ëŠ” `ë³€ìˆ˜ ìœ í˜•`. í˜„ì¬ëŠ” mutateí•¨ìˆ˜ì— `Appointment` ë¥¼ ì „ë‹¬í•œë‹¤.
- `TContext` : ì»¨í…ìŠ¤íŠ¸. `ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ë¡¤ë°±` ì„ ìœ„í•´ `onMutate` ì— ì„¤ì •í•˜ëŠ” ìœ í˜•.

### ğŸ“Œ TS

`UseMutateFunction` ì„ ê°€ì ¸ì˜¤ê³  ìœ í˜•ì„ ë„£ì–´ì£¼ê¸°ì „ì— `íŒíŠ¸` í™•ì¸.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-16 á„‹á…©á„’á…® 7 19 04](https://github.com/chromeheartz/TIL/assets/95161113/f2714e16-d7ce-47f8-be48-92384ac73f72)

`Data / Error / Variables / Context` ê°€ ìˆë‹¤.
- ë³€ì´ í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ ë°ì´í„°ì˜ ê²½ìš° `void` (í˜„ì¬ ì•±ê¸°ì¤€)
- ì˜¤ë¥˜ ìœ í˜•ì€ ì¼ë‹¨ `unknown`. ì¶”í›„ì— ì˜¤ë¥˜ ìœ í˜•ê³¼ onError í•¸ë“¤ëŸ¬ë¥¼ í™•ì¸
- mutate í•¨ìˆ˜ì— mutation í•¨ìˆ˜ë¡œ ì „ë‹¬ë  ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— `Appointment`
- `ì»¨í…ìŠ¤íŠ¸ ìœ í˜•` ì€ `unknown` ìœ¼ë¡œ ë‚¨ê²¨ë‘ê³ , `ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ í•  ë•Œ` ì±„ì›Œë„£ê¸°.

ì—¬ê¸°ê¹Œì§€í•˜ë©´ `void` ìœ í˜•ì˜ ì¸ìˆ˜ë¥¼ `Appointment ìœ í˜•ì˜ ë§¤ê°œë³€ìˆ˜` ì— í• ë‹¹í•  ìˆ˜ ì—†ë‹¤ê³  ì˜¤ë¥˜ê°€ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì—, ì¸ìˆ˜ë¥¼ ì¡°ê¸ˆ ë” `êµ¬ì²´ì ` ìœ¼ë¡œ ì…ë ¥í•´ì£¼ë©´ ëœë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-16 á„‹á…©á„’á…® 7 23 36](https://github.com/chromeheartz/TIL/assets/95161113/9ecf5b7b-068e-4de5-bdbd-9028b1660c2e)

```ts
// useReserveAppointment.ts
type AppointmentMutationFunction = (appointment: Appointment) => void;

export function useReserveAppointment(): UseMutateFunction<
  void,
  unknown,
  Appointment,
  unknown
> {
  const { user } = useUser();
  const toast = useCustomToast();

  const { mutate } = useMutation((appointment: Appointment) =>
    setAppointmentUser(appointment, user?.id),
  );

  return mutate;
}
```