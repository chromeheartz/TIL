## ì¿¼ë¦¬íŠ¹ì„± 2: ë°ì´í„° ë³€í™˜ê³¼ ë°ì´í„° ë¦¬íŽ˜ì¹­(Re-fetching)
### 33. ë¦¬íŽ˜ì¹˜(Re-fetch) ê¸°ë³¸ê°’ ì˜¤ë²„ë¼ì´ë“œì™€ í´ë§

### ðŸ“Œ Override & Polling

ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ `refetching` ì´ ìžì£¼ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì •ë³´ì˜ ë³€ë™ì´ ì ê±°ë‚˜ ì‚¬ìš©ìžì— ì˜í•´ ì „í˜€ ë³€ê²½ì´ ë˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ê°–ëŠ” íŽ˜ì´ì§€ë“¤ì´ ì¡´ìž¬í•  ê²½ìš°ì´ë‹¤. í•˜ì§€ë§Œ, ë°˜ëŒ€ë¡œ `ëŠ˜ ìµœì‹ í™”ëœ ë°ì´í„°`ë¥¼ ì¶œë ¥í•´ì•¼í•˜ëŠ” íŽ˜ì´ì§€ì—ì„œëŠ” `í•­ìƒ refetchingì´ ì¼ì–´ë‚˜ì•¼ í•œë‹¤`.

`appointments` ê°™ì€ ê²½ìš°ëŠ” ì‚¬ìš©ìž í™œë™ì´ ì—†ëŠ” ìƒíƒœì—ì„œë„ `ì„œë²„ì— ë³€ê²½` ì´ ì´ë£¨ì–´ì ¸ì•¼í–ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìœ„ì™€ ê°™ì´ refetchingì— ëŒ€í•´ `ì œí•œëœ ìƒíƒœ`ì—ì„œ refetchingì´ ê¼­ ì´ë£¨ì–´ì ¸ì•¼í•˜ëŠ” íŽ˜ì´ì§€ëŠ” ì–´ë–»ê²Œ í•´ì¤˜ì•¼í• ê¹Œ? 

> `ì „ì—­ ê¸°ë³¸ê°’` ì„ ì¡°ì •í•œ í›„, `í´ë§` ì„ ì‹¤í–‰ì‹œì¼œ ë°ì´í„°ë¥¼ `ì£¼ê¸°ì ` ìœ¼ë¡œ ì„œë²„ì—ì„œ ë¶ˆëŸ¬ì˜¬ ê²ƒì´ë‹¤.

#### âœ… **Override**

ìƒìœ„ì—ì„œ ì„¤ì •í•œ ì˜µì…˜ì„ í•˜ìœ„ì—ì„œ `ìž¬ì •ì˜` í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, refetchingì´ í•„ìš”í•œ íŽ˜ì´ì§€ì—ì„œ ë³„ë„ë¡œ ì„¤ì •ì„ ë˜ í•´ì£¼ë©´ ë.

#### â­ï¸ Pre-fetching

`useQuery` ì— ì ì€ ì˜µì…˜ë“¤ ì¤‘ `refetch...`ì€ `í”„ë¦¬ íŒ¨ì¹­` ì— ì ìš©ë˜ì§€ ì•Šì§€ë§Œ `staleTime / cacheTime` ì€ `pre-fetching` ì—ë„ ì ìš©ì´ ë˜ë‹ˆ ë¶„ë¦¬í•´ì„œ `commonOptions` ë¼ëŠ” ê°ì²´ë¡œ ë§Œë“¤ì–´ì£¼ê³ , í•„ìš”í•œë¶€ë¶„ì— ì˜µì…˜ìœ¼ë¡œ ë„£ì–´ì£¼ì—ˆë‹¤.
ì¶”ê°€ë¡œ `commonOptions` ê°ì²´ê°€ ë Œë”ë§ë§ˆë‹¤ useEffect í›…ì˜ ì˜ì¡´ì„±ì„ ë§Œë“¤ê²Œ `[dependency]` ì—ë„ ì¶”ê°€


```tsx
// useAppointments.ts
  const commonOptions = { staleTime: 0, cacheTime: 300000 };

  useEffect(() => {
    ...
  }, [queryClient, monthYear, commonOptions]);

  const fallback = {};
  const { data: appointments = fallback } = useQuery(
    [queryKeys.appointments, monthYear.year, monthYear.month],
    () => getAppointments(monthYear.year, monthYear.month),
    {
      select: showAll ? undefined : selectFn,
      ...commonOptions,
      refetchOnMount: true,
      refetchOnWindowFocus: true,
      refetchOnReconnect: true,
    },
  );
```


<!--#### âœ… **Polling**-->