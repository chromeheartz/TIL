## μΏΌλ¦¬ μƒμ„± λ° λ΅λ”©/μ—λ¬ μƒνƒ
### 01.React Query μ†κ°
---------------------------------------------

`React Query` λ” React μ•±μ μ„λ²„ μƒνƒλ¥Ό κ΄€λ¦¬ν•λ” λΌμ΄λΈλ¬λ¦¬μ΄λ‹¤.

### π“ Client State vs Server State

#### Client State

ν΄λΌμ΄μ–ΈνΈ μƒνƒλ€ μ›Ή λΈλΌμ°μ € μ„Έμ…κ³Ό κ΄€λ ¨λ λ¨λ“  μ •λ³΄λ¥Ό μλ―Έν•λ‹¤.
μλ΅, μ‚¬μ©μλ” κ°€μ¥ μ μ•„λ” μ–Έμ–΄λ΅ ν…μ¤νΈλ¥Ό μ½κΈ° μ„ν•΄ μ–Έμ–΄λ¥Ό μ„ νƒν•κ±°λ‚
ν…λ§λ¥Ό λ‹¤ν¬, λΌμ΄νΈλ΅ λ°”κΏ€ μ μλ”λ°, μ΄κ²ƒμ€ μ„λ²„μ—μ„ μΌμ–΄λ‚λ” μΌκ³Όλ” μ•„λ¬΄ κ΄€λ ¨μ΄ μ—†λ‹¤.
λ‹¨μν `μ‚¬μ©μμ μƒνƒ` λ¥Ό μ¶”μ ν•λ” κ²ƒ λΏμ΄λ‹¤.

#### Server State

μ„λ²„ μƒνƒλ” μ„λ²„μ— μ €μ¥λμ§€λ§
ν΄λΌμ΄μ–ΈνΈμ— ν‘μ‹ν•λ” λ° ν•„μ”ν• λ°μ΄ν„°μ΄λ‹¤.
μλ΅, λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•λ” λΈ”λ΅κ·Έ κ²μ‹λ¬Ό λ°μ΄ν„°κ°€ μ΄μ— ν•΄λ‹Ήν•λ‹¤.

μ‚¬μ©μμ—κ² κ²μ‹λ¬Όμ„ ν‘μ‹ν•κΈ° μ„ν•΄ ν΄λΌμ΄μ–ΈνΈμ— μ΄ λ°μ΄ν„°κ°€ μμ–΄μ•Ό ν•μ§€λ§
λ°μ΄ν„°λ” μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈμ— ν‘μ‹ν•  μ μλ„λ΅ μ„λ²„μ— μ €μ¥λλ‹¤.

### π“ React Queryκ°€ ν•΄κ²°ν•  μ μλ” λ¬Έμ 

React Queryλ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„ λ°μ΄ν„° μΊμ‹λ¥Ό κ΄€λ¦¬ν•λ‹¤.
React μ½”λ“μ— μ„λ²„ λ°μ΄ν„°κ°€ ν•„μ”ν•  λ• 
`ν¨μΉ(Fecth) / Axios` λ¥Ό μ‚¬μ©ν•΄ μ„λ²„λ΅ λ°”λ΅ μ΄λ™ν•μ§€ μ•κ³  `React Query μΊμ‹` λ¥Ό μ”μ²­ν•λ‹¤.
κ²°κµ­ React Query μΊμ‹κ°€ `μ„λ²„ λ°μ΄ν„°μ— λ€ν• κ³µκΈ‰μ›` μ΄ λλ”κ²ƒμ΄λ‹¤.

React Queryμ μ—­ν• μ€ 
`React Query ν΄λΌμ΄μ–ΈνΈ` λ¥Ό μ–΄λ–»κ² κµ¬μ„±ν–λλƒμ— λ”°λΌ ν•΄λ‹Ή `μΊμ‹μ λ°μ΄ν„°λ¥Ό μ μ§€ / κ΄€λ¦¬` ν•λ” κ²ƒμ΄λ‹¤.

 ### π“ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•λ” React Query
 
 μ„λ²„μ μƒ λ°μ΄ν„°λ΅ μΊμ‹λ¥Ό μ—…λ°μ΄νΈν•λ” μ‹κΈ°λ¥Ό μ„¤μ •ν•λ” κ²ƒμ€ `μ‚¬μ©μμ λ«` μ΄λ‹¤.
 
```js
// React Query μΊμ‹ μμ‹

key: 'blog-posts'
data: [
  1: {
  title: 'React Query',
  tagLine: 'What is this thing?',
  },
  2: {
    title: 'React Query Mutations',
    tagLine: 'Not just for ninja turtles',
  },
]

// μ„ μ–Έν• μ²λ¦¬μ‹ ν•„μ”ν•λ‹¤.
staleTime: 30 seconds
```

μ΄ μΊμ‹μ—λ” 'blog-posts' λΌλ” ν‚¤λ¥Ό ν• λ‹Ήν• λ°μ΄ν„°κ°€ μλ‹¤.
μ΄ `key` κ°€ λ°μ΄ν„°κ°€ μ‹λ³„λλ” λ°©μ‹μ΄λ‹¤.

β­οΈ ν΄λΌμ΄μ–ΈνΈ μΊμ‹μ— μλ” μ΄ λ°μ΄ν„°κ°€ μ„λ²„μ λ°μ΄ν„°μ™€ μΌμΉν•λ”μ§€ ν™•μΈν•΄μ•Ό ν•λ”λ°
μ—¬κΈ°μ—λ” λ‘κ°€μ§€ λ°©λ²•μ΄ μλ‹¤

- `λ…λ Ήν•` : μΏΌλ¦¬ ν΄λΌμ΄μ–ΈνΈμ— μ΄ λ°μ΄ν„°λ¥Ό λ¬΄ν¨ν™”ν•κ³  μΊμ‹μ— `κµμ²΄ν•  μƒ λ°μ΄ν„°` λ¥Ό μ„λ²„μ—μ„ κ°€μ Έμ¤κ² μ§€μ‹ν•λ” κ²ƒ
- `μ„ μ–Έν•` : `λ¦¬ν¨μΉ(Refetch)λ¥Ό νΈλ¦¬κ±°ν•λ” μ΅°κ±΄` μ„ κµ¬μ„±ν•λ” κ²ƒ. μλ΅, λΈλΌμ°μ € μ°½μ΄ λ‹¤μ‹ ν¬μ»¤μ¤ λμ—μ„ λ• μ²λΌ. staleTimeμΌλ΅ λ‹¤μ‹ κ°€μ Έμ¤κΈ°λ¥Ό μ–Έμ  νΈλ¦¬κ±°ν• μ§€λ„ κµ¬μ„±ν•  μ μλ‹¤.

### π“ μ„λ²„ μƒνƒ κ΄€λ¦¬μ— λ„μ›€μ΄ λλ” λ§μ€ λ„κµ¬λν• μ κ³µ

- `Loading / Error States` : μ„λ²„μ— λ€ν• λ¨λ“  μΏΌλ¦¬μ λ΅λ”© λ° μ¤λ¥ μƒνƒλ¥Ό μ μ§€ν•΄μ£ΌκΈ° λ•λ¬Έμ— μλ™μΌλ΅ ν•  ν•„μ”κ°€ μ—†λ‹¤.
- `Pagination / infinite scroll` : μ‚¬μ©μλ¥Ό μ„ν•΄ λ°μ΄ν„°μ `pagination / infinite scroll` μ΄ ν•„μ”ν• κ²½μ° λ°μ΄ν„°λ¥Ό μ΅°κ°μΌλ΅ κ°€μ Έμ¬ μ μλ” λ„κµ¬λ„ μ κ³µ
- `Prefetching` : μ‚¬μ©μκ°€ μ–Έμ  λ°μ΄ν„°λ¥Ό ν•„μ”λ΅ ν• μ§€ μμƒν•μ—¬ `ν”„λ¦¬ν¨μΉ(Prefetch)` λ¥Ό μν–‰ν•  μ μλ‹¤. λ°μ΄ν„°λ¥Ό λ―Έλ¦¬ κ°€μ Έμ™€μ„ μΊμ‹μ— λ„£μΌλ©΄ μ‚¬μ©μμ—κ² λ°μ΄ν„°κ°€ ν•„μ”ν•  λ• μ•±μ΄ `μΊμ‹μ—μ„ ν•΄λ‹Ή λ°μ΄ν„°` λ¥Ό κ°€μ Έμ¤κΈ° λ•λ¬Έμ— μ„λ²„μ— μ—°κ²°ν•  λ•κΉμ§€ κΈ°λ‹¤λ¦΄ ν•„μ”κ°€ μ—†λ‹¤.
- `Mutations` : React Queryκ°€ μ„λ²„μ—μ„ `λ°μ΄ν„°μ λ³€μ΄(Mutations)` λ‚ μ—…λ°μ΄νΈλ¥Ό κ΄€λ¦¬ν•  μ μλ„λ΅ ν•λ‹¤
- `De-duplication of requests` : `μΏΌλ¦¬λ” keyλ΅ μ‹λ³„` λκΈ° λ•λ¬Έμ— μ”μ²­μ„ κ΄€λ¦¬ν•  μ μκ³  νμ΄μ§€λ¥Ό λ΅λ“ν•κ³  ν•΄λ‹Ή νμ΄μ§€μ μ—¬λ¬ κµ¬μ„± μ”μ†κ°€ λ™μΌν• λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” κ²½μ° `μΏΌλ¦¬λ¥Ό ν• λ²μ—` λ³΄λ‚Ό μ μλ‹¤. κΈ°μ΅΄ μΏΌλ¦¬κ°€ λ‚κ°€λ” λ™μ• λ‹¤λ¥Έ κµ¬μ„±μ”μ†κ°€ λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” κ²½μ° `μ¤‘λ³µ μ”μ²­μ„ μ κ±°` ν•  μ μλ‹¤.
- `Retry on error` : μ„λ²„μ—μ„ μ¤λ¥κ°€ λ°μƒν•λ” κ²½μ°μ— λ€ν• `μ¬μ‹λ„` λ¥Ό κ΄€λ¦¬ν•  μ μλ‹¤.
- `Callbacks` : μΏΌλ¦¬κ°€ `μ„±κ³µ / μ¤λ¥` μΌ λ•λ¥Ό κµ¬λ³„ν•΄μ„ μ΅°μΉλ¥Ό μ·¨ν•  μ μλ„λ΅ `μ½λ°± μ „λ‹¬` μ΄ κ°€λ¥ν•λ‹¤.